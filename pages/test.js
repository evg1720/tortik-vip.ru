!function (e) { var t = {}; function i(n) { if (t[n]) return t[n].exports; var s = t[n] = { i: n, l: !1, exports: {} }; return e[n].call(s.exports, s, s.exports, i), s.l = !0, s.exports } i.m = e, i.c = t, i.d = function (e, t, n) { i.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n }) }, i.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, i.t = function (e, t) { if (1 & t && (e = i(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var n = Object.create(null); if (i.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var s in e) i.d(n, s, function (t) { return e[t] }.bind(null, s)); return n }, i.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return i.d(t, "a", t), t }, i.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, i.p = "", i(i.s = 305) }([function (e, t, i) { "use strict"; t.__esModule = !0, t.default = void 0, i(1); var n = l(i(97)), s = l(i(98)), o = l(i(99)), r = i(15), a = i(7), d = i(100), c = i(13); function l(e) { return e && e.__esModule ? e : { default: e } } let u = 0; const h = /image/i, g = { ar: !0, fa: !0, he: !0, ur: !0, yi: !0 }, p = navigator.userAgent.toLowerCase(), m = [[223, 223], [880, 1791], [2304, 3711], [4256, 4351], [12352, 12543], [19968, 40879], [44032, 55215]], _ = [/(\n+)/, /([.!?;\u0964](?:\s+|$))/, /([\-\u2012-\u2015](?:\s+|$))/, /([,:](?:\s+|$))/, /([\u3002\uff01\uff1f\uff1b\u2026])/, /([\uff0c\uff1a])/, /(\s+)/], f = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, E = m.length, T = { tm: 0, val: null }, S = Boolean(document.documentElement.classList) && Boolean(document.createElementNS("http://www.w3.org/2000/svg", "svg").classList); let v = !1; try { window.addEventListener("test", null, Object.defineProperty({}, "passive", { get() { v = !0 } })) } catch (e) { } const C = document.createElement("link"), L = { yandexuid: "yu", _ym_uid: "yum", spravka: "sprvk" }, A = { mob: /mobi|tablet/.test(p), iOS: function (e) { if (/ip(hone|ad|od)/.test(e)) { const t = e.match(/os ([0-9_]+)/); return t ? parseFloat(t[1].replace(/_/g, ".")) : 1 } return 0 }(p), android: function (e) { const t = e.match(/android ([0-9.]*)/); return t ? parseFloat(t[1] || 1) : 0 }(p), IE: /msie|trident/.test(p), macOS: /mac os/.test(p), chromeVersion: function (e) { const t = e.match(/chrom(e|ium)\/([0-9]+)\./); return !!t && parseInt(t[2], 10) }(p), firefoxVersion: function (e) { const t = e.match(/firefox\/([0-9]+)\./); return t ? parseInt(t[1]) : 0 }(p), ieVersion: (y = p, y.indexOf("msie ") > 0 ? 10 : y.indexOf("trident/") > 0 ? 11 : y.indexOf("edge/") > 0 ? 12 : 0), safariVersion: function (e) { if (!e.match(/chrom(e|ium)\/([0-9]+)\./) && e.indexOf("safari/") > 0) { const t = e.match(/version\/([0-9]+)/); return t ? parseInt(t[1] || 1) : 0 } return 0 }(p), yaBro: -1 !== p.indexOf("yabrowser"), isLinux: -1 !== p.indexOf("linux") && -1 === p.indexOf("android"), assertTrue(e, t) { if (!e) throw new Error(t) }, assertNotEmptyString(e, t) { this.assertTrue(e && this.isString(e), t) }, noop() { }, trim(e) { return this.isString(e) ? e.trim() : e }, bind(e, t, i, n, s = !0) { e.addEventListener(t, i, b(t, n, s)) }, unbind(e, t, i, n, s = !0) { e.removeEventListener(t, i, b(t, n, s)) }, isUrl: e => e.includes(".") && !e.includes(" ") && !/\s/.test(e) && s.default.test(e) && RegExp.$4.length > 1, getHostname(e) { return this.isUrl(e) ? e.match(s.default)[2] : "" }, isEmail: e => o.default.test(e), isImageFile: e => e && h.test(e.type), clone(e) { return this.isArray(e) ? e.slice() : this.isObject(e) ? this.extend({}, e) : e }, toObject(e) { const t = {}; for (const i in e) t[i] = e[i]; return t }, slice: (e, t, i) => Array.prototype.slice.call(e, t, i), findIndex(e, t, i) { return this.isArray(e) && this.isFunction(e.findIndex) ? e.findIndex(t, i) : this.findIndexInternal(e, t, i) }, findIndexInternal(e, t, i) { if (!this.isArray(e)) throw new Error("Object should be an array"); if (!this.isFunction(t)) throw new Error("Predicate should be a function"); for (let n = 0; n < e.length; n++) { const s = e[n]; if (t.call(i, s, n, e)) return n } return -1 }, extend: Object.assign || function (e = {}) { const t = this.slice(arguments, 1); for (let i = 0; i < t.length; i++) { const n = t[i]; n && Object.keys(n).forEach((function (t) { e[t] = n[t] })) } return e }, capitalizeWord: e => e.charAt(0).toUpperCase() + e.substr(1), isAlpha(e) { if (e.toLowerCase() !== e.toUpperCase()) return !0; for (let t = 0, i = e.charCodeAt(0); t < E; t++)if (i >= m[t][0] && i <= m[t][1]) return !0; return !1 }, isDigit(e) { const t = e.charCodeAt(0); return t >= 48 && t <= 57 }, isEqual: Object.is || function (e, t) { return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t }, isEmpty(e) { return !e || (this.isArray(e) ? 0 === e.length : !!this.isObject(e) && 0 === Object.keys(e).length) }, forEach(e, t, i) { for (let n = 0; n < e.length && !1 !== t.call(i, e[n], n, e); n++); }, hasAlpha(e) { if (!e) return !1; for (let t = 0; t < e.length; t++)if (this.isAlpha(e.charAt(t))) return !0; return !1 }, hasDigit(e) { if (!e) return !1; for (let t = 0; t < e.length; t++)if (this.isDigit(e.charAt(t))) return !0; return !1 }, getEmoji(e) { let t = n.default.exec(e); const i = []; for (; t;)i.push({ value: t[0], index: t.index }), t = n.default.exec(e); return i }, hasEmojiOnly(e) { const t = this.getEmoji(e).reduce((e, { value: t }) => e + t.length, 0); return t > 0 && e.replace(/\s/g, "").length === t }, getEmojiCodes(e) { let t, i = 0; const n = e.length, s = []; for (; i < n;) { let n = e.charCodeAt(i++); n >= 55296 && n <= 56319 ? t = n : (t && (n = n - 56320 + (t - 55296 << 10) + 65536, t = 0), s.push(n.toString(16))) } return s }, getValueTokens(e, t) { return this.trim(e).split(/\s+/, t) }, hasAlphaOrDigit(e) { return this.hasAlpha(e) || this.hasDigit(e) }, getStyle(e, t) { const i = window.getComputedStyle(e, null) || e.style; return t ? i[t] : i }, setStyles(e, t) { for (const i in t) t.hasOwnProperty(i) && (e.style[i] = t[i]) }, throttle(e, t) { let i = !0; const n = this.isNumber(t) ? t : 50; return function () { i && (e.apply(this, arguments), i = !1, setTimeout((function () { i = !0 }), n)) } }, throttleWithCallGuarantee(e, t = 50) { let i, n; return (...s) => { const o = this.now(); clearTimeout(n), !i || o - i >= t ? (i = o, e(...s)) : n = setTimeout(() => { i = this.now(), e(...s) }, t - o + i) } }, debounce(e, t = 50) { let i; const n = this.isNumber(t) ? t : 50, s = function () { const t = this, s = arguments; return clearTimeout(i), i = setTimeout((function () { e.apply(t, s) }), n), this }; return s.callNow = function () { return clearTimeout(i), e.apply(this, arguments), this }, s }, hasClass: S ? function (e, t) { return e.classList && e.classList.contains(t) } : function (e, t) { const i = e.getAttributeNS(null, "class"); return !!i && (" " + i + " ").replace(/\s+/g, " ").indexOf(" " + t + " ") >= 0 }, saveFile(e, t, i) { if (navigator.msSaveBlob) return navigator.msSaveBlob(new Blob([i], { type: t }), e); const n = "data:" + t + ";charset=" + (document.charset || document.characterSet) + "," + encodeURIComponent(i); return this.downloadFile(n, e) }, copyText: window.clipboardData ? function (e) { return window.clipboardData.setData("Text", e) } : function (e) { let t = !1; if (!document.queryCommandSupported || !document.queryCommandSupported("copy")) return !1; const i = document.createElement("textarea"); i.value = e, i.setAttribute("readonly", ""), i.style.position = "fixed", document.body.appendChild(i), i.setSelectionRange(0, i.value.length), i.focus(); try { t = document.execCommand("copy") } catch (e) { } return i.blur(), document.body.removeChild(i), t }, isRTLLang(e) { return this.hasProperty(g, e) }, hasCtrlKey: e => Boolean(e.metaKey || e.ctrlKey), escapeHTML: e => String(e).replace(/[&<>"']/g, e => f[e]), unescapeHTML(e) { return this._unescapeTextarea = this._unescapeTextarea || document.createElement("textarea"), this._unescapeTextarea.innerHTML = e, 0 === this._unescapeTextarea.childNodes.length ? "" : this._unescapeTextarea.childNodes[0].nodeValue }, generateId: (e = "") => e + ++u, hasProperty(e, t) { return this.isObject(e) && Object.prototype.hasOwnProperty.call(e, t) }, parseString: (e, ...t) => e ? e.replace(/{([0-9]+)}/g, (function (e, i) { return t[i] })) : "", activateClass(e, t, i) { this.hasClass(e, t) !== Boolean(i) && this.toggleClass(e, t) }, toggleClass: S ? function (e, t) { return e.classList && e.classList.toggle(t) } : function (e, t) { const i = this.hasClass(e, t); let n = e.getAttributeNS(null, "class") || ""; return i ? n = (" " + n + " ").replace(/\s+/g, " ").replace(" " + t + " ", " ") : n += " " + t, e.setAttributeNS(null, "class", this.trim(n)), !i }, createEvent(e, t, i) { let n; try { n = new Event(e, { bubbles: t, cancelable: i }) } catch (s) { n = document.createEvent("Event"), n.initEvent(e, t, i) } return n }, preventEvent(e) { e.cancelable && e.preventDefault() }, shuffleArray(e) { let t = e.length; for (; t;) { const i = Math.floor(Math.random() * t--), n = e[t]; e[t] = e[i], e[i] = n } return e }, downloadFile(e, t) { const i = document.createElement("a"); return i.href = e, "download" in i ? i.download = t : i.target = "_blank", i.dispatchEvent(new window.MouseEvent("click")) }, truncateText(e, t) { let i = 0; if (e.length <= t) return e; const n = e.slice(0, t); let s = _[i++]; for (; s;) { if (s.test(n)) return n.split(s).slice(0, -1).join(""); s = _[i++] } return e }, startsWith: String.prototype.startsWith ? function (e, t, i = 0) { return e.startsWith(t, i) } : function (e, t, i) { return e.indexOf(t, i) === i }, endsWith: String.prototype.endsWith ? function (e, t, i) { return e.endsWith(t, i) } : function (e, t, i) { let n = i; return (void 0 === n || n > e.length) && (n = e.length), e.substring(n - t.length, n) === t }, escapeRegExp: e => String(e).replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1"), dataURLToBlob(e) { const t = e.slice(5).split(","); t[0] = t[0].split(";"); const i = t[0][0] || "text/plain", n = "base64" === t[0][1] ? window.atob(t[1]) : t[1], s = n.length, o = new Uint8Array(s); for (let e = 0; e < s; e++)o[e] = n.charCodeAt(e); return new Blob([o.buffer], { type: i }) }, selectElement(e) { const t = document.createRange(), i = window.getSelection(); return i.rangeCount && i.removeAllRanges(), t.selectNodeContents(e), i.addRange(t), i }, isAlphaOrDigit(e) { return this.isAlpha(e) || this.isDigit(e) }, isString: e => "string" == typeof e, isNumber: e => "number" == typeof e && window.isFinite(e), isBoolean: e => "boolean" == typeof e, isObject: e => "object" == typeof e && null !== e, isArray: Array.isArray, isNonEmptyArray(e) { return this.isArray(e) && e.length > 0 }, isFunction: e => "function" == typeof e, isNullOrUndefined: e => null == e, toQueryString(e, t) { const i = this; return e ? Object.keys(e).reduce((function (t, n) { let s = e[n]; i.isArray(s) || (s = [s]); const o = i.encodeURIComponent(n); return t.concat(s.map((function (e) { return i.isNullOrUndefined(e) ? o : o + "=" + i.encodeURIComponent(e) }))) }), []).join(t || "&") : "" }, encodeURIComponent(e) { try { return window.encodeURIComponent(e) } catch (t) { return (0, a.logError)(t, { message: "value=" + e, ignoreErrorMessage: !1 }), "" } }, wrapCanvasText({ context: e, text: t, x: i, y: n, maxWidth: s, lineHeight: o }) { const r = t.split("\n"), a = i; let d = n; for (let t = 0; t < r.length; t++) { const i = r[t].indexOf(" ") < 0 ? "" : " ", n = r[t].split(i); let c = n[0]; for (let t = 1; t < n.length; t++) { const r = c + i + n[t]; e.measureText(r).width > s ? (e.fillText(c, a, d), c = n[t], d += o) : c = r } e.fillText(c, a, d), d += o } }, copySupported: "clipboardData" in window || function (e) { const t = e.match(/(opr|edge)\/(\d+)/) || e.match(/(chrome|firefox)\/(\d+)/) || e.match(/(version)\/(\d+).+?safari/); if (t) switch (t[2] = Number(t[2]), t[1]) { case "opr": return t[2] >= 29; case "edge": return t[2] >= 12; case "chrome": return t[2] >= 43; case "firefox": return t[2] >= 41; case "version": return t[2] >= 10 }return !1 }(p), fromQueryString(e) { const t = {}; if (!e) return t; const i = e.split("&"); for (let e = 0; e < i.length; e++) { const n = i[e].replace(/\+/g, " ").split("="); try { t[window.decodeURIComponent(n[0])] = window.decodeURIComponent(n[1]) } catch (e) { } } return t }, prepareCSVValue: e => '"' + e.replace(/"/g, '""') + '"', normalizeUrl: e => (C.href = e || "", C.href), isCrossOriginUrl(e) { return this.normalizeUrl(e).indexOf(window.location.protocol + "//" + window.location.host) < 0 }, isSecureUrl(e) { return "https://" === this.normalizeUrl(e).substr(0, 8) }, isYandexUrl(e) { const t = this.normalizeUrl(e); return /.*(?:(?:\/\/)|(?:\.))yandex\.(?:com\.)?[a-z]{2,3}(?::\d+)?(?:\/.*)?$/.test(t) }, setCookie(e, t, i) { const n = new Date((new Date).getTime() + 24 * (i || 100) * 3600 * 1e3); document.cookie = encodeURIComponent(e) + "=" + encodeURIComponent(t) + "; expires=" + n.toUTCString() }, getCookie(e, t = !1) { let i = T.val; const n = (new Date).getTime(); (t || !T.val || n - T.tm > 100) && (T.tm = n, i = T.val = document.cookie.split("; ")); const s = encodeURIComponent(e); for (let e = 0; e < i.length; ++e) { const t = i[e], n = t.indexOf("="); if (t.substr(0, n) === s) return decodeURIComponent(t.substr(n + 1)) } return null }, getUserIdData() { const e = {}; for (const t in L) { if (!L.hasOwnProperty(t)) continue; const i = this.getCookie(t); if (i) { e[L[t]] = i } } return e }, isSelectedElement(e) { const t = window.getSelection(); if (t.isCollapsed) return !1; const i = document.createRange(); i.selectNodeContents(e); try { for (let e = 0; e < t.rangeCount; e++) { const n = t.getRangeAt(e); if (n.compareBoundaryPoints(n.END_TO_START, i) < 0 && n.compareBoundaryPoints(n.START_TO_END, i) > 0) return !0 } } catch { return !1 } return !1 }, getImageOrientation(e) { let t, i, n, s, o, r, a; const d = new Uint8Array(e); let c = 1; if (255 !== d[0] || 216 !== d[1]) return c; n = 2; const l = d.length; for (; n < l && (255 !== d[n] || 218 !== d[n + 1]);) { if (o = n + 256 * d[n + 2] + d[n + 3] + 2, 255 === d[n] && 225 === d[n + 1]) { for (s = d.subarray(n, o), r = 77 === s[10], a = r ? 256 * s[18] + s[19] : s[18] + 256 * s[19], t = 0; t < a; t++)if (i = s.subarray(20 + 12 * t, 32 + 12 * t), r && 18 === i[1] || !r && 18 === i[0]) { c = r ? i[9] : i[8]; break } break } n = o } return c }, extractPastedText(e) { const t = e.dataTransfer || e.clipboardData; return t ? t.getData("text/plain") : window.clipboardData ? window.clipboardData.getData("Text") : "" }, normalizeRangeBoundsForElement(e, t) { t.contains(e.startContainer) || t.contains(e.startContainer.parentNode) || e.setStart(t, 0), t.contains(e.endContainer) || t.contains(e.startContainer.parentNode) || e.setEnd(t, t.childNodes.length) }, getClosest(e, t) { let i = e; for (; i && i.nodeType === Node.ELEMENT_NODE;) { if (t(i)) return i; i = i.parentElement } return null }, safeParseJSON(e) { try { return JSON.parse(e) || {} } catch (e) { return {} } }, safeStringifyJSON(e) { try { return JSON.stringify(e) || "" } catch (e) { return "" } }, getEventPath(e) { const t = e.path || e.composedPath && e.composedPath(), i = []; let n = e.target; if (this.isNonEmptyArray(t)) return t.slice().reverse(); for (; n && n.parentElement && "HTML" !== n.tagName; n = n.parentElement)i.push(n); return i.push(n), i.push(document), i.push(window), i.reverse() }, getSelectedText() { if (this.firefoxVersion) { const e = document.activeElement; if (e && e.value) { return e.value.substring(e.selectionStart, e.selectionEnd) } return "" } const e = window.getSelection && window.getSelection(); return e && e.toString && e.toString() || "" }, getSelectedElement() { if (window.getSelection) return ((window.getSelection() || {}).anchorNode || {}).parentNode || null }, isEqualDeep(e, t) { const i = Object.keys(e), n = Object.keys(t), s = Object.prototype.hasOwnProperty; if (i.length !== n.length) return !1; for (let n, o = 0, r = i.length; o < r; o++)if (n = Object.keys(e)[o], s.call(e, n) && !this.isEqual(e[n], t[n])) return !1; return !0 }, convertBase64ToArrayBuffer(e) { const t = window.atob(e), i = t.length, n = new Uint8Array(i); for (let e = 0; e < i; e++)n[e] = t.charCodeAt(e); return n.buffer }, getMutableBoundingClientRect(e) { const { top: t, right: i, bottom: n, left: s, width: o, height: r, x: a, y: d } = e.getBoundingClientRect(); return { top: t, right: i, bottom: n, left: s, width: o, height: r, x: a, y: d } }, getFilesFromEvent: e => (e.dataTransfer ? e.dataTransfer.files : e.target.files) || [], getFileName(e) { const t = this.getFilesFromEvent(e)[0]; return t ? t.name : "" }, getDataAttr: (e, t) => e && e.nodeType === Node.ELEMENT_NODE ? e.getAttribute("data-" + t) : null, getAttribute: (e, t, i = "") => e && e.getAttribute ? e.getAttribute(t) || i : i || null, asyncFilter(e, t, i = (() => { })) { const n = [...e], s = [], o = () => { if (!n.length) return i(s); const e = n.shift(); t(e, t => { t && s.push(e), o() }) }; o() }, isElement: e => e instanceof Element || e instanceof HTMLDocument, elementToString(e, t = 50, i = null) { if (!e || !A.isElement(e)) return null; let n = "<" + e.tagName.toLowerCase(); if (e.attributes) for (let s = 0; s < e.attributes.length; s++) { const o = e.attributes[s]; i && !i.includes(o.name) || (n += ` ${o.name}='${String(o.value).slice(0, t)}'`) } return n + ">" }, round: (e, t = 10) => A.isNumber(e) ? Math.round(e / t) * t : null, base64ToDataUrl: (e, t) => `data:${t};base64,${e}`, isOnline: () => void 0 === navigator.onLine || navigator.onLine, guid: (e = "xxxx-xxxx-xxxx-xxxx") => e.replace(/[xy]/g, e => { const t = 16 * Math.random() | 0; return ("x" === e ? t : 3 & t | 8).toString(16) }), now: () => Date.now ? Date.now() : (new Date).getTime(), duration(e) { return this.now() - e }, bindInit: e => function () { const t = A.now(); try { return e.bind(this, ...arguments)(), this } catch (e) { return (0, a.logError)(e), this } finally { r.DEBUG && r.logTime.module(e.name, A.now() - t) } }, queueTask(e, t = null, i = !1) { if (window.config.SRV !== c.TOUCH || !window.config.ENABLE_ASYNC_QUEUE) return e.call(t); (0, d.pushTask)({ fn: e, ctx: t || this, isHighPriority: i }) }, callAsync(e, t) { (0, d.pushTask)({ fn: e, ctx: t || this }) }, calcMedian(e) { if (!e.length) return null; e.sort((e, t) => e - t); const t = Math.floor(e.length / 2); return e.length % 2 ? e[t] : (e[t - 1] + e[t]) / 2 }, imageDataColorToString: ({ r: e, g: t, b: i, a: n }) => `rgba(${e}, ${t}, ${i}, ${255 / n})`, smoothScrollTo(e, t, i = 0) { e.scrollTo ? e.scrollTo({ top: t, left: i, behavior: "smooth" }) : "scrollTop" in e && (e.scrollTop = t, e.scrollLeft = i) }, preferDarkMode: () => window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches, preferLightMode: () => window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches, hasCssVarsSupport: () => window.CSS && CSS.supports("color", "var(--fake-var)"), onThemePreferenceChange(e) { const t = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)"); t && (t.onchange = e) }, normalizeExternalLang(e, t) { const i = t.langMismatches || {}; return this.hasProperty(i, e) ? i[e] : e }, get(e, t, i) { const n = t.split("."); if (!n.length) return i; let s = e; for (const e of n) { if ("object" != typeof s || null === s) return i; s = s[e] } return void 0 === s ? i : s }, removeAllSelections() { try { window.getSelection().removeAllRanges() } catch (e) { } }, performanceApiSupported: () => Boolean(window.performance && window.performance.timing), isIntersectionObserverSupported: () => "IntersectionObserver" in window, getTapPoint(e) { const t = e.changedTouches; return { x: t ? t[0].pageX : e.pageX, y: t ? t[0].pageY : e.pageY } }, getRandomBoolean: () => Math.random() >= .5, memoize(e) { const t = {}; return function (...i) { const n = JSON.stringify(i); return n in t ? t[n] : t[n] = e.apply(this, i) } }, isElvishLanguage: (e = "") => "sjn" === e, prepareLoggingEnvironment() { const e = window.config; e && function (t, i, n, s, o) { const r = A.get(o, n.apply(s, [108, 111, 99, 97, 116, 105, 111, 110, 46, 104, 111, 115, 116])), a = n.apply(s, [121, 97, 110, 100, 101, 120, 46]), d = r.indexOf(a) >= 0, c = n(46), l = n.apply(s, [83, 73, 68]); e[l] = e[l].split(c).map((function (e) { return d ? e.split("").reverse().join("") : e.split("").reverse().reverse().join("") })).join(c) }(0, 0, String.fromCharCode, {}, window) }, isValidDictionaryLangs(e, t, i) { const n = (e, t) => this.hasProperty(i, `${e}-${t}`); return e && t && e !== t && (n(e, t) || n(e, e)) } }; var y; function b(e, t, i) { const n = Boolean(t); return e in { scroll: !0 } && i && v ? { passive: i, capture: n } : n } window.util = A; var R = A; t.default = R }, function (e, t, i) { for (var n = i(75), s = i(54), o = i(41), r = i(12), a = i(14), d = i(39), c = i(20), l = c("iterator"), u = c("toStringTag"), h = d.Array, g = { CSSRuleList: !0, CSSStyleDeclaration: !1, CSSValueList: !1, ClientRectList: !1, DOMRectList: !1, DOMStringList: !1, DOMTokenList: !0, DataTransferItemList: !1, FileList: !1, HTMLAllCollection: !1, HTMLCollection: !1, HTMLFormElement: !1, HTMLSelectElement: !1, MediaList: !0, MimeTypeArray: !1, NamedNodeMap: !1, NodeList: !0, PaintRequestList: !1, Plugin: !1, PluginArray: !1, SVGLengthList: !1, SVGNumberList: !1, SVGPathSegList: !1, SVGPointList: !1, SVGStringList: !1, SVGTransformList: !1, SourceBufferList: !1, StyleSheetList: !0, TextTrackCueList: !1, TextTrackList: !1, TouchList: !1 }, p = s(g), m = 0; m < p.length; m++) { var _, f = p[m], E = g[f], T = r[f], S = T && T.prototype; if (S && (S[l] || a(S, l, h), S[u] || a(S, u, f), d[f] = h, E)) for (_ in n) S[_] || o(S, _, n[_], !0) } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.TouchView = t.TOUCH_VIEW_EVENTS = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(11), r = i(16); const a = { TAP: "tap", TOUCH_START: "touchstart", SELECT: "select" }; t.TOUCH_VIEW_EVENTS = a; class d extends r.View { static getPoint(e) { return { x: e.pageX, y: e.pageY } } static getPoints(e) { return e.touches && !s.default.isEmpty(e.touches) ? Array.prototype.map.call(e.touches, this.getPoint) : [this.getPoint(e)] } static getMidpoint(e, t) { return { x: (e.x + t.x) / 2, y: (e.y + t.y) / 2 } } static getDistance(e, t) { const i = Math.abs(t.x - e.x), n = Math.abs(t.y - e.y); return Math.sqrt(i * i + n * n) } constructor(e = {}) { let t, i; if (super(e), this.resetCount(), this._tapThreshold = Number(e.tapThreshold) || 10, this._ignoreSelection = Boolean(e.ignoreSelection), e.stopDefaultAction && this.on(d.eventTypes.START, s.default.preventEvent).on(d.eventTypes.END, s.default.preventEvent), e.hideAfterTransition && this.on("stateSet:hidden", (function (e) { e || (this.setState("hidden2", !1), this.getElement().offsetWidth) })).on(d.eventTypes.TRANSITION_END, (function (e) { "visibility" === e.propertyName && e.target === e.currentTarget && (this.isVisible() ? this.setState("transitionEnded", !0) : (this.setState("transitionEnded", !1), this.setState("hidden2", !0))) })).bindDOMEvents(d.eventTypes.TRANSITION_END), this.hasState("animatable") && !e.skipWillChange && this.onVisibilityChanged((function () { this.setState("animation_in_progress", !0) })).on(d.eventTypes.TRANSITION_END, (function (e) { "transform" === e.propertyName && e.target === e.currentTarget && this.setState("animation_in_progress", !1) })).bindDOMEvents(d.eventTypes.TRANSITION_END), this.on(d.eventTypes.START, (function (e) { const t = e.touches; "button" in e && 0 !== e.button || (this._pointCount = Math.min(t ? t.length : this._pointCount + 1, d.maxPointCount[t ? "touch" : e.pointType || "mouse"]), this._tapPoint = 1 !== this._pointCount ? null : d.getPoints(e)[0]) })).on(d.eventTypes.END, (function (e) { const t = e.touches, i = this._tapPoint, n = e.changedTouches; if ("button" in e && 0 !== e.button) return; if (this._pointCount = t ? t.length : Math.max(0, this._pointCount - 1), !i) return; const o = n ? n[0].pageX : e.pageX, r = n ? n[0].pageY : e.pageY; this.isEnabled() && Math.abs(o - i.x) <= this._tapThreshold && Math.abs(r - i.y) <= this._tapThreshold && (this._ignoreSelection || !s.default.isSelectedElement(this.getElement())) && this.emit(a.TAP, e), this._tapPoint = null })).on(d.eventTypes.CANCEL, this.resetCount).bindDOMEvents([d.eventTypes.END, d.eventTypes.START, d.eventTypes.CANCEL]), e.activateFocus) { let t = !1; this.on(d.eventTypes.START, (function (i) { t = !e.ignorePreventFocus && s.default.getClosest(i.target, e => e.hasAttribute("data-prevent-focus")) })).on("focus", (function (e) { t ? e.preventDefault() : this.setFocus(!0).setState("focused", !0) })).on("blur", (function () { const e = this, t = this.getElement(); setTimeout((function () { (document.hasFocus && !document.hasFocus() || !t.contains(document.activeElement)) && e.setState("focused", !1) }), 0), this.setFocus(!1) })).bindDOMEvents("focus blur", !0) } e.delegateActiveState && (i = function () { t && (t.setAttribute("data-pressed", !1), t = null) }, this.on(d.eventTypes.START, (function (e) { let n = e.target; i(), n = this.getClosest(n, (function (e) { return e.hasAttribute("data-active-target") })), n && (t = n, t.setAttribute("data-pressed", !0)) })).on(d.eventTypes.END, i).on(d.eventTypes.CANCEL, i)) } setFocus(e) { return (0, o.getGlobalEmitter)().emit("viewFocusChanged", this, e), this.getContentElement()[e ? "focus" : "blur"](), this } setTooltipText(e) { return this.getElement().setAttribute("data-tooltip", e), this } setTooltipPosition(e) { return this.getElement().setAttribute("data-tooltip-position", e), this } scrollTo(e, t) { const i = this.getContentElement(), n = "rtl" === s.default.getStyle(i, "direction") ? i.scrollWidth : 0; return this.userScroll = !1, i.scrollTop = s.default.isNumber(e) ? e : 0, i.scrollLeft = s.default.isNumber(t) ? t : n, this } resetCount() { return this._tapPoint = null, this._pointCount = 0, this } getClosest(e, t, i) { const n = i ? this.getContentElement() : this.getElement(); return n.contains(e) && e !== n ? s.default.getClosest(e, t) : null } setLanguage(e) { return this.setState("right", s.default.isRTLLang(e)), this.getElement().setAttribute("lang", e), this } getScrollInfo() { const e = this.getContentElement(); return { top: e.scrollTop, left: e.scrollLeft, maxTop: e.scrollHeight - e.clientHeight, maxLeft: e.scrollWidth - e.clientWidth, clientHeight: e.clientHeight, clientWidth: e.clientWidth } } onTap(e) { return this.on(a.TAP, e) } onTouchStart(e) { return this.on(a.TOUCH_START, e) } } t.TouchView = d, d.eventTypes = { END: "mouseup", OUT: "mouseout", OVER: "mouseover", MOVE: "mousemove", START: "mousedown", WHEEL: "wheel", CANCEL: "mouseleave", TRANSITION_END: "WebkitTransition" in document.documentElement.style ? "webkitTransitionEnd" : "transitionend" }, d.maxPointCount = { pen: 1, mouse: 1, touch: 10 }, "ontouchstart" in window && (s.default.mob || s.default.iOS || s.default.android) ? d.eventTypes = { END: "touchend", MOVE: "touchmove", START: "touchstart", CANCEL: "touchcancel" } : !window.PointerEvent || "pointerEnabled" in navigator && !navigator.pointerEnabled || (d.eventTypes = { END: "pointerup", OUT: "pointerout", OVER: "pointerover", MOVE: "pointermove", START: "pointerdown", CANCEL: "pointercancel" }) }, function (e, t, i) { "use strict"; t.__esModule = !0, t.$tracker = void 0, t.getTrackerByNamespace = function (e = null) { d.has(e) || d.set(e, new o.Emitter); const t = d.get(e); return { $track(e, ...i) { try { t.emit(e, ...i) } catch (e) { (0, n.logError)(e) } }, on: (e, i) => t.on(e, i) } }, i(1); var n = i(7), s = i(11), o = i(9); const r = (0, s.getGlobalEmitter)(), a = { sendMetric(e, ...t) { try { r.emit("trackerEvent", e, ...t) } catch (e) { (0, n.logError)(e) } }, onMetricSend: e => r.on("trackerEvent", e) }; t.$tracker = a; const d = new Map }, function (e, t, i) { "use strict"; t.__esModule = !0, t.Model = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(9); const r = "change", a = "set", d = "beforeSet", c = "invalid"; class l extends o.Emitter { static getCachedInstance(e, ...t) { return this._cachedInstances = this._cachedInstances || new Map, this._cachedInstances.has(e) || this._cachedInstances.set(e, new this(...t)), this._cachedInstances.get(e) } constructor(e, t = {}) { super(), this._id = t.id || s.default.generateId("mid"), this._props = {}, this._invalid = [], this._filters = {}, this._validators = {}, t.filters && this.setFilter(t.filters), t.validators && this.setValidator(t.validators), this.setProperty(s.default.extend(this.getDefaults(), e), t) } getId() { return this._id } clone(e) { return new this.constructor(this._props, e) } clear(e) { return this.setProperty(null, e) } reset(e) { return this.setProperty(this.getDefaults(), e) } onChange(e, t, i) { return this._addPrefixedHandler(r, e, t, i) } onSet(e, t, i) { return this._addPrefixedHandler(a, e, t, i) } onBeforeSet(e, t, i) { return this._addPrefixedHandler(d, e, t, i) } onInvalid(e, t, i) { return this._addPrefixedHandler(c, e, t, i) } offChange(e, t, i) { return this._removePrefixedHandler(r, e, t, i) } toJSON() { return s.default.clone(this._props) } cloneProps() { return s.default.clone(this._props) } getProps() { return this._props } isValid(e, t) { let i = {}; const n = []; switch (arguments.length) { case 0: i = this.cloneProps(); break; case 1: i[e] = this.getProperty(e); break; default: i[e] = t }return Object.keys(i).forEach((function (e) { const t = i[e], s = this._validators[e]; s && !s.call(this, t) && n.push(e) }), this), this._invalid = n, !n.length } getInvalid() { return s.default.clone(this._invalid) } getParams() { return { sid: this._fetchedSid } } getDefaults() { return this.constructor.defaults ? s.default.clone(this.constructor.defaults) : {} } hasProperty(e) { return s.default.hasProperty(this._props, e) } getProperty(e) { return this._props[e] } toggleProperty(e) { return this.setProperty(e, !this.getProperty(e)) } setProperty(e, t, i) { const n = this.cloneProps(), o = i || {}; let l, u = t; if (null === e || s.default.isObject(e)) { const t = u || {}; return e ? (Object.keys(e).forEach((function (i) { this.setProperty(i, e[i], t) }), this), this) : (Object.keys(n).forEach((function (e) { this.setProperty(e, null, t) }), this), this) } if (this.emit(d, e, u, o).emit(`${d}:${e}`, u, o), s.default.isNullOrUndefined(u)) { if (!this.hasProperty(e)) return this; u = void 0, l = delete this._props[e] } else { const t = this._filters[e]; t && (u = t.call(this, u)), s.default.isEqual(n[e], u) || (l = !0, this._props[e] = u) } return o.ignoreSetEvent || this.emit(a, e, u, o).emit(`${a}:${e}`, u, o), l && !o.silent && (o.invalid = !this.isValid(e, u), o.oldValue = n[e], o.invalid && this.emit(c, e, u, o).emit(`${c}:${e}`, u, o), this.emit(r, e, u, o).emit(`${r}:${e}`, u, o)), this } setFilter(e, t) { return s.default.isObject(e) ? (Object.keys(e).forEach((function (t) { this.setFilter(t, e[t]) }), this), this) : null === e ? (this._filters = {}, this) : null === t ? (delete this._filters[e], this) : (e && s.default.isFunction(t) && (this._filters[e] = t), this) } setValidator(e, t) { return s.default.isObject(e) ? (Object.keys(e).forEach((function (t) { this.setValidator(t, e[t]) }), this), this) : null === e ? (this._validators = {}, this) : null === t ? (delete this._validators[e], this) : (e && s.default.isFunction(t) && (this._validators[e] = t), this) } } t.Model = l, l.defaults = {} }, function (e, t, i) { "use strict"; t.__esModule = !0, t.AppModule = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(9); class r extends o.Emitter { constructor(e, t) { super(), this.app = e, this.appModel = e.getModel(), this.appSettings = e.getSettings(), this.appView = e.getView(), this.appConfig = t, this.moduleId = s.default.generateId("mid") } } t.AppModule = r }, function (e, t, i) { "use strict"; t.__esModule = !0, t.Component = void 0; var n = i(16), s = i(25), o = i(2); class r extends s.PureComponent { constructor(e, t = {}) { super(e, t), this._DOMEvents = {}, t.hideAfterTransition && this.onStateSet("hidden", e => { e ? t.skipFadeoutTransition && this.setState("hidden2", !0) : (this.setState("hidden2", !1), this.getElement().offsetWidth) }).on(o.TouchView.eventTypes.TRANSITION_END, e => { "visibility" !== e.propertyName || e.target !== e.currentTarget || this.isVisible() || this.setState("hidden2", !0) }).bindDOMEvents(o.TouchView.eventTypes.TRANSITION_END) } getRect() { return n.View.prototype.getRect.apply(this) } hasState(e) { return n.View.prototype.hasState.apply(this, arguments) } setState(e, t) { return n.View.prototype.setState.apply(this, arguments) } setStyle(e, t) { return n.View.prototype.setStyle.apply(this, arguments) } isVisible() { return n.View.prototype.isVisible.apply(this) } isEnabled() { return n.View.prototype.isEnabled.apply(this) } getElement() { return this.getContainer() } getContentElement(e, t) { return n.View.prototype.getContentElement.apply(this, arguments) } setPosition(e, t, i) { return n.View.prototype.setPosition.apply(this, arguments) } setVisible(e) { return n.View.prototype.setVisible.apply(this, arguments) } setEnabled(e) { return n.View.prototype.setEnabled.apply(this, arguments) } onShow(e, t) { return n.View.prototype.onShow.apply(this, arguments) } onHide(e, t) { return n.View.prototype.onHide.apply(this, arguments) } onVisibilityChanged(e, t) { return n.View.prototype.onVisibilityChanged.apply(this, arguments) } onEnableChanged(e, t) { return n.View.prototype.onEnableChanged.apply(this, arguments) } onStateSet(e, t, i) { return n.View.prototype.onStateSet.apply(this, arguments) } onStateChanged(e, t, i) { return n.View.prototype.onStateChanged.apply(this, arguments) } handleEvent(e) { return n.View.prototype.handleEvent.apply(this, arguments) } bindDOMEvents(e, t) { return n.View.prototype.bindDOMEvents.apply(this, arguments) } } t.Component = r }, function (e, t, i) { "use strict"; t.__esModule = !0, t.LATEST_TAP_POSITION_WINDOW_KEY = t.LATEST_TAP_EVENT_WINDOW_KEY = void 0, t.getLatestTapEvent = r, t.getLatestTapPosition = a, t.isPrevTapMiss = function () { const e = r(), t = a(); return e && t && e.prevTarget && e.target !== e.prevTarget && e.delayBetweenTaps < 700 && t.distanceBetweenTaps < 60 }, t.logError = function (e, t = {}) { const i = window.Ya && window.Ya.Rum; o.DEBUG && console.error(e); if (i && i.logError) try { let n = e; return e instanceof Error && (n = e.message), i.logError(t, n) } catch (e) { } e && setTimeout(() => { throw e }, 0) }, t.setLatestTapEvent = function (e, t, i) { const n = Date.now(), o = r(), d = a(), c = o && o.ts ? n - o.ts : null, l = { pageX: e.pageX, pageY: e.pageY, distanceBetweenTaps: null }, u = { eventType: e.type, pageX: null, pageY: null, ts: n, delay: null, target: s.default.elementToString(t, 15, ["id", "class", "data-action"]), action: s.default.getDataAttr(i, "action"), prevTarget: o && o.target, prevAction: o && o.action, delayBetweenTaps: s.default.round(c, c > 100 ? 100 : 10) }; !l.pageX && !l.pageY && e.changedTouches && e.changedTouches.length && (l.pageX = e.changedTouches[0].pageX, l.pageY = e.changedTouches[0].pageY); u.pageX = s.default.round(l.pageX), u.pageY = s.default.round(l.pageY), d && (l.distanceBetweenTaps = (h = l, g = d, Math.abs(h.pageX - g.pageX) + Math.abs(h.pageY - g.pageY))); var h, g; window._rumLatestTapEvent = u, window._rumLatestTapPosition = l }; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(15); t.LATEST_TAP_EVENT_WINDOW_KEY = "_rumLatestTapEvent"; t.LATEST_TAP_POSITION_WINDOW_KEY = "_rumLatestTapPosition"; function r() { return window._rumLatestTapEvent } function a() { return window._rumLatestTapPosition } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.LANG_PROPS = t.LANG_METRIKAS = t.LANG_EVENTS = t.COMPONENT_EVENTS = void 0; t.LANG_EVENTS = { EVENT_OPEN_SRC_LANGUAGES: "openSrcLanguages", EVENT_OPEN_DST_LANGUAGES: "openDstLanguages", EVENT_BACK_PRESSED: "langsBackPressed", EVENT_INPUT: "langsInput", EVENT_SWAP: "swapLang", EVENT_CANCEL_SEARCH: "cancelSearch", EVENT_SEARCH_TAP: "langsSearchTap", EVENT_SELECT_LANG: "selectLang", EVENT_SELECT_LANG_FROM_SEARCH: "langsSearchSelectLang" }; t.LANG_METRIKAS = { OPEN_SRC_SELECT: "langselect_open_src", OPEN_DST_SELECT: "langselect_open_dst", SELECT_SRC_LANG: "langselect_select_src", SELECT_DST_LANG: "langselect_select_dst", PIN_LANG: "langselect_pin", UNPIN_LANG: "langselect_unpin", SEARCH_TEXT_TYPE: "langselect_search_type", SEARCH_BUTTON_TAP: "langselect_search_button_click", TOGGLE_AUTODETECT: "settings_auto_click" }; t.LANG_PROPS = { ALL_LANGUAGES: "languages", CURRENT_LANG: "currentLanguage", AUTODETECT: "autodetect", RECENT_LANGUAGES: "recent_languages", SRC_LANG: "srcLang", DST_LANG: "dstLang", SENDER_LANG_SELECT: "langSelect", SENDER_LANG_HISTORY: "langHistory" }; t.COMPONENT_EVENTS = { EVENT_INPUT: "event_input", EVENT_LANG_CHOOSE: "event_lang_choose" } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.Emitter = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }; const o = "action"; t.Emitter = class { constructor() { this._handlers = {} } on(e, t, i) { const n = this._handlers; return s.default.isFunction(e) ? this.on("*", e) : s.default.isArray(e) ? (e.forEach(e => { const n = t.bind(i || this, e); n.sourceHandler = t, this.on(e, n, i) }), this) : s.default.isObject(e) ? (Object.keys(e).forEach(i => { this.on(i, e[i], t) }), this) : e && s.default.isFunction(t) ? ((n[e] = n[e] || []).push({ handler: t, context: i }), this) : this } off(e, t, i) { const n = arguments.length, o = this._handlers[e]; if (!n) return this._handlers = {}, this; if (s.default.isFunction(e)) return this.off("*", e); if (s.default.isArray(e)) return e.forEach(e => { this.off(e, t, i) }), this; if (s.default.isObject(e)) return Object.keys(e).forEach(i => { this.off(i, e[i], t) }), this; if (!o) return this; if (1 === n) return delete this._handlers[e], this; for (let e = 0; e < o.length; e++) { const n = o[e]; if (n.context === i && (n.handler === t || n.handler.sourceHandler === t)) { o.splice(e, 1); break } } return this } once(e, t, i) { const n = this; if (s.default.isFunction(e)) return this.once("*", e); if (s.default.isObject(e)) return Object.keys(e).forEach((function (i) { this.once(i, e[i], t) }), this), this; if (!e || !s.default.isFunction(t)) return this; const o = function () { n.off(e, o, i), t.apply(this, arguments) }; return o.sourceHandler = t, this.on(e, o, i) } emit(e) { const t = s.default.slice(arguments, 1); let i = this._handlers[e], n = this._handlers["*"]; if (s.default.isObject(e)) return Object.keys(e).forEach((function (t) { this.emit(t, e[t]) }), this), this; if ("*" !== e && i) { i = s.default.slice(i); for (let e = 0; e < i.length; e++) { const n = i[e]; n.handler.apply(n.context || this, t) } } if (n) { n = s.default.slice(n); for (let e = 0; e < n.length; e++) { const t = n[e]; t.handler.apply(t.context || this, arguments) } } return this } prefixedEmit(e, t, ...i) { return this.emit(e, t, ...i), this.emit(`${e}:${t}`, ...i) } onAction(e, t, i) { return this._addPrefixedHandler(o, e, t, i) } debounceMethod(e, t = 0) { return s.default.debounce(e.bind(this), t) } _addPrefixedHandler(e, t, i, n) { return s.default.isArray(t) ? (t.forEach(t => { const s = i.bind(n || this, t); s.sourceHandler = i, this.on(`${e}:${t}`, s, n) }), this) : s.default.isObject(t) ? (Object.keys(t).forEach(n => { this.on(`${e}:${n}`, t[n], i) }), this) : s.default.isFunction(t) ? this.on(e, t, i) : this.on(`${e}:${t}`, i, n) } _removePrefixedHandler(e, t, i, n) { return s.default.isFunction(t) ? this.off(e, t, i) : this.off(`${e}:${t}`, i, n) } } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.KEYBOARD_KEYS = t.InputView = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(2); const r = { A: 65, D: 68, E: 69, UP: 38, DOWN: 40, LEFT: 37, RIGHT: 39, ENTER: 13, ESCAPE: 27, SPACE: 32, TAB: 9, BACKSPACE: 8 }; t.KEYBOARD_KEYS = r; const a = function () { const e = document.createElement("div"); try { return e.contentEditable = "plaintext-only", !0 } catch (e) { } return !1 }(); class d extends o.TouchView { static makeFakeArea(e) { if (e) return s.default.bind(e, "drop", (function (e) { this.disabled || (this.focus(), s.default.preventEvent(e)) })), s.default.bind(e, "paste", (function (e) { this.disabled || (s.default.preventEvent(e), this._insertSelectionText(s.default.extractPastedText(e))) })), s.default.bind(e, "blur", (function () { this.disabled || (this.selectionRange = this.getSelectionRange()) })), s.default.bind(e, "focus", (function () { this.disabled || this.selectionRange && this.selectionRange.start !== this.selectionRange.end && this.setSelectionRange(this.selectionRange.start, this.selectionRange.end) })), s.default.bind(e, "mouseup", (function () { this.disabled || this._triggerSelectEvent() })), s.default.bind(e, "keydown", (function (e) { this.disabled || (e.keyCode !== r.ENTER || e.shiftKey ? e.keyCode === r.A && s.default.hasCtrlKey(e) ? (s.default.preventEvent(e), this.setSelectionRange(0, this.value.length), this._triggerSelectEvent()) : d.hasKeyCombination(e, r.E, { shiftKey: !0, ctrlKey: !0 }) && (s.default.preventEvent(e), this.setSelectionRange(this.getSelectionRange().start, this.value.length), this._triggerSelectEvent()) : this.dispatchEvent(s.default.createEvent("enterPressed", !0, !0))) })), s.default.bind(e, "keyup", (function (e) { this.disabled || (d.hasKeyCombination(e, r.LEFT, { shiftKey: !0 }) || d.hasKeyCombination(e, r.RIGHT, { shiftKey: !0 })) && this._triggerSelectEvent() })), s.default.bind(e, "mousedown", (function () { this.disabled || (this._selectionStarted = !0) })), s.default.bind(e, "mouseleave", (function () { this.disabled || this._selectionStarted && this._triggerSelectEvent() })), e._triggerSelectEvent = function () { const e = this.getSelectionRange(); e.start !== e.end && this.dispatchEvent(s.default.createEvent(o.TOUCH_VIEW_EVENTS.SELECT, !0, !0)), this._selectionStarted = !1 }, e._insertSelectionText = function (e) { const t = window.getSelection(); if (0 === t.rangeCount) return; const i = t.getRangeAt(0); s.default.normalizeRangeBoundsForElement(i, this), i.deleteContents(), i.insertNode(document.createTextNode(e)), i.collapse(!1), this.dispatchEvent(s.default.createEvent("input", !0, !0)) }, s.default.IE && s.default.bind(e, "DOMSubtreeModified", (function () { this.disabled || this.dispatchEvent(s.default.createEvent("input", !0, !0)) })), s.default.bind(e, "keypress", (function () { this.disabled || this.dispatchEvent(s.default.createEvent("input", !0, !0)) })), e.getRangeData = function (e) { let t = e, i = this, n = 0; const s = document.createTreeWalker(this, NodeFilter.SHOW_TEXT, null, !1); for (; s.nextNode() && (i = s.currentNode, n = i.length, t > n);)t -= n; return { node: i, offset: t } }, e.getInnerText = function () { let e, t = ""; const i = document.createTreeWalker(this, NodeFilter.SHOW_TEXT, null, !1); for (; i.nextNode();)e = i.currentNode, t += e.data; return t }, e.getSelectionRange = function () { let e, t; const i = { end: 0, start: 0 }, n = window.getSelection(); return n.rangeCount > 0 && (t = n.getRangeAt(0), e = t.cloneRange(), e.selectNodeContents(this), e.setEnd(t.endContainer, t.endOffset), i.end = e.toString().length, e.setEnd(t.startContainer, t.startOffset), i.start = e.toString().length), i }, e.setSelectionRange = function (e, t) { let i = e, n = t; const o = document.createRange(), r = window.getSelection(), a = this.value.length; n < 0 && (n = 0), i < 0 && (i = 0), n > a && (n = a), i > a && (i = a), i > n && (i = n); let d = this.getRangeData(n); return o.setEnd(d.node, d.offset), d = this.getRangeData(i), o.setStart(d.node, d.offset), s.default.removeAllSelections(), r.addRange(o), this }, Object.defineProperty(e, "value", { get() { return this.getInnerText() }, set(e) { const t = e.length; this.textContent = "", this.appendChild(document.createTextNode(e)), this.setSelectionRange(t, t) } }), Object.defineProperty(e, "disabled", { get() { return !this.isContentEditable }, set(e) { if (e) this.contentEditable = !1; else { const e = !a || "plaintext-only"; this.contentEditable = e } } }), Object.defineProperty(e, "selectionEnd", { get() { return this.getSelectionRange().end }, set(e) { this.setSelectionRange(e, e) } }), Object.defineProperty(e, "selectionStart", { get() { return this.getSelectionRange().start }, set(e) { this.setSelectionRange(e, e) } }), e } static hasKeyCombination(e, t, i) { let n, s = !0; const o = !t || e.keyCode === t; for (n in i) if (e[n] !== i[n]) { s = !1; break } return e && o && s } constructor(e) { super(e); const t = this, i = this.getContentElement(); let n; i.disabled = this.hasState("disabled"), this.on("stateChanged:disabled", (function (e) { i.disabled = e })), this.bindDOMEvents("input keydown"), this.on("keydown", this._bindSelectionCases), 9 === document.documentMode && (n = function () { t.emit("input", { target: i }) }, this.on("stateChanged:focused", (function (e) { document[(e ? "add" : "remove") + "EventListener"]("selectionchange", n, !1) }))) } getName() { return this.getContentElement().name } getValue() { return this.getContentElement().value } setValue(e, t = {}) { const i = this.getContentElement(), n = this.getValue(); if (e === n) return this; let o = t.end; const r = t.start; return s.default.isNumber(r) ? (o = s.default.isNumber(o) ? o : n.length, i.value = n.slice(0, r) + e + n.slice(o)) : i.value = e, this.emit("input", { target: i, detail: t }) } getSelection() { const e = this.getContentElement(); return { end: e.selectionEnd, start: e.selectionStart } } setSelection(e = {}) { const t = this.getContentElement(); return setTimeout((function () { t.focus(), t.setSelectionRange(e.start, e.end || e.start) }), 0), this } setPlaceholder(e) { return this.getContentElement().placeholder = e, this } onSelect(e) { return this.on(o.TOUCH_VIEW_EVENTS.SELECT, e) } getScrollTop() { return this.getContentElement().scrollTop } _bindSelectionCases(e) { (d.hasKeyCombination(e, r.UP, { shiftKey: !0 }) || d.hasKeyCombination(e, r.DOWN, { shiftKey: !0 })) && this.emit(o.TOUCH_VIEW_EVENTS.SELECT, e) } } t.InputView = d, d.keys = r, d.fakeAreaSupported = a }, function (e, t, i) { "use strict"; t.__esModule = !0, t.getGlobalEmitter = function () { null === s && (s = new n.Emitter); return s }; var n = i(9); let s = null }, function (e, t) { var i = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = i) }, function (e, t, i) { "use strict"; t.__esModule = !0, t.URL = t.TOUCH = t.TEXT = t.IMAGE = t.DOC = void 0; t.TEXT = "tr-text"; t.TOUCH = "tr-touch"; t.DOC = "tr-doc"; t.IMAGE = "tr-image"; t.URL = "tr-url" }, function (e, t, i) { var n = i(36), s = i(52); e.exports = i(26) ? function (e, t, i) { return n.f(e, t, s(1, i)) } : function (e, t, i) { return e[t] = i, e } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.DEBUG = void 0, t.initDebugHelper = m, t.logTime = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(13); const r = { debugEnabled: !1, visualLogEnabled: !1 }, a = window.config && window.config.SRV === o.TOUCH, d = function () { try { const e = localStorage.getItem("debug_config"), t = e ? JSON.parse(e) : {}; for (const e in r) t.hasOwnProperty(e) || (t[e] = r[e]); return t } catch (e) { return console.error(e), r } }(), c = window.config && window.config.DEBUG_SUPPORTED, l = c && d.debugEnabled; function u() { const { debugEnabled: e, visualLogEnabled: t } = d, i = e ? "color: #5c9b28" : "color: #a43535", n = "padding: 0 5px; font-family: monospace; background: rgba(100,100,100,.1);"; let s = `Debug is %c${e ? "enabled" : "disabled"}%c. Type %c${e ? "disableDebug()" : "enableDebug()"}%c to ${e ? "disable" : "enable"} it`; if (a) { s = `${s}. Or use %c${t ? "?log=0" : "?log=1"}%c to ${t ? "disable" : "enable"} visual log`, console.info(s, i, "", n, "", n, "") } else console.info(s, i, "", n, "") } function h() { localStorage.setItem("debug_config", JSON.stringify(d)) } function g(e, t = {}) { console.info(e, t), a && d.visualLogEnabled && function (e, t = {}) { const i = (e, t = null) => { const i = document.createElement("div"); return i.classList.add(e), "string" == typeof t ? i.appendChild(document.createTextNode(t)) : Array.isArray(t) ? t.forEach(e => e && i.appendChild(e)) : t && i.appendChild(t), i }, n = (() => { let e = document.getElementsByClassName("visual-log")[0]; return e || (e = i("visual-log"), document.body.appendChild(e)), e })(), s = i("visual-log-item", [i("visual-log-item-message", e), i("visual-log-item-params", JSON.stringify(t))]); n.firstChild ? n.insertBefore(s, n.firstChild) : n.appendChild(s), setTimeout(() => s.classList.add("visual-log-item_showed"), 0), setTimeout(() => { s.classList.add("visual-log-item_hidden"), setTimeout(() => n.removeChild(s), 400) }, 5e3) }(e, t) } function p(e) { d.debugEnabled = e, window.debugEnabled = e, h(), u() } function m() { window.debugEnabled = d.debugEnabled, window.visualLogEnabled = d.visualLogEnabled, window.disableDebug = () => p(!1), window.enableDebug = () => p(!0), window.printDebug = g, a && function () { let e = d.visualLogEnabled; const t = location.search.match(/[&?]log=(\d)/); t && (e = Boolean(parseInt(t[1]))), d.visualLogEnabled !== e && (d.visualLogEnabled = e, window.visualLogEnabled = e, h()), e && !d.debugEnabled && window.enableDebug() }(), u() } t.DEBUG = l; const _ = {}, f = {}; function E(e, t, i) { l && (_[e] || (_[e] = {}), _[e][t] = _[e][t] ? _[e][t] + i : i, clearTimeout(f[e]), f[e] = setTimeout(() => { const t = Object.entries(_[e]).sort(([, e], [, t]) => t - e); g(`Total ${e} time ${t.reduce((e, [, t]) => e + t, 0)}ms`, Object.fromEntries(t)), _[e] = {} }, 1e3)) } const T = { module(e, t) { E("modules", e, t) }, render(e, t) { E("rendering", e, t) }, metrics(e, t) { E("metrics", e, t) } }; t.logTime = T; (l || c) && (m(), setTimeout(() => (() => { const e = document.querySelector(".YndxBug"); if (!e) return; let t = !1; const i = getComputedStyle(e).bottom; document.addEventListener("touchstart", i => { e.contains(i.target) && (t = !0) }), document.addEventListener("touchend", () => { t = !1 }), document.addEventListener("touchmove", i => { if (t) { const { y: t } = s.default.getTapPoint(i), n = Math.min(t, document.body.clientHeight - 41); e.style.top = n + "px", e.style.bottom = "auto" } }), e.addEventListener("click", () => { e.style.top = "", e.style.bottom = i }) })(), 2e3)) }, function (e, t, i) { "use strict"; t.__esModule = !0, t.View = t.VIEW_STATES = t.VIEW_EVENTS = t.STATE_PREFIX = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(11), r = i(9); const a = { CONTENT_CHANGED: "contentChanged", DESTROY: "destroy", STATE_SET: "stateSet", STATE_CHANGED: "stateChanged" }; t.VIEW_EVENTS = a; const d = { HIDDEN: "hidden", DISABLED: "disabled", EXTENDED: "extended", INVALID: "invalid", FOCUSED: "focused" }; t.VIEW_STATES = d; t.STATE_PREFIX = "state-"; class c extends r.Emitter { constructor(e = {}) { super(e), this.on(a.CONTENT_CHANGED, (function (e) { (0, o.getGlobalEmitter)().emit("viewContentChanged", this, e) })), this._DOMEvents = {}, this.setElement(e.element, e) } setPosition(e, t = !1, i = !1) { let n = e.left, s = e.bottom, o = c.positions.BOTTOM; const r = this.getElement(), a = this.getRect(), d = document.documentElement.clientWidth; switch (r.getAttribute("data-align")) { case "right": n = e.right - a.width; break; case "center": n = e.left + e.width / 2 - a.width / 2; break; case "predictorRight": e.right + c.TR_PREDICTOR_GAP > d ? o = c.positions.LEFT : n = e.right; break; case "top-left": n = e.left - a.width, s = e.bottom - a.height }if (t) { const t = document.documentElement.clientHeight; a.width > d && "left" === r.getAttribute("data-align") ? n = r.getAttribute("data-offset") || 0 : n + a.width > d && a.width < d && (n -= n + a.width - d), t - e.bottom < a.height && e.top >= a.height && (o = c.positions.TOP, s = e.top - a.height) } return i && (n += document.documentElement.scrollLeft, s += document.documentElement.scrollTop), r.style.top = s + "px", r.style.left = n + "px", r.setAttribute(c.POSITION_ATTR, o), this } getId() { return this._id } destroy() { const e = this._element; return e.parentNode && e.parentNode.removeChild(e), this.setElement(null), this.emit(a.DESTROY).off() } getRect() { return this._element.getBoundingClientRect() } hasState(e) { return s.default.hasClass(this._element, "state-" + e) } setState(e, t) { if (s.default.isObject(e)) return Object.keys(e).forEach((function (t) { this.setState(t, e[t]) }), this), this; if (!e) return this; const i = this.hasState(e), n = arguments.length < 2 ? !i : Boolean(t); return n === i || (this.emit(a.STATE_SET, e, n).emit(`${a.STATE_SET}:${e}`, n), s.default.toggleClass(this._element, "state-" + e), this.emit(a.STATE_CHANGED, e, n).emit(`${a.STATE_CHANGED}:${e}`, n)), this } setStyle(e, t) { if (s.default.isObject(e)) for (const t in e) this._element.style[t] = e[t]; else this._element.style[e] = t; return this } setLeftOffset(e) { return this.setStyle("left", e + "px") } getOffset() { return this.getRect().left } isVisible() { return !this.hasState(d.HIDDEN) } isEnabled() { return !this.hasState(d.DISABLED) } isValid() { return !this.hasState(d.INVALID) } isFocused() { return this.hasState(d.FOCUSED) } getElement() { return this._element } setElement(e, t = {}) { let i = s.default.clone(this._DOMEvents); const n = e || document.createElement("div"); return this.unbindDOMEvents(i), this._id = n.id || this._id || s.default.generateId("vid"), this._element = n, this._contentElement = t.contentElement || n, (t.rebind || (i = t.DOMEvents)) && this.bindDOMEvents(i), this } setHTMLContent(e, t = {}) { const i = this.getContentElement(); return i ? (t.append || (i.innerHTML = ""), i.insertAdjacentHTML("beforeend", e), this.emit(a.CONTENT_CHANGED, e, t)) : this } setTextContent(e, t = {}) { const i = this.getContentElement(); return i ? (t.append || (i.innerHTML = ""), i.appendChild(document.createTextNode(e)), this.emit(a.CONTENT_CHANGED, e, t)) : this } setContentElementAttribute(e, t) { const i = this.getContentElement(); return i && i.setAttribute(e, t), this } setVisible(e) { const t = [d.HIDDEN]; return arguments.length && t.push(!e), this.setState.apply(this, t) } setEnabled(e) { const t = [d.DISABLED]; return arguments.length && t.push(!e), this.setState.apply(this, t) } onShow(e, t) { return this.onVisibilityChanged(i => { i && e.call(t || this) }, t) } onHide(e, t) { return this.onVisibilityChanged(i => { i || e.call(t || this) }, t) } onVisibilityChanged(e, t) { return this.onStateChanged(d.HIDDEN, i => { e.call(t || this, !i) }, t) } onEnableChanged(e, t) { return this.onStateChanged(d.DISABLED, i => { e.call(t || this, !i) }, t) } onStateSet(e, t, i) { return this._addPrefixedHandler(a.STATE_SET, e, t, i) } onStateChanged(e, t, i) { return this._addPrefixedHandler(a.STATE_CHANGED, e, t, i) } onContentChanged(e) { return this.on(a.CONTENT_CHANGED, e) } handleEvent(e) { this.emit(e.type, e) } bindDOMEvents(e, t) { let i = e; const n = this._DOMEvents; if (!e) return this; if (s.default.isObject(i) && !s.default.isArray(i)) return Object.keys(i).forEach((function (e) { this.bindDOMEvents(e, i[e]) }), this), this; s.default.isString(i) && (i = s.default.getValueTokens(i)); for (let e = 0; e < i.length; e++) { const o = i[e]; o && !s.default.hasProperty(n, o) && (n[o] = Boolean(t), s.default.bind(this._element, o, this, t)) } return this } unbindDOMEvents(e) { const t = this._DOMEvents; let i = e || t; s.default.isString(i) ? i = s.default.getValueTokens(i) : s.default.isObject(i) && !s.default.isArray(i) && (i = Object.keys(i)); for (let e = 0; e < i.length; e++) { const n = i[e]; s.default.hasProperty(t, n) && (s.default.unbind(this._element, n, this, t[n]), delete t[n]) } return this } getContentElement(e, t) { let i = this._contentElement; return e && (i = t ? s.default.slice(i.querySelectorAll(e)) : i.querySelector(e)), i } } t.View = c, c.POSITION_ATTR = "data-position", c.TR_PREDICTOR_GAP = 150, c.positions = { TOP: "top", LEFT: "left", BOTTOM: "bottom" } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.HTTPRequest = void 0; var n = d(i(0)), s = i(9), o = i(66), r = i(28), a = d(i(58)); function d(e) { return e && e.__esModule ? e : { default: e } } i(101); class c extends s.Emitter { static get(e, t, i) { const s = new this(e), o = n.default.isFunction(t) ? null : t, r = n.default.isFunction(t) ? t : i; return s.setParams(o), s.send(r) } static post(e, t, i) { const s = new this(e), o = n.default.isFunction(t) ? null : t, r = n.default.isFunction(t) ? t : i; return s.setType(this.types.FORM).setData(o).setMethod(this.methods.POST), s.send(r) } static serializeData(e, t) { switch (t) { case c.types.JSON: return JSON.stringify(e); case c.types.FORM: return n.default.toQueryString(e); default: return e } } static createNativeRequest(e) { return window.XDomainRequest && n.default.isCrossOriginUrl(e) && !("withCredentials" in window.XMLHttpRequest.prototype) ? new window.XDomainRequest : new window.XMLHttpRequest } constructor(e) { super(); const t = this; if (!e) throw new Error("HTTPRequest: invalid url!"); const i = c.createNativeRequest(e); i.onreadystatechange = function () { let e; if (t.isDone()) if (clearTimeout(t._timer), t._aborted) { const e = n.default.duration(t._timestamp), i = t._timedout && e >= c.TIMEOUT; t.emit("error", new r.HTTPError(i ? r.HTTPError.TIMEOUT : r.HTTPError.ABORT)) } else { if (e = new o.HTTPResponse(this), e.requestTimestamp = t._timestamp, this.status >= c.codes.OK && this.status < 300) return t.emit("response", e); t.emit("error", e) } }, this._xhr = i, this._url = e, this._data = null, this._params = this._getUserIdData(), this._method = c.methods.GET, this._headers = {}, this._timeout = c.TIMEOUT, this._timestamp = 0, this._responseType = null } send(e) { const t = this._xhr; let i = this._url; const s = this, o = c.serializeData(this._data, this.getType()), r = n.default.toQueryString(this._params), a = this._headers; return n.default.isFunction(e) && this.on("error", (function (t) { e(t) })).on("response", (function (t) { e(null, t) })), r && (i += (i.indexOf("?") < 0 ? "?" : "&") + r), t.open(this._method, i), Object.keys(a).forEach((function (e) { t.setRequestHeader(e, a[e]) })), this._responseType && (t.responseType = this._responseType), this._timeout && (this._timer = setTimeout((function () { s._timedout = !0, s.abort() }), this._timeout)), this._timestamp = Date.now(), t.send(o), this } abort() { return this._aborted || this.isDone() ? this : (this._aborted = !0, this._xhr.abort(), this.emit("abort")) } isDone() { return 4 === this._xhr.readyState } getType() { return this.getHeader("Content-Type") } setType(e) { return this.setHeader("Content-Type", e) } setCsrfToken(e) { return this.setHeader("X-CSRF-Token", e) } setData(e) { return this._data = e, this } setMethod(e) { return this._method = e, this } setParams(e, t = !1) { return this._params = n.default.extend({}, e, t ? null : this._getUserIdData()), this } getHeader(e) { return this._headers[e] } setHeader(e, t) { return this._headers[e] = t, this } setTimeout(e) { return this._timeout = e, this } setResponseType(e) { return this._responseType = e, this } _getUserIdData() { const e = this._url; return n.default.isYandexUrl(e) && n.default.isSecureUrl(e) ? n.default.getUserIdData() : {} } static isSuccessCode(e) { return e >= 200 && e < 300 } static isAbortedCode(e) { return e === r.HTTPError.ABORT } static isTimeoutCode(e) { return e === r.HTTPError.TIMEOUT } } t.HTTPRequest = c, c.types = a.default, c.codes = { OK: 200, CREATED: 201, ACCEPTED: 202 }, c.errors = { NOT_FOUND: 404 }, c.methods = { GET: "GET", POST: "POST", PUT: "PUT", DELETE: "DELETE" }, c.TIMEOUT = 1e4 }, function (e, t, i) { "use strict"; t.__esModule = !0, t.TranslateApplication = t.TRANSLATE_APP_EVENTS = t.LANDING_TYPES = t.A11Y_EVENTS = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(102), r = i(70), a = i(11), d = i(45), c = i(105); const l = { ACTIVATION: "focusedElementActivation", SELECT_ACTIVATION: "focusedSelectActivation" }; t.A11Y_EVENTS = l; const u = { INIT_DONE: "initDone" }; t.TRANSLATE_APP_EVENTS = u; t.LANDING_TYPES = { DICTIONARY: "dictionary", TRANSLATOR: "translator" }; const h = "data-lang", g = "data-source-lang", p = "data-target-lang", m = window.config || {}; class _ extends c.BaseApplication { static getAllSrcLangs() { if (!this.ALL_SRC_LANGS) { const e = m.DIALECTS || [], t = { ...m.TRANSLATOR_LANGS || {} }; for (const i of e) delete t[i]; this.ALL_SRC_LANGS = t } return this.ALL_SRC_LANGS } static getAllDstLangs() { return m.TRANSLATOR_LANGS || {} } static isHistoryAvailable() { return Boolean(window.history) && "state" in window.history } static getInitialLangs(e) { const t = m.DIALECT_SRC_LANGS || {}, i = (e.getAttribute(h) || "").split("-"); let n = e.getAttribute(g) || i[0] || "", s = e.getAttribute(p) || i[1] || ""; n in t && (n = t[n]); const o = n === s || t[s] === n; return ("" === n || "" === s || o) && (n = "", s = ""), { initialSourceLang: n, initialTargetLang: s } } static getCanonicalDomainWithPrefix(e) { return `${"ru" === e ? "https://translate.yandex.ru" : "https://translate.yandex.com"}${"ru" === e ? "" : "/" + e}` } constructor(e = {}) { super(e), this.listenLangsChange(), (0, a.getGlobalEmitter)().on(d.SID_FETCHING_EVENT, ({ oldSid: e, newSid: t }) => { this.getStatisticsModel().send(d.SID_FETCHING_EVENT, { oldSid: e, newSid: t }) }), s.default.firefoxVersion && this.getView().setState("firefox", !0) } listenLangsChange() { const e = this.getModel(); e.onChange(["srcLang", "dstLang"], (t, i, { oldValue: n }) => { this.getStatisticsModel().setProperty("dir", this.getLangsPair()), this.getSettings().setProperty(t, i); const s = "srcLang" === t, o = "dstLang" === t, { srcLang: r, dstLang: a } = e.getProps(); s && r === a ? this.setDstLanguage(n) : o && a === r ? this.setSrcLanguage(n) : this.maybeFixDialectPair({ isSrc: s, isDst: o, srcLang: r, dstLang: a, oldValue: n }) }) } maybeFixDialectPair({ isSrc: e, isDst: t, srcLang: i, dstLang: n, oldValue: s }) { const o = m.DIALECT_SRC_LANGS || {}; n in o && o[n] === i && (e ? this.setDstLanguage(s || this.DEFAULT_DST_LANG) : t && this.setSrcLanguage(s || this.DEFAULT_SRC_LANG)) } getLangsPair() { const { srcLang: e, dstLang: t } = this.getModel().getProps(); return `${e}-${t}` } getDefaultSrcLanguage() { const e = this.getConfig(); return e.DEFAULT_SRC_LANG ? e.DEFAULT_SRC_LANG : !e.DEFAULT_TEXT && this.getSettings().getProperty("srcLang") || _.DEFAULT_SRC_LANG } getDefaultDstLanguage() { const e = this.getConfig(); return e.DEFAULT_DST_LANG ? e.DEFAULT_DST_LANG : !e.DEFAULT_TEXT && this.getSettings().getProperty("dstLang") || (e.UI_LANG !== _.DEFAULT_SRC_LANG ? e.UI_LANG : _.DEFAULT_DST_LANG) } getLink(e = {}) { const t = this.toJSON(); let i, n = {}, o = this.getConfig().UI_LANG_PREFIX + "/"; return e.includePathname && (o = e.pathname || window.location.pathname), i = e.absolute ? window.location.protocol + "//" + window.location.hostname + o : o, e.excludeParams ? i : (e.includeSearch && (n = s.default.fromQueryString(window.location.search.slice(1))), n.lang = t.srcLang + "-" + t.dstLang, t.trText ? n.text = t.trText : delete n.text, i + "?" + s.default.toQueryString(n)) } setText(e, t = {}) { const i = this.getModel(), n = s.default.trim(e), o = "speller" === t.sender; t.caret = t.caret || 0, t.oldValue = t.oldValue || ""; const r = e.length - t.oldValue.length, a = Math.abs(r) > 1, d = e.charAt(t.caret - 1); return t.reason = o ? "speller" : a ? r < 0 ? "cut" : "paste" : "input", i.setProperty("text", e, t), i.setProperty("leadSpacingsCount", e.search(/\S/)), (!n || a || t.sender || r > 0 && !s.default.isAlphaOrDigit(d)) && (a || o || (t.reason = "\n" === d ? "enter" : "auto"), i.setProperty("trText", n, t)), this } updateTrText(e) { const t = this.getModel(); return t.setProperty("trText", s.default.trim(t.getProperty("text")), { reason: e || "auto" }), this } swapDirection() { return this.setSrcLanguage(this.getModel().getProperty("dstLang")), this } setSrcLanguage(e, t) { const i = m.DIALECT_SRC_LANGS || {}; return e = e in i ? i[e] : e, this._model.isValid("srcLang", e) && this._model.setProperty("srcLang", e, t), this } setDstLanguage(e, t) { return this._model.isValid("dstLang", e) && this._model.setProperty("dstLang", e, t), this } trackPerformance() { const e = this.getModel(), t = Boolean(m.DEFAULT_TEXT); e.onChange("text", (function i(n, s) { "url" !== s.sender && ((0, r.rumSendTimeMark)(t ? r.RUM_COUNTERS.FILLED_FIRST_TYPING : r.RUM_COUNTERS.BLANK_FIRST_TYPING), e.offChange("text", i)) })).onChange("translation", (function i() { (0, r.rumSendTimeMark)(t ? r.RUM_COUNTERS.FILLED_FIRST_TRANSLATION : r.RUM_COUNTERS.BLANK_FIRST_TRANSLATION), e.offChange("translation", i) })) } onInitDone(e) { return this.on(u.INIT_DONE, e) } onFocusedElementActivation(e) { return this.on(l.ACTIVATION, e) } onFocusedSelectActivation(e) { return this.on(l.SELECT_ACTIVATION, e) } bindFocusActivation(e) { return this.onFocusedElementActivation(t => { t === e.getElement() && e.emit("tap") }) } makeStatisticsModel() { const e = this.getConfig(); return new o.StatisticsModel({ srv: e.SRV, ver: e.VER, uid: e.UID, url: e.CLCK_URL, path: e.CLCK_PATH, loadTs: e.LOAD_TS, dir: this.getLangsPair() }) } getStatisticsModel() { return this._statisticsModel || (this._statisticsModel = this.makeStatisticsModel()), this._statisticsModel } setComplaintTarget(e) { return this.getModel().setProperty({ complaintTarget: e }) } getComplaintTarget() { return this.getModel().getProperty("complaintTarget") } onComplaintSend(e) { return this.onAction("sendComplaint", e) } isComplaintModeEnabled() { return this.getView().hasState("complaint") } openSiteTranslateUrl(e) { const t = { view: "compact", url: s.default.trim(e), lang: this.getLangsPair() }, i = "/translate?" + s.default.toQueryString(t); window.open(i, "_blank") } getProxiedImageUrl(e) { const t = { view: "ocr", url: s.default.trim(e) }; return "/translate?" + s.default.toQueryString(t) } } t.TranslateApplication = _, _.DEFAULT_SRC_LANG = "en", _.DEFAULT_DST_LANG = "ru", _.ALL_SRC_LANGS = void 0 }, function (e, t, i) { "use strict"; t.__esModule = !0, t.getIcnHtml = s, t.icn = function (e, t = 24) { return (0, n.unsafeHTML)(s(e, t)) }; var n = i(68); function s(e, t = 24) { return `\n        <svg class="icn icn_${e}" width="${t}px" height="${t}px">\n            <use xlink:href="#icn-${e}"/>\n        </svg>\n    ` } }, function (e, t, i) { var n = i(33)("wks"), s = i(35), o = i(12).Symbol, r = "function" == typeof o; (e.exports = function (e) { return n[e] || (n[e] = r && o[e] || (r ? o : s)("Symbol." + e)) }).store = n }, function (e, t, i) { "use strict"; t.__esModule = !0, t.Presenter = void 0; var n = i(9), s = i(4), o = i(16); class r extends n.Emitter { constructor(e = {}) { super(), this._view = e.view || new o.View, this._model = e.model || new s.Model } toJSON() { return this._model.toJSON() } cloneProps() { return this._model.cloneProps() } getProps() { return this._model.getProps() } getView() { return this._view } getModel() { return this._model } prepareData(e) { return e } } t.Presenter = r }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.reparentNodes = t.removeNodes = t.isCEPolyfill = void 0;
    /**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
    const n = "undefined" != typeof window && null != window.customElements && void 0 !== window.customElements.polyfillWrapFlushCallback; t.isCEPolyfill = n; t.reparentNodes = (e, t, i = null, n = null) => { for (; t !== i;) { const i = t.nextSibling; e.insertBefore(t, n), t = i } }; t.removeNodes = (e, t, i = null) => { for (; t !== i;) { const i = t.nextSibling; e.removeChild(t), t = i } }
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.nodeMarker = t.markerRegex = t.marker = t.lastAttributeNameRegex = t.isTemplatePartActive = t.createMarker = t.boundAttributeSuffix = t.Template = void 0, i(1);
    /**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
    const n = `{{lit-${String(Math.random()).slice(2)}}}`; t.marker = n; const s = `\x3c!--${n}--\x3e`; t.nodeMarker = s; const o = new RegExp(`${n}|${s}`); t.markerRegex = o; t.boundAttributeSuffix = "$lit$"; t.Template = class { constructor(e, t) { this.parts = [], this.element = t; const i = [], s = [], c = document.createTreeWalker(t.content, 133, null, !1); let l = 0, u = -1, h = 0; const { strings: g, values: { length: p } } = e; for (; h < p;) { const e = c.nextNode(); if (null !== e) { if (u++, 1 === e.nodeType) { if (e.hasAttributes()) { const t = e.attributes, { length: i } = t; let n = 0; for (let e = 0; e < i; e++)r(t[e].name, "$lit$") && n++; for (; n-- > 0;) { const t = g[h], i = d.exec(t)[2], n = i.toLowerCase() + "$lit$", s = e.getAttribute(n); e.removeAttribute(n); const r = s.split(o); this.parts.push({ type: "attribute", index: u, name: i, strings: r }), h += r.length - 1 } } "TEMPLATE" === e.tagName && (s.push(e), c.currentNode = e.content) } else if (3 === e.nodeType) { const t = e.data; if (t.indexOf(n) >= 0) { const n = e.parentNode, s = t.split(o), c = s.length - 1; for (let t = 0; t < c; t++) { let i, o = s[t]; if ("" === o) i = a(); else { const e = d.exec(o); null !== e && r(e[2], "$lit$") && (o = o.slice(0, e.index) + e[1] + e[2].slice(0, -"$lit$".length) + e[3]), i = document.createTextNode(o) } n.insertBefore(i, e), this.parts.push({ type: "node", index: ++u }) } "" === s[c] ? (n.insertBefore(a(), e), i.push(e)) : e.data = s[c], h += c } } else if (8 === e.nodeType) if (e.data === n) { const t = e.parentNode; null !== e.previousSibling && u !== l || (u++, t.insertBefore(a(), e)), l = u, this.parts.push({ type: "node", index: u }), null === e.nextSibling ? e.data = "" : (i.push(e), u--), h++ } else { let t = -1; for (; -1 !== (t = e.data.indexOf(n, t + 1));)this.parts.push({ type: "node", index: -1 }), h++ } } else c.currentNode = s.pop() } for (const e of i) e.parentNode.removeChild(e) } }; const r = (e, t) => { const i = e.length - t.length; return i >= 0 && e.slice(i) === t }; t.isTemplatePartActive = e => -1 !== e.index; const a = () => document.createComment(""); t.createMarker = a; const d = /([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/; t.lastAttributeNameRegex = d
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.TemplateView = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(15), r = i(2), a = i(67); class d extends r.TouchView { constructor(e = {}) { super(e), this._partials = e.partials, this._template = new a.Template(e.template || "", e), e.debounceRendering && (this.renderData = s.default.debounce(d.prototype.renderData)), e.deferredRendering && (this.renderData = this.deferredRenderData), e.dontResetScroll || this.on("stateSet:hidden", e => { e || this.scrollTo() }) } deferredRenderData(e, t = {}) { const i = d.prototype.renderData.bind(this, e, t), n = () => this.isVisible() && this.isEnabled(); return n() ? i() : (this._renderStateListener && this.off("stateChanged", this._renderStateListener), this._renderStateListener = () => { n() && (this.off("stateChanged", this._renderStateListener), this._renderStateListener = null, i()) }, this.onStateChanged(this._renderStateListener)), this } renderData(e, t = {}) { const i = this.trackRenderTime(() => this.setHTMLContent(this._template.compileTemplate(e, this._partials), t)); return this.emit("viewRendered"), i } trackRenderTime(e) { const t = Date.now(), i = e(); return o.logTime.render(this.getComponentName(), Date.now() - t), i } getComponentName() { const e = this._element; return e ? e.id || s.default.elementToString(e) : this.getId() } } t.TemplateView = d }, function (e, t, i) { "use strict"; t.__esModule = !0, t.PureComponent = t.COMPONENT_EVENTS = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(46), r = i(115), a = i(4), d = i(24), c = i(2); function l(e, t, i) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return i } const u = { RENDERED: "rendered", DIRECTIVE_UPDATED: "directiveUpdated" }; t.COMPONENT_EVENTS = u; const h = "updateDirective"; var g = new WeakSet, p = new WeakSet, m = new WeakSet, _ = new WeakSet, f = new WeakSet, E = new WeakSet, T = new WeakSet, S = new WeakSet; class v extends a.Model { trackRenderTime(e) { return d.TemplateView.prototype.trackRenderTime.apply(this, arguments) } getComponentName() { return d.TemplateView.prototype.getComponentName.apply(this) } constructor(e, t = {}) { super(e, t), S.add(this), T.add(this), E.add(this), f.add(this), _.add(this), m.add(this), p.add(this), g.add(this), this._cachedDirectiveProps = {}, l(this, E, R).call(this, !0), t.container && this.setContainer(t.container), this.updateAsync = s.default.debounce(v.prototype.update, 0), this.updateNow = this.updateAsync.callNow.bind(this) } genId(e) { return s.default.generateId(e || this.getComponentName()) } template(e, t) { } getDirective(e = {}) { return l(this, g, C).call(this, e, !1) } getMemoizedDirective(e = {}) { return l(this, g, C).call(this, e, !0) } getRenderHelpers() { return { html: o.html, nothing: o.nothing, cn: r.cn } } update(e = {}) { const t = this.getContainer(); return t ? l(this, m, A).call(this, t, e) : this._directive && l(this, S, O).call(this, e), this } onRendered(e) { return this.on(u.RENDERED, e) } onceRendered(e) { return this.once(u.RENDERED, e) } onDirectiveUpdated(e) { return this.on(u.DIRECTIVE_UPDATED, e) } setContainer(e) { this._element = e } getContainer() { return this._element } getRef(e, t = null) { const i = this.getContainer(), n = `[data-ref-id="${e}"]`; if (i) return i.querySelector(n); if (t) { let e = t[0]; for (; e;) { if (e.nodeType === Node.ELEMENT_NODE) { const t = e.querySelector(n); if (t) return t } if (e === t[1]) break; e = e.nextSibling } } return null } getContainerView() { return this._containerView || (this._containerView = new c.TouchView({ element: this._element })), this._containerView } } function C(e, t) { return this._directive || (this._directive = l(this, T, w).call(this)), this._directive(e, t) } function L(e = {}) { return this.template(this.getRenderHelpers(), e) } function A(e, t = {}) { return this.trackRenderTime(() => (0, o.render)(l(this, p, L).call(this, t), e)), this.emit(u.RENDERED, t) } function y(e) { return this._cachedDirectiveProps = { ...e }, this } function b(e) { return !s.default.isEqualDeep(this._cachedDirectiveProps, e) } function R(e) { return this._directiveCacheIsValid = e, this } function w() { let e; return this.on(h, t => { e && e({ ...this._cachedDirectiveProps, ...t }, { forceCommit: !0 }) }).onChange(() => l(this, E, R).call(this, !1)), (0, o.directive)((t, i) => n => { e = (e, { forceCommit: t } = {}) => { const s = !i || !this._directiveCacheIsValid || l(this, f, b).call(this, e); l(this, E, R).call(this, !0), s && (l(this, _, y).call(this, e), n.setValue(l(this, p, L).call(this, e)), t && this.trackRenderTime(() => n.commit()), this.emit(u.DIRECTIVE_UPDATED, [n.startNode, n.endNode], e)) }, e(t) }) } function O(e = {}) { return this.emit(h, e) } t.PureComponent = v }, function (e, t, i) { e.exports = !i(50)((function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7 } }).a })) }, function (e, t) { var i = {}.hasOwnProperty; e.exports = function (e, t) { return i.call(e, t) } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.HTTPError = void 0; class n { constructor(e, t) { this.code = e || 0, this.message = t || "" } } t.HTTPError = n, n.ABORT = -1, n.TIMEOUT = -2 }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.isPrimitive = t.isIterable = t.PropertyPart = t.PropertyCommitter = t.NodePart = t.EventPart = t.BooleanAttributePart = t.AttributePart = t.AttributeCommitter = void 0, i(1); var n = i(59), s = i(22), o = i(60), r = i(61), a = i(62), d = i(23);
    /**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
    const c = e => null === e || !("object" == typeof e || "function" == typeof e); t.isPrimitive = c; const l = e => Array.isArray(e) || !(!e || !e[Symbol.iterator]); t.isIterable = l; class u { constructor(e, t, i) { this.dirty = !0, this.element = e, this.name = t, this.strings = i, this.parts = []; for (let e = 0; e < i.length - 1; e++)this.parts[e] = this._createPart() } _createPart() { return new h(this) } _getValue() { const e = this.strings, t = e.length - 1, i = this.parts; if (1 === t && "" === e[0] && "" === e[1]) { const e = i[0].value; if ("symbol" == typeof e) return String(e); if ("string" == typeof e || !l(e)) return e } let n = ""; for (let s = 0; s < t; s++) { n += e[s]; const t = i[s]; if (void 0 !== t) { const e = t.value; if (c(e) || !l(e)) n += "string" == typeof e ? e : String(e); else for (const t of e) n += "string" == typeof t ? t : String(t) } } return n += e[t], n } commit() { this.dirty && (this.dirty = !1, this.element.setAttribute(this.name, this._getValue())) } } t.AttributeCommitter = u; class h { constructor(e) { this.value = void 0, this.committer = e } setValue(e) { e === o.noChange || c(e) && e === this.value || (this.value = e, (0, n.isDirective)(e) || (this.committer.dirty = !0)) } commit() { for (; (0, n.isDirective)(this.value);) { const e = this.value; this.value = o.noChange, e(this) } this.value !== o.noChange && this.committer.commit() } } t.AttributePart = h; class g { constructor(e) { this.value = void 0, this.__pendingValue = void 0, this.options = e } appendInto(e) { this.startNode = e.appendChild((0, d.createMarker)()), this.endNode = e.appendChild((0, d.createMarker)()) } insertAfterNode(e) { this.startNode = e, this.endNode = e.nextSibling } appendIntoPart(e) { e.__insert(this.startNode = (0, d.createMarker)()), e.__insert(this.endNode = (0, d.createMarker)()) } insertAfterPart(e) { e.__insert(this.startNode = (0, d.createMarker)()), this.endNode = e.endNode, e.endNode = this.startNode } setValue(e) { this.__pendingValue = e } commit() { if (null === this.startNode.parentNode) return; for (; (0, n.isDirective)(this.__pendingValue);) { const e = this.__pendingValue; this.__pendingValue = o.noChange, e(this) } const e = this.__pendingValue; e !== o.noChange && (c(e) ? e !== this.value && this.__commitText(e) : e instanceof a.TemplateResult ? this.__commitTemplateResult(e) : e instanceof Node ? this.__commitNode(e) : l(e) ? this.__commitIterable(e) : e === o.nothing ? (this.value = o.nothing, this.clear()) : this.__commitText(e)) } __insert(e) { this.endNode.parentNode.insertBefore(e, this.endNode) } __commitNode(e) { this.value !== e && (this.clear(), this.__insert(e), this.value = e) } __commitText(e) { const t = this.startNode.nextSibling, i = "string" == typeof (e = null == e ? "" : e) ? e : String(e); t === this.endNode.previousSibling && 3 === t.nodeType ? t.data = i : this.__commitNode(document.createTextNode(i)), this.value = e } __commitTemplateResult(e) { const t = this.options.templateFactory(e); if (this.value instanceof r.TemplateInstance && this.value.template === t) this.value.update(e.values); else { const i = new r.TemplateInstance(t, e.processor, this.options), n = i._clone(); i.update(e.values), this.__commitNode(n), this.value = i } } __commitIterable(e) { Array.isArray(this.value) || (this.value = [], this.clear()); const t = this.value; let i, n = 0; for (const s of e) i = t[n], void 0 === i && (i = new g(this.options), t.push(i), 0 === n ? i.appendIntoPart(this) : i.insertAfterPart(t[n - 1])), i.setValue(s), i.commit(), n++; n < t.length && (t.length = n, this.clear(i && i.endNode)) } clear(e = this.startNode) { (0, s.removeNodes)(this.startNode.parentNode, e.nextSibling, this.endNode) } } t.NodePart = g; t.BooleanAttributePart = class { constructor(e, t, i) { if (this.value = void 0, this.__pendingValue = void 0, 2 !== i.length || "" !== i[0] || "" !== i[1]) throw new Error("Boolean attributes can only contain a single expression"); this.element = e, this.name = t, this.strings = i } setValue(e) { this.__pendingValue = e } commit() { for (; (0, n.isDirective)(this.__pendingValue);) { const e = this.__pendingValue; this.__pendingValue = o.noChange, e(this) } if (this.__pendingValue === o.noChange) return; const e = !!this.__pendingValue; this.value !== e && (e ? this.element.setAttribute(this.name, "") : this.element.removeAttribute(this.name), this.value = e), this.__pendingValue = o.noChange } }; t.PropertyCommitter = class extends u { constructor(e, t, i) { super(e, t, i), this.single = 2 === i.length && "" === i[0] && "" === i[1] } _createPart() { return new p(this) } _getValue() { return this.single ? this.parts[0].value : super._getValue() } commit() { this.dirty && (this.dirty = !1, this.element[this.name] = this._getValue()) } }; class p extends h { } t.PropertyPart = p; let m = !1; (() => { try { const e = { get capture() { return m = !0, !1 } }; window.addEventListener("test", e, e), window.removeEventListener("test", e, e) } catch (e) { } })(); t.EventPart = class { constructor(e, t, i) { this.value = void 0, this.__pendingValue = void 0, this.element = e, this.eventName = t, this.eventContext = i, this.__boundHandleEvent = e => this.handleEvent(e) } setValue(e) { this.__pendingValue = e } commit() { for (; (0, n.isDirective)(this.__pendingValue);) { const e = this.__pendingValue; this.__pendingValue = o.noChange, e(this) } if (this.__pendingValue === o.noChange) return; const e = this.__pendingValue, t = this.value, i = null == e || null != t && (e.capture !== t.capture || e.once !== t.once || e.passive !== t.passive), s = null != e && (null == t || i); i && this.element.removeEventListener(this.eventName, this.__boundHandleEvent, this.__options), s && (this.__options = _(e), this.element.addEventListener(this.eventName, this.__boundHandleEvent, this.__options)), this.value = e, this.__pendingValue = o.noChange } handleEvent(e) { "function" == typeof this.value ? this.value.call(this.eventContext || this.element, e) : this.value.handleEvent(e) } }; const _ = e => e && (m ? { capture: e.capture, passive: e.passive, once: e.once } : e.capture)
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.desktopLocales = void 0; const n = window.locales || {}, s = Object.assign({ ...n }, window.desktopLocales || {}); t.desktopLocales = s }, function (e, t, i) { "use strict"; t.__esModule = !0, t.SessionModel = void 0; var n = i(45), s = i(4); class o extends s.Model { getSid() { return n.sessionManager.getSid().then(e => (this.setProperty({ sid: e }), e)) } } t.SessionModel = o }, function (e, t, i) { "use strict"; t.__esModule = !0, t.locales = void 0; const n = window.locales || {}; t.locales = n }, function (e, t, i) { var n = i(34), s = i(12), o = s["__core-js_shared__"] || (s["__core-js_shared__"] = {}); (e.exports = function (e, t) { return o[e] || (o[e] = void 0 !== t ? t : {}) })("versions", []).push({ version: n.version, mode: i(49) ? "pure" : "global", copyright: "В© 2020 Denis Pushkarev (zloirock.ru)" }) }, function (e, t) { var i = e.exports = { version: "2.6.12" }; "number" == typeof __e && (__e = i) }, function (e, t) { var i = 0, n = Math.random(); e.exports = function (e) { return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++i + n).toString(36)) } }, function (e, t, i) { var n = i(37), s = i(77), o = i(78), r = Object.defineProperty; t.f = i(26) ? Object.defineProperty : function (e, t, i) { if (n(e), t = o(t, !0), n(i), s) try { return r(e, t, i) } catch (e) { } if ("get" in i || "set" in i) throw TypeError("Accessors not supported!"); return "value" in i && (e[t] = i.value), e } }, function (e, t, i) { var n = i(38); e.exports = function (e) { if (!n(e)) throw TypeError(e + " is not an object!"); return e } }, function (e, t) { e.exports = function (e) { return "object" == typeof e ? null !== e : "function" == typeof e } }, function (e, t) { e.exports = {} }, function (e, t, i) { var n = i(80), s = i(53); e.exports = function (e) { return n(s(e)) } }, function (e, t, i) { var n = i(12), s = i(14), o = i(27), r = i(35)("src"), a = i(84), d = ("" + a).split("toString"); i(34).inspectSource = function (e) { return a.call(e) }, (e.exports = function (e, t, i, a) { var c = "function" == typeof i; c && (o(i, "name") || s(i, "name", t)), e[t] !== i && (c && (o(i, r) || s(i, r, e[t] ? "" + e[t] : d.join(String(t)))), e === n ? e[t] = i : a ? e[t] ? e[t] = i : s(e, t, i) : (delete e[t], s(e, t, i))) })(Function.prototype, "toString", (function () { return "function" == typeof this && this[r] || a.call(this) })) }, function (e, t, i) { var n = i(33)("keys"), s = i(35); e.exports = function (e) { return n[e] || (n[e] = s(e)) } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.VALUE_ATTR = t.ListboxView = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(2), r = i(24); t.VALUE_ATTR = "data-value"; class a extends r.TemplateView { constructor(e) { super(e); const t = ({ target: e }) => this.getClosest(e, e => e.hasAttribute("data-value"), !0); this.on("tap", e => { const i = t(e); i && (s.default.preventEvent(e), this.emit("itemSelected", i.getAttribute("data-value"), i)) }).on(o.TouchView.eventTypes.OVER, e => { const i = t(e); i && (s.default.preventEvent(e), this.emit("itemHovered", i, i.getAttribute("data-value"))) }) } getValues() { return this.getContentElement("[" + a.VALUE_ATTR + "]", !0).map((function (e) { return e.getAttribute(a.VALUE_ATTR) })) } hasChild(e) { return this.getElement().contains(e) } } t.ListboxView = a, a.VALUE_ATTR = "data-value" }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.AutoLangSwitcherComponent = void 0; var n = i(119); class s extends n.AbstractAutoLangSwitcherComponent {
        setModel(e) { super.setModel(e), this.updateAsync() } onClick() { const e = this.model.isAutodetectEnabled(); this.model.setAutodetectEnabled(!e), this.updateAsync(), this.trackAutodetectToggle(!e) } template({ cn: e, html: t, nothing: i }) {
            if (!this.model) return i; return t`
            <div
                class="${e("switch")({ active: this.model.isAutodetectEnabled(), size: "s" })}"
            ></div>
        `}
    } t.AutoLangSwitcherComponent = s
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.sessionManager = t.SID_FETCHING_EVENT = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(103), r = i(17), a = i(7), d = i(11); const c = window.config || {}; t.SID_FETCHING_EVENT = "sid_fetched"; class l extends Error { constructor(...e) { super(...e), this.message = "Sid Error: failed to fetch sid" } } const u = new class { constructor() { this.maxAttempts = 3, this.sidPromise = null, this.sidReceivingTimestamp = s.default.now(), this.sid = null, this.sidRequestsAttempts = 0 } isSessionExpired() { if (!c.ENABLE_SID_REQUESTING) return !1; return (s.default.now() - this.sidReceivingTimestamp) / 1e3 > c.SESSION_MAX_AGE } fetchNewSid() { this.sidPromise = new Promise(e => { new r.HTTPRequest(c.SESSIONS_PATH).setMethod(r.HTTPRequest.methods.POST).setParams({ srv: c.SRV }).send((t, i) => { t && (this.sidRequestsAttempts++, this.sidRequestsAttempts === this.maxAttempts ? ((0, a.logError)(new l), e(c.SID)) : this.fetchNewSid()); const n = this.sid; this.sidReceivingTimestamp = s.default.now(), this.sid = s.default.get(i, "body.session.id"), this.sidPromise = null, (0, d.getGlobalEmitter)().emit("sid_fetched", { oldSid: n, newSid: this.sid }), e(this.sid) }) }) } getSid() { return this.sid || (this.sid = c.SID), this.isSessionExpired() ? (this.sidPromise || this.fetchNewSid(), this.sidPromise) : new o.SyncPromise(e => { e(this.sid) }) } }; t.sessionManager = u }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.templateFactory = t.templateCaches = t.svg = t.reparentNodes = t.render = t.removeNodes = t.parts = t.nothing = t.noChange = t.isTemplatePartActive = t.isPrimitive = t.isIterable = t.isDirective = t.html = t.directive = t.createMarker = t.TemplateInstance = t.Template = t.PropertyPart = t.PropertyCommitter = t.NodePart = t.EventPart = t.DefaultTemplateProcessor = t.BooleanAttributePart = t.AttributePart = t.AttributeCommitter = void 0; var n = i(113); t.defaultTemplateProcessor = n.defaultTemplateProcessor, t.DefaultTemplateProcessor = n.DefaultTemplateProcessor; var s = i(62); t.SVGTemplateResult = s.SVGTemplateResult, t.TemplateResult = s.TemplateResult; var o = i(59); t.directive = o.directive, t.isDirective = o.isDirective; var r = i(22); t.removeNodes = r.removeNodes, t.reparentNodes = r.reparentNodes; var a = i(60); t.noChange = a.noChange, t.nothing = a.nothing; var d = i(29); t.AttributeCommitter = d.AttributeCommitter, t.AttributePart = d.AttributePart, t.BooleanAttributePart = d.BooleanAttributePart, t.EventPart = d.EventPart, t.isIterable = d.isIterable, t.isPrimitive = d.isPrimitive, t.NodePart = d.NodePart, t.PropertyCommitter = d.PropertyCommitter, t.PropertyPart = d.PropertyPart; var c = i(114); t.parts = c.parts, t.render = c.render; var l = i(63); t.templateCaches = l.templateCaches, t.templateFactory = l.templateFactory; var u = i(61); t.TemplateInstance = u.TemplateInstance; var h = i(23); t.createMarker = h.createMarker, t.isTemplatePartActive = h.isTemplatePartActive, t.Template = h.Template,
        /**
         * @license
         * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
         * This code may only be used under the BSD style license found at
         * http://polymer.github.io/LICENSE.txt
         * The complete set of authors may be found at
         * http://polymer.github.io/AUTHORS.txt
         * The complete set of contributors may be found at
         * http://polymer.github.io/CONTRIBUTORS.txt
         * Code distributed by Google as part of the polymer project is also
         * subject to an additional IP rights grant found at
         * http://polymer.github.io/PATENTS.txt
         */
        "undefined" != typeof window && (window.litHtmlVersions || (window.litHtmlVersions = [])).push("1.4.1"); t.html = (e, ...t) => new s.TemplateResult(e, t, "html", n.defaultTemplateProcessor); t.svg = (e, ...t) => new s.SVGTemplateResult(e, t, "svg", n.defaultTemplateProcessor)
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.HOT_KEYS_MAP = t.DesktopTranslateApplication = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(13), r = i(65), a = i(3), d = i(10), c = i(30), l = i(18); const u = { COPY: "COPY_HOTKEY", FAV: "FAV_HOTKEY", ASR: "ASR_HOTKEY", FOCUS_INPUT: "FOCUS_INPUT_HOTKEY", CLEAR_INPUT: "CLEAR_INPUT_HOTKEY", SWAP_LANGS: "SWAP_LANGS_HOTKEY", SRC_TTS: "SRC_TTS_HOTKEY", DST_TTS: "DST_TTS_HOTKEY" }; t.HOT_KEYS_MAP = u; const h = { c: 67, l: 76, m: 77, d: 68, s: 83, v: 86, "/": 191 }; var g = new WeakSet; class p extends l.TranslateApplication { static getHotkeysMap() { return { [u.COPY]: { osx: "Option+C", other: "Alt+C" }, [u.FAV]: { osx: "Option+L", other: "Alt+L" }, [u.ASR]: { osx: "Option+M", other: "Alt+M" }, [u.FOCUS_INPUT]: { osx: "/", other: "/" }, [u.CLEAR_INPUT]: { osx: "Option+D", other: "Alt+D" }, [u.SWAP_LANGS]: { osx: "Option+S", other: "Alt+S" }, [u.SRC_TTS]: { osx: "Option+V", other: "Alt+V" }, [u.DST_TTS]: { osx: "Option+Shift+V", other: "Alt+Ctrl+V" } } } constructor(e) { super(e), g.add(this), this.hotKeysConfig = null } getDesktopSettings() { return this._desktopSettings || (this._desktopSettings = window.config.SRV === o.TEXT && this._settings ? this._settings : new r.AppStorage({}, { name: "yTrSettings" })), this._desktopSettings } getHotKeyCombination(e) { const t = s.default.macOS ? "osx" : "other"; return p.getHotkeysMap()[e][t] } getHotKeysConfig() { return this.hotKeysConfig } addHotKey(e, { view: t, callback: i, condition: n, getActionName: s }) { const o = this.getHotKeyCombination(e), r = o.toLowerCase().split("+"), c = r.find(e => 1 === e.length); (function (e, t, i) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return i })(this, g, m).call(this, e); const l = () => { a.$tracker.sendMetric("hotkey_used", { combination: o, action_name: s(), src: this.getModel().getProperty("text"), dir: this.getLangsPair() }) }; return t && t.getElement().setAttribute("data-hotkey", o), this.getView().on("keydown", e => { if (!this.areHotkeysEnabled()) return; const s = !n || n(); if (d.InputView.hasKeyCombination(e, h[c], { altKey: r.includes("alt") || r.includes("option"), shiftKey: r.includes("shift"), ctrlKey: r.includes("ctrl") }) && s) { if (e.preventDefault(), t && t.isVisible() && t.isEnabled() && t.isValid()) { l(); const e = t.getElement().getAttribute("data-action"); e ? this.emit("action:" + e) : t.emit("tap") } i && (l(), i()) } }), this } areHotkeysEnabled() { return this.getDesktopSettings().isOptionEnabled("hotkeys") } } function m(e) { this.hotKeysConfig || (this.hotKeysConfig = {}); const t = this.getHotKeyCombination(e); this.hotKeysConfig[t] = c.desktopLocales.hotKeys[e] } t.DesktopTranslateApplication = p }, function (e, t, i) { "use strict"; t.__esModule = !0, t.SyncModel = void 0; var n = i(31); class s extends n.SessionModel { constructor(e, t) { super(e, t), this.on("invalid", this.abort) } abort() { return this._activeRequest && (this._activeRequest.abort(), this._activeRequest = null), this } setRequest(e) { return this.abort(), this._activeRequest = e, this } } t.SyncModel = s }, function (e, t) { e.exports = !1 }, function (e, t) { e.exports = function (e) { try { return !!e() } catch (e) { return !0 } } }, function (e, t, i) { var n = i(38), s = i(12).document, o = n(s) && n(s.createElement); e.exports = function (e) { return o ? s.createElement(e) : {} } }, function (e, t) { e.exports = function (e, t) { return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t } } }, function (e, t) { e.exports = function (e) { if (null == e) throw TypeError("Can't call method on  " + e); return e } }, function (e, t, i) { var n = i(90), s = i(56); e.exports = Object.keys || function (e) { return n(e, s) } }, function (e, t) { var i = Math.ceil, n = Math.floor; e.exports = function (e) { return isNaN(e = +e) ? 0 : (e > 0 ? n : i)(e) } }, function (e, t) { e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",") }, function (e, t, i) { var n = i(36).f, s = i(27), o = i(20)("toStringTag"); e.exports = function (e, t, i) { e && !s(e = i ? e : e.prototype, o) && n(e, o, { configurable: !0, value: t }) } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.default = void 0; t.default = { XML: "text/xml", XML2: "application/xml", HTML: "text/html", TEXT: "text/plain", JSON: "application/json", FORM: "application/x-www-form-urlencoded" } }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.isDirective = t.directive = void 0, i(1);
    /**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
    const n = new WeakMap; t.directive = e => (...t) => { const i = e(...t); return n.set(i, !0), i }; t.isDirective = e => "function" == typeof e && n.has(e)
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.nothing = t.noChange = void 0; t.noChange = {}; t.nothing = {} }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.TemplateInstance = void 0, i(1); var n = i(22), s = i(23); t.TemplateInstance =
        /**
         * @license
         * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
         * This code may only be used under the BSD style license found at
         * http://polymer.github.io/LICENSE.txt
         * The complete set of authors may be found at
         * http://polymer.github.io/AUTHORS.txt
         * The complete set of contributors may be found at
         * http://polymer.github.io/CONTRIBUTORS.txt
         * Code distributed by Google as part of the polymer project is also
         * subject to an additional IP rights grant found at
         * http://polymer.github.io/PATENTS.txt
         */
        class { constructor(e, t, i) { this.__parts = [], this.template = e, this.processor = t, this.options = i } update(e) { let t = 0; for (const i of this.__parts) void 0 !== i && i.setValue(e[t]), t++; for (const e of this.__parts) void 0 !== e && e.commit() } _clone() { const e = n.isCEPolyfill ? this.template.element.content.cloneNode(!0) : document.importNode(this.template.element.content, !0), t = [], i = this.template.parts, o = document.createTreeWalker(e, 133, null, !1); let r, a = 0, d = 0, c = o.nextNode(); for (; a < i.length;)if (r = i[a], (0, s.isTemplatePartActive)(r)) { for (; d < r.index;)d++, "TEMPLATE" === c.nodeName && (t.push(c), o.currentNode = c.content), null === (c = o.nextNode()) && (o.currentNode = t.pop(), c = o.nextNode()); if ("node" === r.type) { const e = this.processor.handleTextExpression(this.options); e.insertAfterNode(c.previousSibling), this.__parts.push(e) } else this.__parts.push(...this.processor.handleAttributeExpressions(c, r.name, r.strings, this.options)); a++ } else this.__parts.push(void 0), a++; return n.isCEPolyfill && (document.adoptNode(e), customElements.upgrade(e)), e } }
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.TemplateResult = t.SVGTemplateResult = void 0, i(1); var n = i(22), s = i(23);
    /**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
    const o = window.trustedTypes && trustedTypes.createPolicy("lit-html", { createHTML: e => e }), r = ` ${s.marker} `; class a { constructor(e, t, i, n) { this.strings = e, this.values = t, this.type = i, this.processor = n } getHTML() { const e = this.strings.length - 1; let t = "", i = !1; for (let n = 0; n < e; n++) { const e = this.strings[n], o = e.lastIndexOf("\x3c!--"); i = (o > -1 || i) && -1 === e.indexOf("--\x3e", o + 1); const a = s.lastAttributeNameRegex.exec(e); t += null === a ? e + (i ? r : s.nodeMarker) : e.substr(0, a.index) + a[1] + a[2] + s.boundAttributeSuffix + a[3] + s.marker } return t += this.strings[e], t } getTemplateElement() { const e = document.createElement("template"); let t = this.getHTML(); return void 0 !== o && (t = o.createHTML(t)), e.innerHTML = t, e } } t.TemplateResult = a; t.SVGTemplateResult = class extends a { getHTML() { return `<svg>${super.getHTML()}</svg>` } getTemplateElement() { const e = super.getTemplateElement(), t = e.content, i = t.firstChild; return t.removeChild(i), (0, n.reparentNodes)(t, i.firstChild), e } }
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.templateCaches = void 0, t.templateFactory =
        /**
         * @license
         * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
         * This code may only be used under the BSD style license found at
         * http://polymer.github.io/LICENSE.txt
         * The complete set of authors may be found at
         * http://polymer.github.io/AUTHORS.txt
         * The complete set of contributors may be found at
         * http://polymer.github.io/CONTRIBUTORS.txt
         * Code distributed by Google as part of the polymer project is also
         * subject to an additional IP rights grant found at
         * http://polymer.github.io/PATENTS.txt
         */
        function (e) { let t = s.get(e.type); void 0 === t && (t = { stringsArray: new WeakMap, keyString: new Map }, s.set(e.type, t)); let i = t.stringsArray.get(e.strings); if (void 0 !== i) return i; const o = e.strings.join(n.marker); i = t.keyString.get(o), void 0 === i && (i = new n.Template(e, e.getTemplateElement()), t.keyString.set(o, i)); return t.stringsArray.set(e.strings, i), i }, i(1); var n = i(23); const s = new Map; t.templateCaches = s
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.Storage = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(3), r = i(7), a = i(4); function d(e, t, i) { return function (e, t, i) { if (t.set) t.set.call(e, i); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = i } }(e, l(e, t, "set"), i), i } function c(e, t) { return function (e, t) { if (t.get) return t.get.call(e); return t.value }(e, l(e, t, "get")) } function l(e, t, i) { if (!t.has(e)) throw new TypeError("attempted to " + i + " private field on non-instance"); return t.get(e) } var u = new WeakMap, h = new WeakMap; class g extends a.Model { constructor(e, t = {}) { super(e, t), u.set(this, { writable: !0, value: window.localStorage || window.sessionStorage || {} }), h.set(this, { writable: !0, value: "mTr" }); const i = t.name || c(this, h); d(this, h, i); try { this.setProperty(JSON.parse(c(this, u)[i])) } catch { } this.on("change", () => { try { c(this, u)[i] = JSON.stringify(this.getProps()) } catch (e) { o.$tracker.sendMetric("storage_error", { error_code: e.code }), (0, r.logError)(e) } }) } getName() { return c(this, h) } getSpace() { return g.MAX_SIZE - s.default.safeStringifyJSON(c(this, u)).length } } t.Storage = g, g.MAX_SIZE = 5e6 }, function (e, t, i) { "use strict"; t.__esModule = !0, t.AppStorage = void 0; var n = i(64); class s extends n.Storage { setAutodetectEnabled(e) { return this.setProperty("auto", e) } isAutodetectEnabled() { return this.getProperty("auto") } getSrcLangHistory() { return r(this.getProperty("srcLangHistory")) } getDstLangHistory() { return r(this.getProperty("dstLangHistory")) } setSrcLangHistory(e) { return this.setProperty("srcLangHistory", o(e)) } setDstLangHistory(e) { return this.setProperty("dstLangHistory", o(e)) } getDisabledOptions() { return (this.getProperty("disabledOptions") || "").split(";") } isOptionEnabled(e) { return -1 === this.getDisabledOptions().indexOf(e) } disableOption(e) { const t = this.getDisabledOptions(); -1 === t.indexOf(e) && (this.setProperty("disabledOptions", [...t, e].join(";")), this.prefixedEmit("storageOptionChanged", e, !1)) } enableOption(e) { if (-1 === this.getDisabledOptions().indexOf(e)) return; const t = this.getDisabledOptions(); this.setProperty("disabledOptions", t.filter(t => t !== e).join(";")), this.prefixedEmit("storageOptionChanged", e, !0) } onToggleOption(e, t) { return this.on("storageOptionChanged:" + e, t) } } function o(e) { return Object.keys(e).map(t => [t, Number(Boolean(e[t]))].join(":")).join(";") } function r(e) { const t = {}; return (e ? e.split(";") : []).forEach(e => { const i = e.split(":"); t[i[0]] = Boolean(Number(i[1])) }), t } t.AppStorage = s, s.defaults = { auto: !0 } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.HTTPResponse = t.HEADER_NAMES = void 0, t.parseContentDisposition = function (e) { const t = /filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e); if (null != t && t[1]) { const e = t[1].toUpperCase().startsWith("UTF-8''"), i = t[1].slice(e ? "UTF-8''".length : 0).replace(/['"]/g, ""); return e ? decodeURIComponent(i) : i } return null }; var n = o(i(0)), s = o(i(58)); function o(e) { return e && e.__esModule ? e : { default: e } } t.HEADER_NAMES = { CONTENT_DISPOSITION: "content-disposition", CONTENT_TYPE: "content-type" }; class r { static parseResponse(e, t) { switch (t) { case s.default.XML: case s.default.XML2: return e.responseXML; case s.default.TEXT: return e.responseText; case s.default.JSON: return JSON.parse(e.responseText); case s.default.FORM: return n.default.fromQueryString(e.responseText); default: return null } } static parseResponseHeaders(e) { const t = {}; if (!e) return t; return n.default.trim(e).split("\n").forEach((function (e) { const i = e.split(":"); t[n.default.trim(i[0]).toLowerCase()] = n.default.trim(i[1]) })), t } constructor(e) { const t = e.getResponseHeader("Content-Type"); this.code = e.status, this.type = t ? t.split(";")[0] : "", this.text = e.responseType && e.responseType !== r.types.TEXT ? "" : e.responseText, this.body = this.text ? r.parseResponse(e, this.type) : e.response || null, this.message = e.statusText, this.headers = r.parseResponseHeaders(e.getAllResponseHeaders()) } } t.HTTPResponse = r, r.types = { BLOB: "blob", JSON: "json", TEXT: "text", DOCUMENT: "document", ARRAYBUFFER: "arraybuffer" } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.Template = void 0, t.tpl = function (e, ...t) { return e.reduce((e, i, n) => `${e}${i}${t[n] || ""}`, "").trim() }; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }; class o { static prepareTags(e) { let t = e; return s.default.isString(t) && (t = s.default.getValueTokens(t, 2)), s.default.isArray(t) ? t : null } static parseTemplate(e, t) { const i = []; let n = []; const o = t || this.defaultTags, r = e.replace(new RegExp("\\}?" + s.default.escapeRegExp(o[1]), "g"), o[0]); return s.default.forEach(r.split(o[0]), (function (e, t) { if (!e) return; if (t % 2 == 0) return void n.push({ type: "text", value: e }); const o = e.charAt(0), r = s.default.trim(e.slice(1)); switch (o) { case "!": break; case "#": case "@": case "?": case "^": case "*": const t = []; n.push({ type: o, name: r, value: t }), i.push({ name: r, root: n }), n = t; break; case ">": n.push({ type: o, name: r }); break; case "&": case "{": n.push({ type: "&", name: r }); break; case "/": const a = i.pop(); if (!a) throw new Error('Unopened template section "' + r + '"!'); if (r !== a.name) throw new Error('Unclosed template section "' + a.name + '"!'); n = a.root; break; default: n.push({ type: "name", name: s.default.trim(e) }) } })), n } static getContextValue(e, t) { let i, n, o, r; if (e.indexOf(".") > 0) for (i = 0, n = t, o = e.split("."), r = o.length; n && i < r;)n = n[o[i++]]; else n = t[e]; return s.default.isFunction(n) && (n = n.call(t)), n } static renderTokens(e, t = {}, i = {}) { const n = this, o = []; return s.default.forEach(e, (function (e) { let r; switch (e.type) { case "^": r = n.getContextValue(e.name, t), s.default.isEmpty(r) && o.push(n.renderTokens(e.value, t, i)); break; case "#": case "?": case "@": case "*": if (r = n.getContextValue(e.name, t), s.default.isEmpty(r)) return; s.default.isArray(r) ? s.default.forEach(r, (function (t) { const r = s.default.isObject(t) ? t : { ".": t }; o.push(n.renderTokens(e.value, r, i)) })) : o.push(n.renderTokens(e.value, s.default.isObject(r) ? r : t, i)); break; case ">": if (!s.default.isObject(i.partials)) return; if (r = n.getContextValue(e.name, i.partials), !r || !s.default.isString(r)) return; o.push(n.renderTokens(n.parseTemplate(r, i.tags), t, i)); break; case "&": case "name": if (r = n.getContextValue(e.name, t), s.default.isNullOrUndefined(r)) return; r = String(r), o.push("&" === e.type ? r : s.default.escapeHTML(r)); break; case "text": o.push(e.value) } })), o.join("") } constructor(e, t = {}) { if (!e || !s.default.isString(e)) throw new Error("Bad template!"); this._tags = o.prepareTags(t.tags), this._tokens = o.parseTemplate(e, this._tags) } compileTemplate(e, t) { return o.renderTokens(this._tokens, e, { tags: this._tags, partials: t }) } } t.Template = o, o.cache = {}, o.defaultTags = ["{{", "}}"] }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.unsafeHTML = void 0, i(1); var n = i(29), s = i(46);
    /**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
    const o = new WeakMap, r = (0, s.directive)(e => t => { if (!(t instanceof s.NodePart)) throw new Error("unsafeHTML can only be used in text bindings"); const i = o.get(t); if (void 0 !== i && (0, n.isPrimitive)(e) && e === i.value && t.value === i.fragment) return; const r = document.createElement("template"); r.innerHTML = e; const a = document.importNode(r.content, !0); t.setValue(a), o.set(t, { value: e, fragment: a }) }); t.unsafeHTML = r
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.ChoiceGroup = void 0; var n = i(25); class s extends n.PureComponent {
        constructor(e, t) { super(e, t), this.onChange(() => this.updateAsync()), this.update() } setSelectedElement(e) { return this.setProperty({ activeIndex: e }) } template({ html: e, cn: t, nothing: i }) {
            const n = {}, { activeIndex: s, items: o, wideMode: r } = this.getProps(), a = t("choiceGroup"); r && (n.wide = !0); const d = o.map((t, n) => {
                const o = s === n; return e`
                <button class=${a("item", { selected: o })}
                    aria-label=${t.ariaLabel}
                    @click=${e => t.onClick(e, { index: n, activeIndex: s, selected: o })}
                    tabindex="${isNaN(t.tabIndex) ? -1 : t.tabIndex}"
                    data-default-enter-action="true"
                >
                    ${t.icon || i}${t.content}
                </button>
            `}); return e`<div class=${a(n)}>${d}</div>`
        }
    } t.ChoiceGroup = s, s.defaults = { items: [], activeIndex: 0, wideMode: !1 }
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.RUM_COUNTERS = void 0, t.rumSendTimeMark = function (e) { try { window.Ya.Rum.sendTimeMark(e) } catch (e) { } }, t.rumTimeEnd = function (e) { try { n.DEBUG && console.timeEnd(e), window.Ya.Rum.timeEnd(e) } catch (e) { } }, t.rumTimeStart = function (e) { try { n.DEBUG && console.time(e), window.Ya.Rum.time(e) } catch (e) { } }; var n = i(15); t.RUM_COUNTERS = { APP_INIT_START: "app-init-start", APP_INIT_DURATION: "app-init-duration", BLANK_FIRST_TYPING: "blank-first-typing", BLANK_FIRST_TRANSLATION: "blank-first-translation", FILLED_FIRST_TYPING: "filled-first-typing", FILLED_FIRST_TRANSLATION: "filled-first-translation" } }, , function (e, t, i) { "use strict"; t.__esModule = !0, t.FILE_FORMAT = t.EVENT_NAMES = t.ACTION_ATTRIBUTE = t.ACTIONS = void 0; t.EVENT_NAMES = { SIZE_ERROR: "sizeError", FORMAT_ERROR: "formatError", FILE_DROPPED: "fileDropped", URL_DROPPED: "urlDropped", DROP: "drop", DRAG_OVER: "dragover", DRAG_ENTER: "dragenter", DRAG_LEAVE: "dragleave", DRAG_START: "dragstart" }; t.FILE_FORMAT = { IMAGE: "image", DOCUMENT: "doc", INVALID: "invalid", URL: "url" }; t.ACTIONS = { OCR: "/ocr", DOC: "/doc" }; t.ACTION_ATTRIBUTE = "action" }, function (e, t, i) { "use strict"; i(74) }, function (e, t) { !function (e, t) { if (!e) throw new Error("Rum: interface is not included"); if (!e.enabled) return e.getSetting = function () { return "" }, e.getVarsList = function () { return [] }, void (e.getResourceTimings = e.pushConnectionTypeTo = e.pushTimingTo = e.normalize = e.sendCounter = e.sendDelta = e.sendTimeMark = e.sendResTiming = e.sendTTI = e.makeSubPage = e.sendHeroElement = e.onReady = function () { }); e.getVarsList = function () { var t = e._vars; return Object.keys(t).map((function (e) { return e + "=" + encodeURIComponent(t[e]).replace(/\*/g, "%2A") })) }, e.setVars = function (t) { Object.keys(t).forEach((function (i) { e._vars[i] = t[i] })), C(), L() }; var i, n, s = { connectEnd: 2116, connectStart: 2114, decodedBodySize: 2886, domComplete: 2124, domContentLoadedEventEnd: 2131, domContentLoadedEventStart: 2123, domInteractive: 2770, domLoading: 2769, domainLookupEnd: 2113, domainLookupStart: 2112, duration: 2136, encodedBodySize: 2887, entryType: 2888, fetchStart: 2111, initiatorType: 2889, loadEventEnd: 2126, loadEventStart: 2125, nextHopProtocol: 2890, redirectCount: 1385, redirectEnd: 2110, redirectStart: 2109, requestStart: 2117, responseEnd: 2120, responseStart: 2119, secureConnectionStart: 2115, startTime: 2322, transferSize: 2323, type: 76, unloadEventEnd: 2128, unloadEventStart: 2127, workerStart: 2137 }, o = { visible: 1, hidden: 2, prerender: 3 }, r = { bluetooth: 2064, cellular: 2065, ethernet: 2066, none: 1229, wifi: 2067, wimax: 2068, other: 861, unknown: 836, 0: 836, 1: 2066, 2: 2067, 3: 2070, 4: 2071, 5: 2768 }, a = { "first-paint": 2793, "first-contentful-paint": 2794 }, d = Object.keys(a).length, c = e.getTime, l = window.PerformanceObserver, u = window.performance || {}, h = u.timing || {}, g = u.navigation || {}, p = navigator.connection, m = {}, _ = {}, f = e._deltaMarks, E = document.createElement("link"), T = document.createElement("a"), S = "function" == typeof u.getEntriesByType, v = h.navigationStart; function C() { i = e.getVarsList(), e.getSetting("sendClientUa") && i.push("1042=" + encodeURIComponent(navigator.userAgent)) } function L() { n = i.concat(["143.2129=" + v]) } function A(e) { function t() { removeEventListener("DOMContentLoaded", t), removeEventListener("load", t), e() } "loading" === document.readyState ? (addEventListener("DOMContentLoaded", t), addEventListener("load", t)) : e() } function y() { e.getSetting("disableOnLoadTasks") || (removeEventListener("load", y), function () { var t = e.getSetting("periodicStatsIntervalMs"); t || null === t || (t = 15e3); t && (R = setInterval(D, t)); addEventListener("beforeunload", D) }(), function () { if (!l) return; U(u.getEntriesByType("navigation")), U(u.getEntriesByType("resource")); try { new l((function (e) { U(e.getEntries()) })).observe({ entryTypes: ["resource", "navigation"] }) } catch (e) { } e._periodicTasks.push(H) }(), function () { if (!l) return; try { new l((function (e, t) { var i = e.getEntries()[0]; if (i) { var n = i.processingStart, s = { duration: i.duration, js: i.processingEnd - n, name: i.name }, o = i.target; if (o) { var r = (o.tagName || "").toLowerCase(), a = o.className ? (" " + o.className).replace(/\s+/g, ".") : ""; s.target = r + a } N("first-input", n - i.startTime, s), t.disconnect() } })).observe({ type: "first-input", buffered: !0 }) } catch (e) { } }(), function () { if (!S) return; var e = u.getEntriesByType("navigation")[0]; if (e) { var t = []; J(t, e), K(t), ee("690.2096.2892", i.concat(t)) } }(), function () { if (!l) return; var e = new l((function (e) { var t = e.getEntries(); null == k && (k = 0); for (var i = 0; i < t.length; i++) { var n = t[i]; n.hadRecentInput || (k += n.value) } })); try { e.observe({ type: "layout-shift", buffered: !0 }) } catch (e) { } addEventListener("visibilitychange", (function t() { if ("hidden" === document.visibilityState) { removeEventListener("visibilitychange", t); try { "function" == typeof e.takeRecords && e.takeRecords(), e.disconnect() } catch (e) { } B() } })), addEventListener("beforeunload", B) }(), function () { if (!l || !e.getSetting("forcePaintTimeSending") && e.isVisibilityChanged()) return; var t = new l((function (e) { for (var t = e.getEntries(), i = 0; i < t.length; i++) { var n = t[i]; G = n.renderTime || n.loadTime, F = n } W || (P("largest-loading-elem-paint", G), W = !0) })); try { t.observe({ type: "largest-contentful-paint", buffered: !0 }) } catch (e) { } addEventListener("visibilitychange", (function e() { if ("hidden" === document.visibilityState) { removeEventListener("visibilitychange", e); try { "function" == typeof t.takeRecords && t.takeRecords(), t.disconnect() } catch (e) { } z() } })), addEventListener("beforeunload", z) }()) } function b() { var t = h.domContentLoadedEventStart, n = h.domContentLoadedEventEnd; if (0 !== t || 0 !== n) { var r = 0 === h.responseStart ? v : h.responseStart, a = 0 === h.domainLookupStart ? v : h.domainLookupStart, d = i.concat(["2129=" + v, "1036=" + (a - v), "1037=" + (h.domainLookupEnd - h.domainLookupStart), "1038=" + (h.connectEnd - h.connectStart), h.secureConnectionStart && "1383=" + (h.connectEnd - h.secureConnectionStart), "1039=" + (h.responseStart - h.connectEnd), "1040=" + (h.responseEnd - r), "1040.906=" + (h.responseEnd - a), "1310.2084=" + (h.domLoading - r), "1310.2085=" + (h.domInteractive - r), "1310.1309=" + (n - t), "1310.1007=" + (t - r), navigator.deviceMemory && "3140=" + navigator.deviceMemory, navigator.hardwareConcurrency && "3141=" + navigator.hardwareConcurrency]); Object.keys(s).forEach((function (e) { e in h && h[e] && d.push(s[e] + "=" + Q(h[e], v)) })), e.vsStart ? (d.push("1484=" + (o[e.vsStart] || 2771)), e.vsChanged && d.push("1484.719=1")) : d.push("1484=" + o.visible), g && (g.redirectCount && d.push("1384.1385=" + g.redirectCount), 1 !== g.type && 2 !== g.type || d.push("770.76=" + g.type)), K(d), ee("690.1033", d) } else setTimeout(b, 50) } C(), L(), e.ajaxStart = 0, e.ajaxComplete = 0, A((function () { if (!v) return; setTimeout((function () { e.sendTimeMark = P, e.sendResTiming = x, e.timeEnd = M; for (var t = e._defRes; t.length;) { var i = t.shift(); x(i[0], i[1]) } for (var n = e._defTimes; n.length;) { var s = n.shift(); P(s[0], s[1], !1, s[2]) } Object.keys(f).forEach((function (e) { N(e) })), b(), function t() { if (!S || !e.getSetting("forcePaintTimeSending") && e.isVisibilityChanged()) return; for (var i = u.getEntriesByType("paint"), n = 0; n < i.length; n++) { var s = i[n], o = a[s.name]; o && !w[s.name] && (w[s.name] = !0, O++, P("1926." + o, s.startTime)) } if (O < d) try { new l((function (e, i) { t(), i && i.disconnect() })).observe({ entryTypes: ["paint"] }) } catch (e) { } }(), e.getSetting("sendAutoElementTiming") && j(), X(), "complete" === document.readyState ? y() : addEventListener("load", y) }), 0) })), e._getCommonVars = function () { return i }; var R, w = {}, O = 0; function P(t, i, n, s) { void 0 === i && (i = c()), void 0 !== n && !0 !== n || e.mark(t, i); var o = Z(t); if (o.push("207=" + Q(i)), I(o, s)) { ee("690.2096.207", o), m[t] = m[t] || [], m[t].push(i); var r = e._markListeners[t]; r && r.length && r.forEach((function (e) { e(i) })) } } function I(e, t) { if (t) { if (t.isCanceled && t.isCanceled()) return !1; var i = e.reduce((function (e, t, i) { "string" == typeof t && (e[t.split("=")[0]] = i); return e }), {}); Object.keys(t).forEach((function (n) { if ("function" != typeof t[n]) { var s = i[n], o = n + "=" + t[n]; void 0 === s ? e.push(o) : e[s] = o } })) } return !0 } function M(e, t) { var i = f[e]; i && 0 !== i.length && (i.push(c(), t), N(e)) } function N(t, i, n) { var s, o, r, a = f[t]; if (void 0 !== i ? s = (o = e.getTime()) - i : a && (s = a[0], o = a[1], r = a[2]), void 0 !== s && void 0 !== o) { var d = Z(t); d.push("207.2154=" + Q(s), "207.1428=" + Q(o), "2877=" + Q(o - s)), I(d, n) && I(d, r) && (ee("690.2096.2877", d), delete f[t]) } } function x(t, i) { Y(i, (function (n) { if (n) { var s = Z(t); e.getSetting("sendUrlInResTiming") && s.push("13=" + encodeURIComponent(i)), J(s, n[n.length - 1]), ee("690.2096.2044", s) } })) } function D() { var t = !1; e._periodicTasks.forEach((function (e) { e() && (t = !0) })), t || clearInterval(R) } e.getTimeMarks = function () { return m }, e._periodicTasks = []; var k, V = 0; function U(e) { if (e && e.length) for (var t = _, i = 0; i < e.length; i++) { var n = $(e[i]); if (n) { var s = n.domain + "-" + n.extension, o = t[s] = t[s] || { count: 0, size: 0 }; o.count++, o.size += n.size } } } function $(e) { var t = e.transferSize; if (null != t) { T.href = e.name; var i = T.pathname; if (0 !== i.indexOf("/clck")) { var n = i.lastIndexOf("."), s = ""; return -1 !== n && i.lastIndexOf("/") < n && i.length - n <= 5 && (s = i.slice(n + 1)), { size: t, domain: T.hostname, extension: s } } } } function H() { var t = e.getSetting("maxTrafficCounters") || 250; if (V >= t) return !1; for (var n = Object.keys(_), s = "", o = 0; o < n.length; o++) { var r = n[o], a = _[r]; s += encodeURIComponent(r) + "!" + a.count + "!" + a.size + ";" } s.length && (V++, ee("690.2096.361", i.concat(["d=" + s, "t=" + Q(c())]))); return _ = {}, V < t } function B() { if (null != k) { var e = Math.round(1e6 * k) / 1e6; ee("690.2096.4004", i.concat("s=" + e)), k = null } } var G = null, F = null, W = !1; function z() { if (null != G) { var t = e.getLCPAdditionalParams(F); P("largest-contentful-paint", G, !1, t), G = null, F = null } } var j = l ? function () { if (e.getSetting("forcePaintTimeSending") || !e.isVisibilityChanged()) try { new l((function (e) { for (var t = e.getEntries(), i = 0; i < t.length; i++) { var n = t[i]; P("element-timing." + n.identifier, n.startTime) } })).observe({ type: "element", buffered: !0 }) } catch (e) { } } : function () { }; function X(t, i, n) { if (e._tti) { var s = c(), o = function (t, o, r) { var a = { 2796.2797: q(r, i), 689.2322: Q(s) }; n && Object.keys(n).forEach((function (e) { a[e] = n[e] })), P(t || "2795", o, !0, a), e._tti.fired = !0 }; !function n() { var r, a = i || s, d = c(), l = e._tti.events || [], u = l.length; 0 !== u && (r = l[u - 1], a = Math.max(a, Math.floor(r.startTime + r.duration))), d - a >= 3e3 ? o(t, a, l) : d - a >= 2e4 ? o(t, (i || s) + 2e4, l) : setTimeout(n, 1e3) }() } } function K(e) { p && e.push("2437=" + (r[p.type] || 2771), void 0 !== p.downlinkMax && "2439=" + p.downlinkMax, p.effectiveType && "2870=" + p.effectiveType, void 0 !== p.rtt && "rtt=" + p.rtt, void 0 !== p.downlink && "dwl=" + p.downlink) } function Y(e, t) { if (!S) return t(null); E.href = e; var i = E.href, n = 0, s = 100; setTimeout((function e() { var o = u.getEntriesByName(i); if (o.length) return t(o); n++ < 10 ? (setTimeout(e, s), s += s) : t(null) }), 0) } function q(e, t) { return t = t || 0, (e = e || []).filter((function (e) { return e.startTime - t >= -50 })).map((function (e) { var t = e.name ? e.name.split("-").map((function (e) { return e[0] })).join("") : "u", i = Math.floor(e.startTime); return t + "-" + i + "-" + Math.floor(i + e.duration) })).join(".") } function Z(t) { return n.concat(["1701=" + t, e.ajaxStart && "1201.2154=" + Q(e.ajaxStart), e.ajaxComplete && "1201.2052=" + Q(e.ajaxComplete)]) } function J(e, t) { Object.keys(s).forEach((function (i) { if (i in t) { var n = t[i]; (n || 0 === n) && e.push(s[i] + "=" + Q(n)) } })) } function Q(e, t) { return "string" == typeof e ? encodeURIComponent(e) : Math.round(1e3 * (e - (t || 0))) / 1e3 } function ee(t, i) { var n = encodeURIComponent(window.YaStaticRegion || "unknown"); i.push("-cdn=" + n); var s = i.filter(Boolean).join(","); e.send(null, t, s) } e.sendTTI = X, e.sendHeroElement = function (e) { P("2876", e) }, e._subpages = {}, e.makeSubPage = function (t, i) { var n = e._subpages[t]; e._subpages[t] = void 0 === n ? n = 0 : ++n; var s = !1; return { 689.2322: Q(void 0 !== i ? i : c()), 2924: t, 2925: n, isCanceled: function () { return s }, cancel: function () { s = !0 } } }, e._getLongtasksStringValue = q, e.getResourceTimings = Y, e.pushConnectionTypeTo = K, e.pushTimingTo = J, e.normalize = Q, e.sendCounter = ee, e.sendDelta = N, e.sendTrafficData = H, e.finalizeLayoutShiftScore = B, e.finalizeLargestContentfulPaint = z, e.onReady = A }(Ya.Rum) }, function (e, t, i) { "use strict"; var n = i(76), s = i(79), o = i(39), r = i(40); e.exports = i(82)(Array, "Array", (function (e, t) { this._t = r(e), this._i = 0, this._k = t }), (function () { var e = this._t, t = this._k, i = this._i++; return !e || i >= e.length ? (this._t = void 0, s(1)) : s(0, "keys" == t ? i : "values" == t ? e[i] : [i, e[i]]) }), "values"), o.Arguments = o.Array, n("keys"), n("values"), n("entries") }, function (e, t, i) { var n = i(20)("unscopables"), s = Array.prototype; null == s[n] && i(14)(s, n, {}), e.exports = function (e) { s[n][e] = !0 } }, function (e, t, i) { e.exports = !i(26) && !i(50)((function () { return 7 != Object.defineProperty(i(51)("div"), "a", { get: function () { return 7 } }).a })) }, function (e, t, i) { var n = i(38); e.exports = function (e, t) { if (!n(e)) return e; var i, s; if (t && "function" == typeof (i = e.toString) && !n(s = i.call(e))) return s; if ("function" == typeof (i = e.valueOf) && !n(s = i.call(e))) return s; if (!t && "function" == typeof (i = e.toString) && !n(s = i.call(e))) return s; throw TypeError("Can't convert object to primitive value") } }, function (e, t) { e.exports = function (e, t) { return { value: t, done: !!e } } }, function (e, t, i) { var n = i(81); e.exports = Object("z").propertyIsEnumerable(0) ? Object : function (e) { return "String" == n(e) ? e.split("") : Object(e) } }, function (e, t) { var i = {}.toString; e.exports = function (e) { return i.call(e).slice(8, -1) } }, function (e, t, i) { "use strict"; var n = i(49), s = i(83), o = i(41), r = i(14), a = i(39), d = i(87), c = i(57), l = i(95), u = i(20)("iterator"), h = !([].keys && "next" in [].keys()), g = function () { return this }; e.exports = function (e, t, i, p, m, _, f) { d(i, t, p); var E, T, S, v = function (e) { if (!h && e in y) return y[e]; switch (e) { case "keys": case "values": return function () { return new i(this, e) } }return function () { return new i(this, e) } }, C = t + " Iterator", L = "values" == m, A = !1, y = e.prototype, b = y[u] || y["@@iterator"] || m && y[m], R = b || v(m), w = m ? L ? v("entries") : R : void 0, O = "Array" == t && y.entries || b; if (O && (S = l(O.call(new e))) !== Object.prototype && S.next && (c(S, C, !0), n || "function" == typeof S[u] || r(S, u, g)), L && b && "values" !== b.name && (A = !0, R = function () { return b.call(this) }), n && !f || !h && !A && y[u] || r(y, u, R), a[t] = R, a[C] = g, m) if (E = { values: L ? R : v("values"), keys: _ ? R : v("keys"), entries: w }, f) for (T in E) T in y || o(y, T, E[T]); else s(s.P + s.F * (h || A), t, E); return E } }, function (e, t, i) { var n = i(12), s = i(34), o = i(14), r = i(41), a = i(85), d = function (e, t, i) { var c, l, u, h, g = e & d.F, p = e & d.G, m = e & d.S, _ = e & d.P, f = e & d.B, E = p ? n : m ? n[t] || (n[t] = {}) : (n[t] || {}).prototype, T = p ? s : s[t] || (s[t] = {}), S = T.prototype || (T.prototype = {}); for (c in p && (i = t), i) u = ((l = !g && E && void 0 !== E[c]) ? E : i)[c], h = f && l ? a(u, n) : _ && "function" == typeof u ? a(Function.call, u) : u, E && r(E, c, u, e & d.U), T[c] != u && o(T, c, h), _ && S[c] != u && (S[c] = u) }; n.core = s, d.F = 1, d.G = 2, d.S = 4, d.P = 8, d.B = 16, d.W = 32, d.U = 64, d.R = 128, e.exports = d }, function (e, t, i) { e.exports = i(33)("native-function-to-string", Function.toString) }, function (e, t, i) { var n = i(86); e.exports = function (e, t, i) { if (n(e), void 0 === t) return e; switch (i) { case 1: return function (i) { return e.call(t, i) }; case 2: return function (i, n) { return e.call(t, i, n) }; case 3: return function (i, n, s) { return e.call(t, i, n, s) } }return function () { return e.apply(t, arguments) } } }, function (e, t) { e.exports = function (e) { if ("function" != typeof e) throw TypeError(e + " is not a function!"); return e } }, function (e, t, i) { "use strict"; var n = i(88), s = i(52), o = i(57), r = {}; i(14)(r, i(20)("iterator"), (function () { return this })), e.exports = function (e, t, i) { e.prototype = n(r, { next: s(1, i) }), o(e, t + " Iterator") } }, function (e, t, i) { var n = i(37), s = i(89), o = i(56), r = i(42)("IE_PROTO"), a = function () { }, d = function () { var e, t = i(51)("iframe"), n = o.length; for (t.style.display = "none", i(94).appendChild(t), t.src = "javascript:", (e = t.contentWindow.document).open(), e.write("<script>document.F=Object<\/script>"), e.close(), d = e.F; n--;)delete d.prototype[o[n]]; return d() }; e.exports = Object.create || function (e, t) { var i; return null !== e ? (a.prototype = n(e), i = new a, a.prototype = null, i[r] = e) : i = d(), void 0 === t ? i : s(i, t) } }, function (e, t, i) { var n = i(36), s = i(37), o = i(54); e.exports = i(26) ? Object.defineProperties : function (e, t) { s(e); for (var i, r = o(t), a = r.length, d = 0; a > d;)n.f(e, i = r[d++], t[i]); return e } }, function (e, t, i) { var n = i(27), s = i(40), o = i(91)(!1), r = i(42)("IE_PROTO"); e.exports = function (e, t) { var i, a = s(e), d = 0, c = []; for (i in a) i != r && n(a, i) && c.push(i); for (; t.length > d;)n(a, i = t[d++]) && (~o(c, i) || c.push(i)); return c } }, function (e, t, i) { var n = i(40), s = i(92), o = i(93); e.exports = function (e) { return function (t, i, r) { var a, d = n(t), c = s(d.length), l = o(r, c); if (e && i != i) { for (; c > l;)if ((a = d[l++]) != a) return !0 } else for (; c > l; l++)if ((e || l in d) && d[l] === i) return e || l || 0; return !e && -1 } } }, function (e, t, i) { var n = i(55), s = Math.min; e.exports = function (e) { return e > 0 ? s(n(e), 9007199254740991) : 0 } }, function (e, t, i) { var n = i(55), s = Math.max, o = Math.min; e.exports = function (e, t) { return (e = n(e)) < 0 ? s(e + t, 0) : o(e, t) } }, function (e, t, i) { var n = i(12).document; e.exports = n && n.documentElement }, function (e, t, i) { var n = i(27), s = i(96), o = i(42)("IE_PROTO"), r = Object.prototype; e.exports = Object.getPrototypeOf || function (e) { return e = s(e), n(e, o) ? e[o] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? r : null } }, function (e, t, i) { var n = i(53); e.exports = function (e) { return Object(n(e)) } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.default = void 0; t.default = /\ud83d[\udc68-\udc69](?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92])|(?:\ud83c[\udfcb\udfcc]|\ud83d\udd75|\u26f9)(?:\ufe0f|\ud83c[\udffb-\udfff])\u200d[\u2640\u2642]\ufe0f|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd37-\udd39\udd3d\udd3e\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|(?:[\u0023\u002a\u0030-\u0039])\ufe0f?\u20e3|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddd1-\udddd]|[\u270a\u270b])(?:\ud83c[\udffb-\udfff]|)|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud800\udc00|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef8]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd4c\udd50-\udd6b\udd80-\udd97\uddc0\uddd0\uddde-\udde6]|[\u23e9-\u23ec\u23f0\u23f3\u2640\u2642\u2695\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a]|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2694\u2696\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))/g }, function (e, t, i) { "use strict"; t.__esModule = !0, t.default = void 0; t.default = /^(https?:\/\/)?(([\w\-\u0430-\u045f]+\.)+(ac|academy|ae|aero|agency|ai|am|amsterdam|app|ar|art|asia|at|au|az|ba|be|bg|biz|blog|blue|bot|br|buzz|by|ca|cards|cc|center|ch|chat|cl|cloud|club|cn|co|codes|coffee|com|company|computer|cy|cz|data|de|design|dev|dk|download|dz|edu|ee|eg|email|es|eu|fi|finance|flags|fm|foundation|fr|fun|games|ge|gg|gle|global|google|gov|gr|group|guide|guru|help|hk|hr|hu|id|ie|il|im|in|info|institute|int|io|iq|ir|is|ismaili|it|jp|kg|kr|kz|la|li|life|link|live|love|lt|lu|lv|ly|md|me|media|men|mil|mk|ml|mn|moe|moscow|mx|name|net|network|news|ng|nl|no|nz|one|onion|online|org|page|party|ph|pl|plus|porn|post|press|pro|pt|pub|red|ro|rs|ru|run|sa|sc|science|se|sg|sh|shop|si|site|sk|so|social|space|su|tatar|team|tech|th|tips|tj|to|top|town|tr|travel|tv|tw|ua|uk|us|uz|vc|video|vip|vn|work|works|world|ws|xn--p1ai|xxx|xyz|yandex|za|zone|СЂС„))(:\d+)?(\/\S*)?$/i }, function (e, t, i) { "use strict"; t.__esModule = !0, t.default = void 0; t.default = /^[a-zA-Z0-9\+\.\_\%\-]{1,256}\@[a-zA-Z0-9][a-zA-Z0-9\-]{0,64}(\.[a-zA-Z0-9][a-zA-Z0-9\-]{0,25})+$/ }, function (e, t, i) { "use strict"; t.__esModule = !0, t.pushTask = function (e) { e.isHighPriority ? s.unshift(e) : s.push(e); 1 === s.length && r(d) }; var n = i(7); const s = [], o = []; function r(e) { o.push(e), window.postMessage("zero-timeout-message", "*") } window.addEventListener("message", (function (e) { e.source === window && "zero-timeout-message" === e.data && (e.stopPropagation(), o.length > 0 && o.shift()()) }), !0); let a = 0; function d() { if (0 === s.length) return; if (a > 0) return; a++; let e = Date.now(), t = e; for (; s.length > 0 && t - e < 35;) { const e = s.shift(); try { e.fn.call(e.ctx || null) } catch (e) { (0, n.logError)(e) } if (t = Date.now(), s.length > 0 && s[0].isLongTask) break } s.length > 0 && r(d), a-- } }, function (e, t, i) { "use strict"; var n, s, o = (n = i(0)) && n.__esModule ? n : { default: n }; window.XDomainRequest && ((s = window.XDomainRequest.prototype).nativeOpen = s.open, s.nativeSend = s.send, s.nativeAbort = s.abort, s.setRequestHeader = o.default.noop, s.getResponseHeader = function (e) { return this.responseText && "Content-Type" === e ? "application/json" : null }, s.onreadystatechange = o.default.noop, s.getAllResponseHeaders = function () { return "" }, s.open = function (e, t) { this.url = t }, s.send = function (e) { const t = this; let i = this.url; e && (i += (i.indexOf("?") < 0 ? "?" : "&") + e); const n = e => { "load" === e.type && (this.status = 200), this.readyState = 4, this.onreadystatechange() }; t.onload = n, t.onerror = n, t.ontimeout = o.default.noop, t.onprogress = o.default.noop, t.nativeOpen("GET", i), setTimeout((function () { t.nativeSend() }), 0) }, s.abort = function () { this.nativeAbort(), this.readyState = 4, this.onreadystatechange() }, s.status = 0, s.readyState = 0, s.statusText = "") }, function (e, t, i) { "use strict"; t.__esModule = !0, t.StatisticsModel = void 0; var n = a(i(0)), s = i(15), o = i(31), r = a(i(104)); function a(e) { return e && e.__esModule ? e : { default: e } } class d extends o.SessionModel { static updateDomTrackingData(e, t) { const i = n.default.extend(n.default.safeParseJSON(e.getAttribute("data-tracking-data")), t); e.setAttribute("data-tracking-data", JSON.stringify(i)) } constructor(e, t) { super(e, t); const i = this.constructor; this._sendMetrikaGoal = window.sendMetrikaGoal, this.setProperty("url", e.url + n.default.toQueryString({ dtype: i.DTYPE, pid: i.PID }, "/") + "/"), window.sendStatisticsEvent = this.send.bind(this) } getDefaults() { return { url: "/", srv: "", ver: "", uid: "", dir: "", path: "", loadTs: "", isSearchApp: !1 } } getUiType() { const { isSearchApp: e, srv: t } = this.getProps(); return e ? "turboapp" : "tr-touch" === t ? "touch" : "desktop" } getLink(e) { const t = this.constructor, i = this.getProps(), s = {}; return e.logged_in = i.uid ? 1 : 0, i.sid && (e.sid = i.sid), i.srv && (e.srv = i.srv), i.ver && (e.ver = i.ver), i.loadTs && (e.load_ts = i.loadTs), i.dir && (e.dir = i.dir), e.cur_ts = (new Date).getTime(), e.ui_type = this.getUiType(), "74186" === e.cid && e.counter_name && (e.key = e.counter_name), Object.keys(e).forEach((function (i) { const n = "cid" === i ? i : t.KEY_PREFIX + "_" + i, o = String(e[i]); s[n] = o.slice(0, "desktop_redesign_vote_send" === e.counter_name ? 500 : t.MAX_DATA_LENGTH) })), s.path = i.path, this.getProperty("url") + n.default.toQueryString(s, "/") + "/*" } sendMetrika(e) { this._sendMetrikaGoal && this._sendMetrikaGoal(e) } logEvent(e, t, i = {}) { if (t.mid && this.sendMetrika(t.mid), t.cid) { let s = { cid: t.cid, counter_name: e }; n.default.isEmpty(i) || (s = n.default.extend(s, i)); (new Image).src = this.getLink(s) } if (s.DEBUG && window.debugEnabled && "hover" !== e) { const n = []; t.mid && n.push("mc/" + t.mid), t.cid && n.push("clck/" + t.cid), window.printDebug(`Event ${t.mid ? "" : e + ": "}${n.join(", ")}`, i) } } send(e, t) { const i = d.targets[e]; e && i && this.getSid().then(() => this.logEvent(e, i, t)) } isTrackingDom(e) { return e.hasAttribute && e.hasAttribute("data-tracking-data") } getTrackingDomLeafData(e) { const t = n.default.safeParseJSON(e.getAttribute("data-tracking-data")); return t.id || (t.id = e.getAttribute("id")), t } getTrackingDomFullData(e) { const t = [], i = {}; let s, o; for (o = e; o.parentElement; o = o.parentElement)this.isTrackingDom(o) && t.push(o); for (s = t.length - 1; s >= 0; s -= 1)n.default.extend(i, this.getTrackingDomLeafData(t[s])); return i } sendSingleTrackingDom(e, t, i) { this.send(t, n.default.extend(this.getTrackingDomFullData(e), i)) } sendNestedTrackingDom(e, t, i) { const s = n.default.extend({}, i); let o = !1; const r = this; n.default.getEventPath(e).forEach((function (e) { r.isTrackingDom(e) && (o && r.send(t, s), n.default.extend(s, r.getTrackingDomLeafData(e), { asParent: !0 }), o = !0) })), o && this.send(t, n.default.extend(s, { asParent: !1 })) } } t.StatisticsModel = d, d.PID = "453", d.DTYPE = "stred", d.KEY_PREFIX = "ytr", d.MAX_DATA_LENGTH = 200, d.targets = r.default }, function (e, t, i) { "use strict"; t.__esModule = !0, t.SyncPromise = void 0; class n { constructor(e) { this.result = null, e && e(e => this.resolveSync(e)) } resolveSync(e) { this.result = e } then(e) { const t = e && e(this.result); return new n(e => e(t)) } } t.SyncPromise = n }, function (e) { e.exports = JSON.parse('{"render":{"cid":"73636"},"tap":{"cid":"73602"},"hover":{"cid":"73603"},"select_text_fragment":{"cid":"73604"},"copy_text_selection":{"cid":"73605"},"lang_swap":{"cid":"73192","mid":"LANGSELECT_FLIP"},"cols_sync":{"cid":"73333","mid":"COLLECTIONS_SYNC"},"cols_record_add":{"cid":"73282","mid":"COLLECTIONS_RECORD_ADD"},"cols_record_delete":{"cid":"73283","mid":"COLLECTIONS_RECORD_DELETE"},"cols_record_insert":{"cid":"73287","mid":"COLLECTIONS_RECORD_INSERT"},"cols_records_delete":{"cid":"73284","mid":"COLLECTIONS_RECORDS_DELETE"},"cols_records_move":{"cid":"73285","mid":"COLLECTIONS_RECORDS_MOVE"},"cols_records_copy":{"cid":"73286","mid":"COLLECTIONS_RECORDS_COPY"},"cols_open":{"cid":"73288","mid":"COLLECTIONS_OPEN"},"cols_create":{"cid":"73289","mid":"COLLECTIONS_CREATE"},"cols_create_tap":{"cid":"74056","mid":"COLLECTIONS_CREATE_TAP"},"cols_rename":{"cid":"73290","mid":"COLLECTIONS_RENAME"},"cols_delete":{"cid":"73291","mid":"COLLECTIONS_DELETE"},"cols_clear":{"cid":"73810","mid":"COLLECTIONS_CLEAR"},"cols_public_change":{"cid":"73292","mid":"COLLECTIONS_PUBLIC_CHANGE"},"cols_subscribe":{"cid":"73293","mid":"COLLECTIONS_SUBSCRIBE"},"cols_subscribe_limit":{"cid":"73293"},"cols_unsubscribe":{"cid":"73294","mid":"COLLECTIONS_UNSUBSCRIBE"},"cols_save":{"cid":"73295","mid":"COLLECTIONS_SAVE"},"cols_search_activate":{"cid":"73296","mid":"COLLECTIONS_SEARCH_ACTIVATE"},"cols_menu_open":{"cid":"73297","mid":"COLLECTIONS_MENU_OPEN"},"cols_link_copy":{"cid":"73298","mid":"COLLECTIONS_LINK_COPY"},"cols_link_share":{"cid":"73299","mid":"COLLECTIONS_LINK_SHARE"},"cols_sharing_subscribe":{"cid":"73300","mid":"COLLECTIONS_SHARING_SUBSCRIBE"},"cols_db_error":{"cid":"73301","mid":"COLLECTIONS_DB_ERROR"},"cols_db_error_excp":{"cid":"73306","mid":"COLLECTIONS_DB_ERROR_EXCP"},"cols_db_inactive_tap":{"cid":"74057","mid":"COLLECTIONS_DB_INACTIVE_TAP"},"cols_no_col_for_active_id":{"cid":"73578"},"cols_reseted_ids":{"cid":"73361","mid":"COLLECTIONS_RESETED_IDS"},"cols_db_index_not_found":{"cid":"73954"},"training_open":{"cid":"73302","mid":"TRAINING_OPEN"},"training_settings_open":{"cid":"73303","mid":"TRAINING_SETTINGS_OPEN"},"training_progress_reset":{"cid":"73304","mid":"TRAINING_PROGRESS_RESET"},"training_swipe":{"cid":"73305"},"training_exit":{"cid":"73844","mid":"TRAINING_EXIT"},"training_end":{"cid":"73845","mid":"TRAINING_END"},"training_check_good":{"cid":"73847"},"training_check_bad":{"cid":"73848"},"training_level_changed":{"cid":"73883","mid":"TRAINING_LEVEL_CHANGED"},"training_skip":{"cid":"73882"},"training_started":{"cid":"74082","mid":"TRAINING_STARTED"},"training_revert":{"cid":"74070","mid":"TRAINING_REVERT"},"training_revert_banner_shown":{"cid":"74079","mid":"TRAINING_REVERT_BANNER_SHOWN"},"training_onboarding_shown":{"cid":"74078","mid":"TRAINING_ONBOARDING_SHOWN"},"training_revert_click_onboarding":{"cid":"74080","mid":"TRAINING_REVERT_CLICK_ONBOARDING"},"training_revert_click_banner":{"cid":"74081","mid":"TRAINING_REVERT_CLICK_BANNER"},"yata_init":{"cid":"73462","mid":"YATA_INIT"},"langselect_open_src":{"cid":"73465","mid":"LANGSELECT_OPEN_SRC"},"langselect_open_dst":{"cid":"73465","mid":"LANGSELECT_OPEN_DST"},"touch_langselect_open":{"cid":"73465","mid":"TOUCH_LANGSELECT_OPEN"},"langselect_select_src":{"cid":"73466","mid":"LANGSELECT_SELECT_SRC"},"langselect_select_dst":{"cid":"73466","mid":"LANGSELECT_SELECT_DST"},"langselect_recent_select_src":{"cid":"73466","mid":"LANGSELECT_RECENT_SELECT_SRC"},"langselect_recent_select_dst":{"cid":"73466","mid":"LANGSELECT_RECENT_SELECT_DST"},"touch_langselect_select":{"cid":"73466","mid":"TOUCH_LANGSELECT_SELECT"},"langselect_pin":{"cid":"73467","mid":"LANGSELECT_PIN"},"langselect_unpin":{"cid":"73467","mid":"LANGSELECT_UNPIN"},"text_translate":{"cid":"74058","mid":"TEXT_TRANSLATE"},"text_delete":{"cid":"73468","mid":"TEXT_DELETE"},"text_search":{"cid":"73471","mid":"TEXT_SEARCH"},"text_copy":{"cid":"73469","mid":"TEXT_COPY"},"text_select":{"cid":"73470","mid":"TEXT_SELECT"},"text_paste":{"cid":"73472","mid":"TEXT_PASTE"},"text_paste_button":{"cid":"74186","mid":"TEXT_PASTE_BUTTON"},"text_download":{"cid":"73473","mid":"TEXT_DOWNLOAD"},"url_translate":{"cid":"73535","mid":"URL_TRANSLATE"},"url_translate_enter":{"cid":"73535","mid":"URL_TRANSLATE_ENTER"},"url_translate_error":{"cid":"74186"},"url_translation_error":{"cid":"73536","mid":"URL_ERROR"},"url_loading_error":{"cid":"74022","mid":"URL_LOADING_ERROR"},"url_delete":{"cid":"73537","mid":"URL_DELETE"},"url_open_orig_in_new_tab":{"cid":"73881","mid":"URL_OPEN_ORIG_IN_NEW_TAB"},"url_loading_time":{"cid":"74095"},"url_translation_time":{"cid":"74096"},"url_dom_not_loaded":{"cid":"74098","mid":"URL_DOM_NOT_LOADED"},"url_error":{"cid":"74099","mid":"URL_FRAME_ERROR"},"touch_url_translate_error":{"cid":"74146","mid":"TOUCH_URL_TRANSLATE_ERROR"},"touch_url_frame_error":{"cid":"74145","mid":"TOUCH_URL_FRAME_ERROR"},"syns_insert":{"cid":"73474","mid":"SYNONYMS_INSERT"},"suggestions_show":{"cid":"73798"},"suggestions_apply":{"cid":"73803"},"suggestions_item_navigate":{"cid":"73805"},"suggestions_item_hover":{"cid":"73800"},"predictor_show":{"cid":"73481"},"predictor_apply":{"cid":"73482","mid":"PREDICTOR_APPLY"},"dst_predictor_show":{"cid":"73585"},"dst_predictor_apply":{"cid":"73586"},"speller_autocorrect":{"cid":"74060","mid":"SPELLER_AUTOCORRECT"},"speller_click":{"cid":"73476","mid":"SPELLER_CLICK"},"speller_apply":{"cid":"73477","mid":"SPELLER_APPLY"},"speller_accept":{"cid":"73478","mid":"SPELLER_ACCEPT"},"speller_decline":{"cid":"73479","mid":"SPELLER_DECLINE"},"speller_switch_on":{"cid":"73480","mid":"SPELLER_SWITCH_ON"},"speller_switch_off":{"cid":"73480","mid":"SPELLER_SWITCH_OFF"},"tts_play":{"cid":"73483","mid":"TTS_PLAY"},"tts_error":{"cid":"73484","mid":"TTS_ERROR"},"touch_tts_animated_tap":{"cid":"73580","mid":"TOUCH_TTS_ANIMATED_TAP"},"translation_error":{"cid":"73486"},"translation_complain":{"cid":"73487","mid":"TRANSLATION_COMPLAIN"},"translation_edit":{"cid":"73488","mid":"TRANSLATION_EDIT"},"translation_edit_open":{"cid":"73489","mid":"TRANSLATION_EDIT_OPEN"},"translation_edit_close":{"cid":"73490","mid":"TRANSLATION_EDIT_CLOSE"},"asr_start":{"cid":"73491","mid":"ASR_START"},"asr_stop":{"cid":"73492","mid":"ASR_STOP"},"asr_error":{"cid":"73493","mid":"ASR_ERROR"},"asr_recognize":{"cid":"73494"},"touch_asr_disabled_tap":{"cid":"73495","mid":"TOUCH_ASR_DISABLED_TAP"},"rubber_scrolled":{"cid":"73599"},"dict_complain":{"cid":"73496","mid":"DICT_COMPLAIN"},"dict_complain_open":{"cid":"73497","mid":"DICT_COMPLAIN_OPEN"},"dict_complain_close":{"cid":"73497","mid":"DICT_COMPLAIN_CLOSE"},"dict_show":{"cid":"73499","mid":"DICT_SHOW"},"dict_popup_show":{"cid":"73499","mid":"DICT_POPUP_SHOW"},"examples_request":{"cid":"74186"},"examples_src_text_input":{"cid":"74186"},"examples_src_text_delete":{"cid":"74186"},"examples_rendered":{"cid":"73568","mid":"EXAMPLES_RENDERED"},"examples_popup_rendered":{"cid":"73568","mid":"EXAMPLES_POPUP_RENDERED"},"examples_complaint":{"cid":"73955","mid":"EXAMPLES_COMPLAINT"},"examples_complaint_start":{"cid":"73956","mid":"EXAMPLES_COMPLAINT_START"},"dict_link_click":{"cid":"73501","mid":"DICT_LINK_CLICK"},"definition_rendered":{"cid":"74186","mid":"DEFINITION_RENDERED"},"abbr_switched":{"cid":"74186","mid":"ABBR_SWITCHED"},"definition_source_click":{"cid":"74186","mid":"DEFINITION_SOURCE_CLICK"},"settings_open":{"cid":"73503","mid":"OPTIONS_OPEN"},"settings_onload":{"cid":"73504"},"settings_auto_click":{"cid":"73505","mid":"OPTIONS_CLICK_AUTO"},"settings_enter_click":{"cid":"73505","mid":"OPTIONS_CLICK_SHIFT"},"settings_hotkeys_click":{"cid":"73505","mid":"OPTIONS_CLICK_SHIFT"},"settings_autocorrect_click":{"cid":"73505","mid":"OPTIONS_CLICK_SPELLER"},"settings_theme_change":{"cid":"73505","mid":"THEME_CHANGE"},"keyboard_open":{"cid":"73506","mid":"KEYBOARD_OPEN"},"keyboard_close":{"cid":"73506","mid":"KEYBOARD_CLOSE"},"sharing_open":{"cid":"73507","mid":"SHARING_OPEN"},"sharing_share_vkontakte":{"cid":"73508","mid":"SHARING_SHARE_VKONTAKTE"},"sharing_share_odnoklassniki":{"cid":"73508","mid":"SHARING_SHARE_ODNOKLASSNIKI"},"sharing_share_mail":{"cid":"73508","mid":"SHARING_SHARE_MAIL"},"stat_searchapp":{"cid":"73672"},"sharing_input_click":{"cid":"73509","mid":"SHARING_INPUT_CLICK"},"sharing_copy_click":{"cid":"73509","mid":"SHARING_COPY_CLICK"},"touch_ocr_open":{"cid":"73459","mid":"TOUCH_OCR_OPEN"},"touch_ocr_autoinit":{"cid":"73263","mid":"TOUCH_OCR_AUTOINIT"},"touch_ocr_tap":{"cid":"73687","mid":"TOUCH_OCR_TAP"},"touch_ocr_disabled_tap":{"cid":"73460","mid":"TOUCH_OCR_DISABLED_TAP"},"ocr_load_image":{"cid":"73513","mid":"OCR_LOAD_IMAGE"},"ocr_recognize":{"cid":"73514","mid":"OCR_RECOGNIZE"},"ocr_select_area":{"cid":"73516","mid":"OCR_SELECT_AREA"},"ocr_box_tap":{"cid":"73517","mid":"OCR_BOX_TAP"},"ocr_translation_navigate":{"cid":"73518","mid":"OCR_TRANSLATION_NAVIGATE"},"touch_ocr_image_select":{"cid":"73519","mid":"TOUCH_OCR_IMAGE_SELECT"},"touch_ocr_rotation_apply":{"cid":"73521","mid":"TOUCH_OCR_ROTATION_APPLY"},"touch_ocr_download_image":{"cid":"73696","mid":"TOUCH_OCR_DOWNLOAD_IMAGE"},"touch_ocr_card_show":{"cid":"73522","mid":"TOUCH_OCR_CARD_SHOW"},"touch_ocr_card_hide":{"cid":"74186"},"touch_ocr_card_tts_play":{"cid":"73523","mid":"TOUCH_OCR_CARD_TTS_PLAY"},"touch_ocr_card_tts_error":{"cid":"73524","mid":"TOUCH_OCR_CARD_TTS_ERROR"},"touch_ocr_card_tts_disabled_tap":{"cid":"73525","mid":"TOUCH_OCR_CARD_TTS_DISABLED_TAP"},"touch_ocr_card_copy_dst":{"cid":"74186"},"ocr_refresh_alert_show":{"cid":"73526","mid":"OCR_REFRESH_ALERT_SHOW"},"ocr_refresh_alert_click":{"cid":"73527","mid":"OCR_REFRESH_ALERT_CLICK"},"ocr_image_zoom_in":{"cid":"73528","mid":"OCR_IMAGE_ZOOM_IN"},"ocr_image_zoom_out":{"cid":"73528","mid":"OCR_IMAGE_ZOOM_OUT"},"ocr_move":{"cid":"73529","mid":"OCR_MOVE"},"ocr_delete":{"cid":"73530","mid":"OCR_DELETE"},"ocr_contrast_enable":{"cid":"74071","mid":"OCR_CONTRAST_ENABLE"},"ocr_contrast_disable":{"cid":"74071","mid":"OCR_CONTRAST_DISABLE"},"ocr_align_change":{"cid":"74072","mid":"OCR_ALIGN_CHANGE"},"ocr_orig_show":{"cid":"74073","mid":"OCR_ORIG_SHOW"},"ocr_orig_hide":{"cid":"74073","mid":"OCR_ORIG_HIDE"},"ocr_rotate":{"cid":"74074","mid":"OCR_ROTATE"},"ocr_download":{"cid":"74075","mid":"OCR_DOWNLOAD"},"resizer_resize":{"cid":"73532","mid":"RESIZER_RESIZE"},"url_page_interaction":{"cid":"73533","mid":"URL_PAGE_INTERACTION"},"footer_promo_close":{"cid":"73539","mid":"FOOTER_PROMO_CLOSE"},"url_mode_changed_s":{"cid":"73540","mid":"WINDOW_MODE_ORIGINAL"},"url_mode_changed_t":{"cid":"73540","mid":"WINDOW_MODE_TRANSLATION"},"url_popup_expand":{"cid":"73542","mid":"TR_POPUP_EXPAND"},"url_popup_send":{"cid":"73543","mid":"TR_POPUP_SEND"},"url_popup_close":{"cid":"73544","mid":"TR_POPUP_CLOSE"},"url_popup_dislike":{"cid":"74151","mid":"TR_POPUP_DISLIKE"},"document_upload_tap":{"cid":"73674","mid":"DOCUMENT_UPLOAD_TAP"},"document_download_tap":{"cid":"73694","mid":"DOCUMENT_DOWNLOAD_TAP"},"document_translate":{"cid":"73675","mid":"DOCUMENT_TRANSLATE"},"size_error":{"cid":"73676","mid":"DOCUMENT_SIZE_ERROR"},"convert_error":{"cid":"73677","mid":"DOCUMENT_CONVERT_ERROR"},"document_error":{"cid":"73677","mid":"DOCUMENT_ERROR"},"document_download_error":{"cid":"73695","mid":"DOCUMENT_DOWNLOAD_ERROR"},"doc_mode_changed_t":{"cid":"73678","mid":"DOCUMENT_MODE_TRANSLATION"},"doc_layout_changed_s":{"cid":"73682","mid":"DOCUMENT_LAYOUT_OVERLAPPED"},"doc_layout_changed_v":{"cid":"73682","mid":"DOCUMENT_LAYOUT_VERTICAL"},"doc_layout_changed_h":{"cid":"73682","mid":"DOCUMENT_LAYOUT_HORIZONTAL"},"doc_popup_expand":{"cid":"73679","mid":"DOCUMENT_POPUP_EXPAND"},"doc_popup_send":{"cid":"73680","mid":"DOCUMENT_POPUP_SEND"},"doc_popup_close":{"cid":"73681","mid":"DOCUMENT_POPUP_CLOSE"},"refresh_alert_show":{"cid":"73545","mid":"REFRESH_ALERT_SHOW"},"refresh_alert_click":{"cid":"73546","mid":"REFRESH_ALERT_CLICK"},"session_resume":{"cid":"73547"},"visibility_change":{"cid":"73600"},"history_move":{"cid":"73635"},"storage_error":{"cid":"73548","mid":"STORAGE_ERROR"},"alt_translate_google":{"cid":"73549","mid":"ALTERNATIVE_TRANSLATE_GOOGLE"},"translit_button_show":{"cid":"73550","mid":"TRANSLIT_BUTTON_SHOW"},"translit_show":{"cid":"73551","mid":"TRANSLIT_SHOW"},"translit_hide":{"cid":"73551","mid":"TRANSLIT_HIDE"},"translit_error":{"cid":"73552","mid":"TRANSLIT_ERROR"},"translation_vote_good":{"cid":"73553","mid":"TRANSLATION_VOTE_GOOD"},"translation_vote_bad":{"cid":"73553","mid":"TRANSLATION_VOTE_BAD"},"touch_webapp_prompt_show":{"cid":"73554","mid":"TOUCH_WEBAPP_PROMPT_SHOW"},"touch_webapp_prompt_install":{"cid":"73555","mid":"TOUCH_WEBAPP_PROMPT_INSTALL"},"touch_webapp_prompt_dismiss":{"cid":"73556","mid":"TOUCH_WEBAPP_PROMPT_DISMISS"},"corpus_request":{"cid":"73557","mid":"CORPUS_REQUEST"},"page_load":{"cid":"73558"},"landing_lyrics_load":{"cid":"73584"},"landing_lyrics_translate_button_click":{"cid":"73583"},"popup_show":{"cid":"73560","mid":"POPUP_SHOW"},"popup_empty_show":{"cid":"73560","mid":"POPUP_EMPTY_SHOW"},"popup_close":{"cid":"73560","mid":"POPUP_CLOSE"},"examples_hide":{"cid":"73562","mid":"EXAMPLES_HIDE"},"example_tab_click":{"cid":"73563","mid":"EXAMPLE_TAB_CLICK"},"example_sound":{"cid":"73566","mid":"EXAMPLE_SOUND_CLICK"},"example_origin_show":{"cid":"73564","mid":"EXAMPLE_ORIGIN_SHOW"},"touch_tab_click":{"cid":"73639","mid":"TOUCH_TAB_CLICK"},"select_tooltip_show":{"cid":"73565","mid":"SELECT_TOOLTIP_SHOW"},"auto_play_text":{"cid":"73593","mid":"AUTO_PLAY_TEXT"},"touch_landing_show":{"cid":"73697","mid":"TOUCH_LANDING_SHOW"},"touch_landing_download":{"cid":"73698","mid":"TOUCH_LANDING_DOWNLOAD"},"touch_landing_close":{"cid":"73699","mid":"TOUCH_LANDING_CLOSE"},"touch_landing_close_cross":{"cid":"73708","mid":"TOUCH_LANDING_CLOSE_CROSS"},"touch_dialog_tap":{"cid":"73686","mid":"TOUCH_DIALOG_TAP"},"touch_dialog_disabled_tap":{"cid":"73686","mid":"TOUCH_DIALOG_DISABLED_TAP"},"dist_banner_render":{"cid":"73692","mid":"SHOW_DIST_BANNER"},"dist_banner_hide":{"cid":"73743","mid":"AUTO_HIDE_DIST_BANNER"},"history_setting_enabled":{"cid":"74063","mid":"HISTORY_SETTING_ENABLED"},"history_setting_disabled":{"cid":"74064","mid":"HISTORY_SETTING_DISABLED"},"tap_miss":{"cid":"73700","mid":"TAP_MISS"},"uniproxy_asr_error":{"cid":"73710","mid":"UNIPROXY_ASR_ERROR"},"uniproxy_tts_error":{"cid":"73711","mid":"UNIPROXY_TTS_ERROR"},"typing_speed_report":{"cid":"73797"},"history_open":{"cid":"73811","mid":"HISTORY_OPEN"},"history_select":{"cid":"73812","mid":"HISTORY_SELECT"},"focused_element_activation":{"cid":"73880","mid":"FOCUSED_ELEMENT_ACTIVATION"},"example_link_click":{"cid":"74065","mid":"EXAMPLE_LINK_CLICK"},"example_tab_word_click":{"cid":"74067","mid":"EXAMPLE_TAB_WORD_CLICK"},"dict_show_more":{"cid":"74068","mid":"DICT_SHOW_MORE"},"idioms_complaint_click":{"cid":"74084","mid":"IDIOMS_COMPLAINT_CLICK"},"idioms_complaint_send":{"cid":"74085","mid":"IDIOMS_COMPLAINT_SEND"},"idioms_rendered":{"cid":"74086","mid":"IDIOMS_RENDERED"},"idioms_text_click":{"cid":"74087","mid":"IDIOMS_TEXT_CLICK"},"idiom_example_popup_open":{"cid":"74088","mid":"IDIOM_EXAMPLE_POPUP_OPEN"},"touch_idiom_text_expand":{"cid":"74089","mid":"TOUCH_IDIOM_TEXT_EXPAND"},"related_words_render":{"cid":"74090","mid":"RELATED_WORDS_RENDER"},"related_words_click":{"cid":"74091","mid":"RELATED_WORDS_CLICK"},"related_words_expand":{"cid":"74092","mid":"RELATED_WORDS_EXPAND"},"related_words_complaint_send":{"cid":"74093","mid":"RELATED_WORDS_COMPLAINT_SEND"},"mini_nav_item_click":{"cid":"74186","mid":"MINI_NAV_ITEM_CLICK"},"mini_nav_control_click":{"cid":"74186","mid":"MINI_NAV_CONTROL_CLICK"},"declensions_render":{"cid":"74101","mid":"DECLENSIONS_RENDER"},"declensions_click":{"cid":"74102","mid":"DECLENSIONS_CLICK"},"declensions_complaint_send":{"cid":"74103","mid":"DECLENSIONS_COMPLAINT_SEND"},"declensions_expand":{"cid":"74104","mid":"DECLENSIONS_EXPAND"},"declensions_tab_click":{"cid":"74186","mid":"DECLENSIONS_TAB_CLICK"},"declensions_list_scroll":{"cid":"74186","mid":"DECLENSIONS_LIST_SCROLL"},"touch_night_theme_user_activation":{"cid":"74140","mid":"TOUCH_DARK_THEME_USER_ACTIVATION"},"touch_night_theme_auto_activation":{"cid":"74141","mid":"TOUCH_DARK_THEME_AUTO_ACTIVATION"},"touch_nav_tab_activation":{"cid":"74184","mid":"TOUCH_NAV_TAB_ACTIVATION"},"touch_history_collection_open":{"cid":"74186","mid":"TOUCH_HISTORY_COLLECTION_OPEN"},"touch_favorites_collection_open":{"cid":"74186","mid":"TOUCH_FAVORITES_COLLECTION_OPEN"},"example_scroll_control_click":{"cid":"74186","mid":"EXAMPLE_SCROLL_CONTROL_CLICK"},"example_ref_click":{"cid":"74186","mid":"EXAMPLE_REF_CLICK"},"theme_page_open":{"mid":"THEME_PAGE_OPEN"},"speller_popup_shown":{"cid":"74186"},"speller_popup_close_click":{"cid":"74186"},"tts_play_src":{"cid":"74186","mid":"TTS_PLAY_SRC"},"tts_play_dst":{"cid":"74186","mid":"TTS_PLAY_DST"},"examples_show_more":{"cid":"74186","mid":"EXAMPLES_SHOW_MORE"},"langselect_search_button_click":{"cid":"74186","mid":"LANGSELECT_SEARCH_BUTTON_CLICK"},"langselect_search_type":{"cid":"74186","mid":"LANGSELECT_SEARCH_TYPE"},"document_reset_doc":{"cid":"74186","mid":"DOCUMENT_RESET_DOC"},"sid_fetched":{"cid":"74186"},"tts_stop_src":{"cid":"74186","mid":"TTS_STOP_SRC"},"tts_stop_dst":{"cid":"74186","mid":"TTS_STOP_DST"},"document_translated":{"cid":"74186","mid":"DOCUMENT_TRANSLATED"},"selection_promo_show":{"cid":"74186","mid":"SELECTION_POPUP_SHOW"},"first_translation_request":{"cid":"74186"},"first_translation_response":{"cid":"74186"},"selection_sheet_expand":{"cid":"74186"},"selection_sheet_syn_click":{"cid":"74186"},"daily_phrase_activate":{"cid":"74186"},"stories_open":{"cid":"74186"},"stories_activate":{"cid":"74186"},"stories_move":{"cid":"74186"},"stories_close":{"cid":"74186"},"stories_feedback":{"cid":"74186"},"stories_rendered":{"cid":"74186"},"stories_desktop_preview_move":{"cid":"74186"},"stories_touch_preview_visible":{"cid":"74186"},"feedback_show":{"cid":"74186"},"feedback_vote":{"cid":"74186"},"feedback_send":{"cid":"74186"},"feedback_cancel":{"cid":"74186"},"feedback_close":{"cid":"74186"},"feedback_promo":{"cid":"74186"},"scroll_to_top":{"cid":"74186","mid":"SCROLL_TO_TOP"},"sticky_header_open_menu":{"cid":"74186"},"backspace_pressed":{"cid":"74186"},"keyboard_closed":{"cid":"74186"},"definition_complaint_send":{"cid":"74186"},"hotkeys_cheat_sheet_open":{"cid":"74186"},"hotkey_used":{"cid":"74186"},"block_visible":{"cid":"74186"},"ocr_complaint_send":{"cid":"74186"},"ocr_complaint_open":{"cid":"74186"},"ocr_complaint_image_send":{"cid":"74186"},"ocr_url_invalid":{"cid":"74186"},"ocr_url_error":{"cid":"74186"},"antirobot_ajax_captcha":{"cid":"74186"},"seo_dump_used":{"cid":"74186"},"text_copy_src":{"cid":"74186","mid":"TEXT_COPY_SRC"},"text_select_src":{"cid":"74186","mid":"TEXT_SELECT_SRC"},"text_download_src":{"cid":"74186","mid":"TEXT_DOWNLOAD_SRC"},"touch_dialog_open":{"cid":"74186","mid":"TOUCH_DIALOG_OPEN"},"show_sidebar_ad":{"cid":"74186","mid":"SHOW_SIDEBAR_AD"},"close_sidebar_ad":{"cid":"74186","mid":"CLOSE_SIDEBAR_AD"},"show_dictionary_ad":{"cid":"74186","mid":"SHOW_DICTIONARY_AD"},"close_dictionary_ad":{"cid":"74186","mid":"CLOSE_DICTIONARY_AD"},"show_top_ad":{"cid":"74186"},"show_main_ad":{"cid":"74186","mid":"SHOW_MAIN_AD"},"close_main_ad":{"cid":"74186","mid":"CLOSE_MAIN_AD"},"popup_synonyms_click":{"cid":"74186","mid":"POPUP_SYNONYMS_CLICK"},"popup_dictionary_click":{"cid":"74186","mid":"POPUP_DICTIONARY_CLICK"},"popup_examples_click":{"cid":"74186","mid":"POPUP_EXAMPLES_CLICK"},"popup_separate_tab_button_click":{"cid":"74186","mid":"POPUP_SEPARATE_TAB_BUTTON_CLICK"},"popup_copy_button_click":{"cid":"74186","mid":"POPUP_COPY_BUTTON_CLICK"},"popup_tab_select":{"cid":"74186","mid":"POPUP_TAB_SELECT"},"synonyms_popup_rendered":{"cid":"74186","mid":"SYNONYMS_POPUP_RENDERED"},"definition_card_visible":{"cid":"74186"},"dst_ocr_visible":{"cid":"74186"},"screen_keyboard_keydown":{"cid":"74186"},"screen_keyboard_special_keydown":{"cid":"74186"},"close_bottom_ad":{"cid":"74186"},"show_bottom_ad":{"cid":"74186"},"show_bottom_textarea_ad":{"cid":"74186"},"ocr_image_collecting_success":{"cid":"74186"},"ocr_image_collecting_failure":{"cid":"74186"},"dst_carousel_button_click":{"cid":"74186"},"dst_carousel_card_activate":{"cid":"74186"},"dst_carousel_card_visible":{"cid":"74186"},"check_adblock":{"cid":"74186"},"tts_popup_stop":{"cid":"74186"},"tts_popup_play":{"cid":"74186"},"smooth_lang_detect_show":{"cid":"74186"},"tts_popup_error":{"cid":"74186"},"show_popular_translations":{"cid":"74186"},"click_popular_translation":{"cid":"74186"},"click_locales_navigation":{"cid":"74186"},"ocr_url_drop_error":{"cid":"74186"},"lang_select_auto":{"cid":"74186"},"promo_block_visible":{"cid":"74186"},"gpt_suggests_show":{"cid":"74186"},"gpt_suggest_click":{"cid":"74186"},"gpt_separate_editor_navigate":{"cid":"74186"},"gpt_cancel_fetching":{"cid":"74186"},"gpt_cancel_after_error":{"cid":"74186"},"gpt_cancel_after_result":{"cid":"74186"},"gpt_repeat":{"cid":"74186"},"gpt_retry":{"cid":"74186"},"gpt_apply":{"cid":"74186"},"gpt_negative_diff_show":{"cid":"74186"},"gpt_result_show":{"cid":"74186"},"gpt_fetching_error":{"cid":"74186"},"editor_langselect_click":{"cid":"74186"},"editor_copy_input_click":{"cid":"74186"},"editor_clear_input_click":{"cid":"74186"},"editor_copy_input_action":{"cid":"74186"},"editor_set_autofix_errors_toggle":{"cid":"74186"},"editor_set_show_translation_toggle":{"cid":"74186"},"editor_undo_btn_click":{"cid":"74186"},"editor_redo_btn_click":{"cid":"74186"},"editor_undo_action":{"cid":"74186"},"editor_redo_action":{"cid":"74186"},"editor_translation_click":{"cid":"74186"},"editor_input_start":{"cid":"74186"},"editor_gpt_suggest_click":{"cid":"74186"},"editor_synonyms_popup_load_success":{"cid":"74186"},"editor_synonyms_popup_tag_click":{"cid":"74186"},"editor_synonyms_popup_expand_click":{"cid":"74186"},"editor_synonyms_popup_close":{"cid":"74186"},"editor_gpt_result_show":{"cid":"74186"},"editor_gpt_fetching_error":{"cid":"74186"},"editor_gpt_repeat":{"cid":"74186"},"editor_gpt_retry":{"cid":"74186"},"editor_gpt_apply":{"cid":"74186"},"editor_diff_popup_close":{"cid":"74186"},"editor_autodetect_action":{"cid":"74186"},"editor_spellcheck_autofix_action":{"cid":"74186"},"editor_spellcheck_popup_fix_btn_click":{"cid":"74186"},"editor_spellcheck_popup_skip_btn_click":{"cid":"74186"},"session_storage_quota_error":{"cid":"74186"}}') }, function (e, t, i) { "use strict"; t.__esModule = !0, t.BaseApplication = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(3), r = i(7), a = i(15), d = i(21); class c extends d.Presenter { constructor(e = {}) { super(e), this._activeModules = [], this._config = e.config, this.tracker = o.$tracker; const t = this, i = this.getView(), n = function (e) { if ("hidden" in document) return "hidden"; for (let t = 0; t < e.length; t++) { const i = e[t] + "Hidden"; if (i in document) return i } return "" }(["webkit", "moz", "ms", "o"]), a = s.default.debounce((function () { t.emit("resize") })), d = () => { i.setState("unresolved", !1), t.emit("pageReady") }; "loading" === document.readyState ? document.addEventListener("DOMContentLoaded", d, !1) : setTimeout(d, 0), window.addEventListener("load", (function e() { window.addEventListener("online", t.updateOnlineStatus.bind(t, !1)), window.addEventListener("offline", t.updateOnlineStatus.bind(t, !1)), t.checkAdblock(), t.emit("pageLoaded"), this.removeEventListener("load", e, !1) }), !1), window.addEventListener("resize", a, !1), window.addEventListener("orientationchange", a, !1), window.addEventListener("scroll", s.default.throttle((function () { t.emit("bodyScroll") }))), n && document.addEventListener(n.replace(/hidden/i, "") + "visibilitychange", (function () { o.$tracker.sendMetric("visibility_change", { hidden: document[n] }) }), !1), i.on("tap", (function (e) { const i = this.getClosest(e.target, (function (e) { return e.hasAttribute("data-action") })), n = this.getClosest(e.target, (function (e) { return e.hasAttribute("data-tracker-goal") })); try { (0, r.setLatestTapEvent)(e, e.target, i) } catch (e) { } if (i) { const n = i.getAttribute("data-action"); i.hasAttribute("data-no-prevent") || s.default.preventEvent(e), t.emit("action", n, i, { originalEvent: e }).emit("action:" + n, i, { originalEvent: e }) } n && t.emit("track", n.getAttribute("data-tracker-goal")), (0, r.isPrevTapMiss)() && t.emit("prevTapMiss") })), this.updateOnlineStatus(!0) } getConfig() { return this._config } getExpFlags() { const e = this.getConfig().EXP_FLAGS || {}; return e.log_exp_flags ? Object.keys(e).filter(t => e[t]) : [] } registerModule(e) { const t = Date.now(), i = new e(this, this.getConfig()); return a.logTime.module(i.moduleName || i.moduleId, Date.now() - t), this._activeModules.push(i), this } reload() { if (this.getSettings()) { const e = this.getModel().getProperty("trText"); this.getSettings().setProperty("savedText", e) } window.location.href = window.location.href } reloadIfSessionExpired() { Date.now() - c.SESSION_START > c.SESSION_EXPIRATION_TIME && this.reload() } checkAdblock() { const e = document.querySelector(".advblock"); if (e) { const t = "none" === window.getComputedStyle(e).display; this.emit("adBlockChecked", t) } } updateOnlineStatus(e = !1) { this.getModel().setProperty("appOnline", s.default.isOnline(), { silent: e }) } getSettings() { return this._settings } } t.BaseApplication = c, c.SESSION_START = Date.now(), c.SESSION_EXPIRATION_TIME = 2592e5 }, function (e, t, i) { "use strict"; t.__esModule = !0, t.LANG_SELECT_EVENTS = t.HIGHLIGHT_ATTR = t.DesktopLanguagesModule = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(2), r = i(107), a = i(8), d = i(32), c = i(110); t.LANG_SELECT_EVENTS = { LANG_SELECTED: "langSelected", OPEN_LANG_SELECT: "openLangSelect", LANG_SELECT_EXPANDED: "langSelectExpanded" }; t.HIGHLIGHT_ATTR = "data-highlighted"; class l extends r.AbstractLanguagesModule { constructor(e, t) { super(e, t), this.srcLangButton = this.isEnableReactLangPanel ? null : this.makeSrcLangButton(), this.dstLangButton = this.isEnableReactLangPanel ? null : this.makeDstLangButton(), this.resetText(), this.resetText = s.default.debounce(this.resetText, 100), this.debouncedSetInputFocus = this.debounceMethod(() => this.view.setInputFocus(), 100), this.visibilityTimeout = null, this.savedViewportWidth = document.documentElement.clientWidth, this.isEnableReactLangPanel || (this.setupLangButtons(), this.listenAppModel()), this.setupAppView(), this.listenApp(), this.listenAppView() } setupAppView() { this.appView.setState("auto", this.appSettings.isAutodetectEnabled()) } setupLangButtons() { const e = (e, t) => { this.appSettings.setProperty(e, t), this.appModel.setProperty(e, t, { sender: "initLanguages" }); (e === a.LANG_PROPS.SRC_LANG ? this.srcLangButton : this.dstLangButton).setTextContent(this.appConfig.TRANSLATOR_LANGS[t]) }; e(a.LANG_PROPS.SRC_LANG, this.app.getDefaultSrcLanguage()), e(a.LANG_PROPS.DST_LANG, this.app.getDefaultDstLanguage()) } closeView() { this.view && (this.view.reset(), this.view.setVisible(!1)) } openLanguagesView(e) { const t = this.view && e !== this.view.getType(), i = this.view && this.view.isVisible(); clearTimeout(this.visibilityTimeout), this.resetText(), super.openLanguagesView(e), i && this.closeView(), t && i ? this.visibilityTimeout = setTimeout(() => { this.activateLanguagesView() }, 250) : i || this.activateLanguagesView() } activateLanguagesView() { this.view.updateAsync.callNow.call(this.view), this.view.setVisible(!0), this.debouncedSetInputFocus() } initInternal() { this.view = this.makeLanguageSelectComponent(), super.initInternal(), this.view.onStateChanged("hidden", e => { const t = this.view.isSrc(); if (this.appView.setState("langs_opened", !e), this.appView.setState("langs_opened_src", t && !e), this.appView.setState("langs_opened_dst", !t && !e), !this.isEnableReactLangPanel) { const i = t ? this.srcLangButton : this.dstLangButton, n = t ? this.dstLangButton : this.srcLangButton; i.setState({ expanded: !e }), n.setState({ expanded: !1 }) } }), this.srcLanguagesModel.onChange("autodetect", e => { this.appView.setState("auto", e), this.app.emit("action:toggleAuto") }) } handleResize() { const e = document.documentElement.clientWidth; e !== this.savedViewportWidth && (this.savedViewportWidth = e, this.closeView()) } listenApp() { this.app.on("resize", () => this.handleResize()).onAction("swapDirection", () => this.app.swapDirection()) } listenAppModel() { this.appModel.onChange(a.LANG_PROPS.SRC_LANG, e => { const t = this.appConfig.TRANSLATOR_LANGS[e]; this.srcLangButton.setTextContent(t).setContentElementAttribute("aria-label", `${d.locales.languageSelect.selectSrcTooltip} ${t}`) }).onChange(a.LANG_PROPS.DST_LANG, e => { const t = this.appConfig.TRANSLATOR_LANGS[e]; this.dstLangButton.setTextContent(t).setContentElementAttribute("aria-label", `${d.locales.languageSelect.selectDstTooltip} ${t}`) }) } listenAppView() { this.appView.onTap(e => { this.isLangSelectNode(e) || this.closeView() }) } isLangButton(e) { return this.isEnableReactLangPanel ? "srcLangButton" === e.id || "dstLangButton" === e.id || "additionalSrcLangButton" === e.id : e === this.appConfig.ELEMENTS.srcLangButton || e === this.appConfig.ELEMENTS.dstLangButton } isLangSelectNode(e) { return !!this.view && (this.view.getElement().contains(e.target) || this.isLangButton(e.target)) } resetText() { return this.view && this.view.reset() } getTranslatorElement() { return this.appConfig.ELEMENTS.translator } makeLanguageSelectComponent() { return new c.LanguagesComponent({ tags: this.appConfig.TRANSLATOR_LANGS_TAGS, langs: this.appConfig.TRANSLATOR_LANGS, srcLang: this.appModel.getProperty(a.LANG_PROPS.SRC_LANG), dstLang: this.appModel.getProperty(a.LANG_PROPS.DST_LANG), translatorElement: this.getTranslatorElement(), appView: this.appView }, { container: this.appConfig.ELEMENTS.langSelect, hideAfterTransition: !0 }) } makeSrcLangButton() { return new o.TouchView({ element: this.appConfig.ELEMENTS.srcLangButton, DOMEvents: "keydown keypress", activateFocus: !0 }) } makeDstLangButton() { return new o.TouchView({ element: this.appConfig.ELEMENTS.dstLangButton, DOMEvents: "keydown keypress", activateFocus: !0 }) } } t.DesktopLanguagesModule = l }, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractLanguagesModule = void 0; var n = i(3), s = i(13), o = i(5), r = i(8), a = i(108), d = i(109), c = i(18); class l extends o.AppModule { constructor(e, t) { super(e, t), this.moduleName = "langs", this.isEnableReactLangPanel = t.SRV === s.TEXT, this.app.onAction(r.LANG_EVENTS.EVENT_OPEN_SRC_LANGUAGES, () => this.openLanguagesView("src")).onAction(r.LANG_EVENTS.EVENT_OPEN_DST_LANGUAGES, () => this.openLanguagesView("dst")).onAction(["swapLang", "swapDirection"], () => { const e = this.appModel.getProps(); n.$tracker.sendMetric("lang_swap", { dir: e.srcLang + "-" + e.dstLang }) }), this.setupLangsHistory() } setupLangsHistory() { const e = this.appSettings.getSrcLangHistory(), t = this.appSettings.getDstLangHistory(); Object.keys(e).length || this.appSettings.setSrcLangHistory({ [this.appConfig.UI_LANG]: !0 }), Object.keys(t).length || this.appSettings.setDstLangHistory({ [this.app.getDefaultDstLanguage()]: !0 }) } openLanguagesView(e) { if (this.view || this.initInternal(), !this.view.isVisible() || e !== this.view.getType()) { const t = "src" === e, i = Date.now(); t ? (this.srcLanguagesModel.setProperty({ languagesOpenAt: i }), this.srcRecentLanguagesModel.setProperty({ languagesOpenAt: i })) : (this.dstLanguagesModel.setProperty({ languagesOpenAt: i }), this.dstRecentLanguagesModel.setProperty({ languagesOpenAt: i })); const s = t ? r.LANG_METRIKAS.OPEN_SRC_SELECT : r.LANG_METRIKAS.OPEN_DST_SELECT; n.$tracker.sendMetric(s) } this.view.setType(e), "src" === e ? this.view.setModel(this.srcLanguagesModel).setRecentLanguagesModel(this.srcRecentLanguagesModel) : this.view.setModel(this.dstLanguagesModel).setRecentLanguagesModel(this.dstRecentLanguagesModel) } initInternal() { this.srcLanguagesModel = new a.LanguagesModel({ languages: c.TranslateApplication.getAllSrcLangs(), currentLanguage: this.appModel.getProperty(r.LANG_PROPS.SRC_LANG), autodetectAllowed: !0, autodetect: this.appSettings.isAutodetectEnabled() }, { filters: this.getSrcLangsModelFilters() }), this.srcLanguagesModel.onChange(r.LANG_PROPS.AUTODETECT, e => this.appSettings.setAutodetectEnabled(e)).onSet(r.LANG_PROPS.CURRENT_LANG, e => { this.app.setSrcLanguage(e, { sender: r.LANG_PROPS.SENDER_LANG_SELECT }), this.srcRecentLanguagesModel.setLanguage(e, { silent: !0 }), this.closeView() }), this.srcRecentLanguagesModel = new d.RecentLanguagesModel({ limit: this.appConfig.MAX_RECENT_LANGUAGES, languages: c.TranslateApplication.getAllSrcLangs(), currentLanguage: this.appModel.getProperty(r.LANG_PROPS.SRC_LANG) }, { filters: this.getSrcLangsModelFilters() }), this.srcRecentLanguagesModel.setRecentLanguages(this.appSettings.getSrcLangHistory()), this.srcRecentLanguagesModel.onChange(r.LANG_PROPS.RECENT_LANGUAGES, () => this.appSettings.setSrcLangHistory(this.srcRecentLanguagesModel.getRecentLanguages())).onChange(r.LANG_PROPS.CURRENT_LANG, e => { this.app.setSrcLanguage(e, { sender: r.LANG_PROPS.SENDER_LANG_HISTORY }), this.closeView() }), this.dstLanguagesModel = new a.LanguagesModel({ languages: c.TranslateApplication.getAllDstLangs(), currentLanguage: this.appModel.getProperty(r.LANG_PROPS.DST_LANG) }), this.dstLanguagesModel.onSet(r.LANG_PROPS.CURRENT_LANG, e => { this.app.setDstLanguage(e, { sender: r.LANG_PROPS.SENDER_LANG_SELECT }), this.dstRecentLanguagesModel.setLanguage(e, { silent: !0 }), this.closeView() }), this.dstRecentLanguagesModel = new d.RecentLanguagesModel({ limit: this.appConfig.MAX_RECENT_LANGUAGES, languages: c.TranslateApplication.getAllDstLangs(), currentLanguage: this.appModel.getProperty(r.LANG_PROPS.DST_LANG) }), this.dstRecentLanguagesModel.setRecentLanguages(this.appSettings.getDstLangHistory()), this.dstRecentLanguagesModel.onChange(r.LANG_PROPS.RECENT_LANGUAGES, () => this.appSettings.setDstLangHistory(this.dstRecentLanguagesModel.getRecentLanguages())).onChange(r.LANG_PROPS.CURRENT_LANG, e => { this.app.setDstLanguage(e, { sender: r.LANG_PROPS.SENDER_LANG_HISTORY }), this.closeView() }), this.view.setModel(this.srcLanguagesModel).setRecentLanguagesModel(this.srcRecentLanguagesModel), this.appModel.onChange(r.LANG_PROPS.SRC_LANG, e => { this.srcLanguagesModel.setLanguage(e), this.srcRecentLanguagesModel.setLanguage(e) }).onChange(r.LANG_PROPS.DST_LANG, e => { this.dstLanguagesModel.setLanguage(e), this.dstRecentLanguagesModel.setLanguage(e) }).onSet("translation", e => { e && (this.srcRecentLanguagesModel.update(), this.dstRecentLanguagesModel.update()) }) } getSrcLangsModelFilters() { return {} } } t.AbstractLanguagesModule = l }, function (e, t, i) { "use strict"; t.__esModule = !0, t.LanguagesModel = void 0, i(1); var n = i(4), s = i(8); class o extends n.Model { getLanguages(e) { const t = this.getProperty(s.LANG_PROPS.ALL_LANGUAGES); return e ? this.findLanguages(t, e) : t } getLanguageMatches(e) { const t = Object.entries(this.getProperty(s.LANG_PROPS.ALL_LANGUAGES)); if (!e) return t; const i = e.length, n = e.trim().toLowerCase(), o = t.reduce((e, [t, s]) => { const o = s.toLowerCase().indexOf(n), r = t.indexOf(n); if (o >= 0) { const n = [t, { name: s, start: o, size: i }]; (0 === o ? e.goodMatches : e.otherMatches).push(n) } else if (r >= 0) { const i = [t, { name: s, start: 0, size: 0 }]; e.otherMatches.push(i) } return e }, { goodMatches: [], otherMatches: [] }); return [...o.goodMatches, ...o.otherMatches] } getLanguageName(e) { return this.getProperty(s.LANG_PROPS.ALL_LANGUAGES)[e] } findLanguages(e, t) { const i = t.length, n = t.trim().toLowerCase(); return Object.keys(e).reduce((t, s) => { const o = e[s].toLowerCase().indexOf(n), r = s.indexOf(n); return o >= 0 ? t[s] = { code: s, name: e[s], start: o, size: i } : r >= 0 && (t[s] = { code: s, name: e[s], start: 0, size: 0 }), t }, {}) } setLanguage(e) { return this.setProperty(s.LANG_PROPS.CURRENT_LANG, e) } getCurrentLanguage() { return this.getProperty(s.LANG_PROPS.CURRENT_LANG) } setAutodetectEnabled(e) { return this.setProperty(s.LANG_PROPS.AUTODETECT, e) } isAutodetectEnabled() { return this.getProperty(s.LANG_PROPS.AUTODETECT) } isAutodetectAllowed() { return this.getProperty("autodetectAllowed") } } t.LanguagesModel = o, o.defaults = { currentLanguage: "", languages: {}, autodetectAllowed: !1, autodetect: !1, languagesOpenAt: 0 } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.RecentLanguagesModel = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(4), r = i(8); class a extends o.Model { setRecentLanguages(e) { return this.setProperty(r.LANG_PROPS.RECENT_LANGUAGES, s.default.safeStringifyJSON(e)) } setLanguage(e, t) { return this.setProperty(r.LANG_PROPS.CURRENT_LANG, e, t) } getLanguage() { return this.getProperty(r.LANG_PROPS.CURRENT_LANG) } getRecentLanguages() { return s.default.safeParseJSON(this.getProperty(r.LANG_PROPS.RECENT_LANGUAGES)) } togglePin(e) { const t = this.getRecentLanguages(); return t.hasOwnProperty(e) && (t[e] = !t[e], this.setRecentLanguages(t)), this } getLanguageName(e) { return this.getProperty("languages")[e] } update() { let e = this.getProperty("limit"); const t = this.getRecentLanguages(), i = this.getLanguage(), n = {}, s = [], o = []; if (t[i]) return; if (Object.keys(t).forEach((function (e) { t[e] ? s.push(e) : o.push(e) })), e -= s.length, e <= 0) return; const r = o.indexOf(i); r >= 0 && o.splice(r, 1), o.unshift(i) > e && (o.length = e), s.forEach((function (e) { n[e] = !0 })), o.forEach((function (e) { n[e] = !1 })), this.setRecentLanguages(n) } } t.RecentLanguagesModel = a, a.defaults = { limit: 20, language: "", languages: {}, currentLanguage: "", languagesOpenAt: 0 } }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.LanguagesComponent = t.HIGHLIGHT_ATTR = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(10), r = i(111), a = i(112), d = i(117), c = i(44), l = i(121), u = i(123); function h(e, t, i) { return (h = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, i) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = g(e));); return e }(e, t); if (n) { var s = Object.getOwnPropertyDescriptor(n, t); return s.get ? s.get.call(i) : s.value } })(e, t, i || e) } function g(e) { return (g = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) { return e.__proto__ || Object.getPrototypeOf(e) })(e) } t.HIGHLIGHT_ATTR = "data-highlighted"; class p extends a.AbstractLanguagesComponent {
        constructor(e, t) { super(e, t), this.refs = { container: "container" }, this.onRendered(() => { this.setProperty("elements", s.default.slice(this.getElement().querySelectorAll('[data-lang-element="true"]'))) }).onStateChanged("hidden", e => { e || this.resetHighlight() }), this.listenAppView() } listenAppView() { const { appView: e } = this.getProps(); e.on("keydown", e => { if (e.keyCode === o.InputView.keys.ESCAPE && (this.reset(), this.setVisible(!1)), this.isVisible()) switch (e.keyCode) { case o.InputView.keys.UP: s.default.preventEvent(e), this.highlightPrev(); break; case o.InputView.keys.DOWN: s.default.preventEvent(e), this.highlightNext(); break; case o.InputView.keys.ENTER: let t = this.getHighlightedElement(); t && (s.default.preventEvent(e), this.onLanguageTapped(s.default.getAttribute(t, "data-value"), this.isSrc())) } }).on("keypress", e => { e.which && this.isVisible() && !this.isInputFocused() && (s.default.preventEvent(e), this.highlightByText(String.fromCharCode(e.which))) }) } reset() { super.reset(), this.resetSearchQuery() } initChildComponents() { const { translatorElement: e, tags: t } = this.getProps(); this.headerComponent = new d.LanguagesHeader({ container: this._element }), this.autoSwitcherComponent = new c.AutoLangSwitcherComponent, this.recentLangsComponent = new l.RecentLanguagesComponent; this.allLangsComponent = new u.AllLanguagesComponent({ translatorElement: e, tags: t, parentElement: this.getContainer(), renderRecentLangsColumn: () => this.recentLangsComponent.getDirective() }) } setModel(e) { return super.setModel(e), this.headerComponent.setAutoDetectModel(e), this.recentLangsComponent.setAutoDetectModel(e), this } getElements() { return this.getProperty("elements") } getHighlightedElement() { return this.getElement().querySelector('[data-highlighted="true"]') } resetHighlight() { const e = this.getHighlightedElement(); e && e.setAttribute("data-highlighted", "false") } isInputFocused() { return this.headerComponent.isInputFocused() } setInputFocus() { this.headerComponent.setInputFocus() } resetSearchQuery() { this.headerComponent.resetSearchQuery() } onLanguageTapped(e) { this.allLangsComponent.onLanguageTapped(e) } highlightElement() { return r.ListboxViewKB.prototype.highlightElement.apply(this, arguments) } highlightPrev() { return r.ListboxViewKB.prototype.highlightPrev.apply(this) } highlightNext() { return r.ListboxViewKB.prototype.highlightNext.apply(this) } highlightByText(e) { let t, i; const n = this.getElements(); for (this._text += e.toLowerCase(), t = 0, i = n.length; t < i; t++) { if (0 === s.default.trim(n[t].textContent.toLowerCase()).indexOf(this._text)) { this.highlightElement(n[t]); break } } } onMouseOver(e) { const t = s.default.getClosest(e.target, e => e.hasAttribute("data-value")); this.highlightElement(t) } template({ html: e, nothing: t, cn: i }) {
            if (!this.model) return t; const n = i("langs"); return e`
            ${this.headerComponent.getDirective()}
            <div
                data-ref-id="${this.refs.container}"
                class="${n("content", { improved: !0 })}"
                @mouseover=${e => this.onMouseOver(e)}
                @mouseleave=${e => this.resetHighlight(e)}
            >
                ${this.allLangsComponent.getDirective()}
            </div>
        `}
    } t.LanguagesComponent = p, p.defaults = { ...h(g(p), "defaults", p), elements: [] }
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.ListboxViewKB = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(43), r = i(2); class a extends o.ListboxView { constructor(e = {}) { super(e), this._elements = [], this.resetText(), this.resetText = s.default.debounce(this.resetText, e.textResetDelay || 1e3), this.on("contentChanged", (function () { this._elements = this.getContentElement("[" + o.ListboxView.VALUE_ATTR + "]", !0) })).on(r.TouchView.eventTypes.OVER, (function (e) { const t = this.getClosest(e.target, (function (e) { return e.hasAttribute(o.ListboxView.VALUE_ATTR) }), !0); this.highlightElement(t) })).bindDOMEvents(r.TouchView.eventTypes.OVER) } resetText() { return this._text = "", this } getElements() { return s.default.slice(this._elements) } highlightPrev() { const e = this.getElements(); let t = e.indexOf(this.getHighlightedElement()) - 1; return t < 0 && (t = e.length - 1), this.highlightElement(e[t]) } highlightNext() { const e = this.getElements(), t = (e.indexOf(this.getHighlightedElement()) + 1) % e.length; return this.highlightElement(e[t]) } highlightByText(e) { let t, i; const n = this.getElements(); for (this._text += e.toLowerCase(), t = 0, i = n.length; t < i; t++)if (0 === n[t].textContent.toLowerCase().indexOf(this._text)) { this.highlightElement(n[t]); break } return this.resetText() } highlightByValue(e) { let t, i; const n = this.getElements(); for (t = 0, i = n.length; t < i; t++)if (n[t].getAttribute(o.ListboxView.VALUE_ATTR) === e) { this.highlightElement(n[t]); break } return this } highlightElement(e) { const t = this.getHighlightedElement(); return t && t.removeAttribute(a.HIGHLIGHT_ATTR), e && e.setAttribute(a.HIGHLIGHT_ATTR, !0), this } getHighlightedElement() { return this.getContentElement("[" + a.HIGHLIGHT_ATTR + "]") } } t.ListboxViewKB = a, a.HIGHLIGHT_ATTR = "data-highlighted" }, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractLanguagesComponent = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(16), r = i(6), a = i(3), d = i(8); class c extends r.Component { initChildComponents() { } sendTypingMetric(e) { a.$tracker.sendMetric(d.LANG_METRIKAS.SEARCH_TEXT_TYPE, { text: e, type: this.getType() }) } constructor(e, t) { super(e, t); const i = s.default.debounce(e => this.sendTypingMetric(e), 500); this.initChildComponents(), this.id = "LanguagesComponent", this.headerComponent.on(d.COMPONENT_EVENTS.EVENT_INPUT, ({ value: e }) => { this.allLangsComponent.setProperty("searchQuery", e), this.recentLangsComponent.setProperty("searchQuery", e), this.setProperty("stateSearch", Boolean(e)).updateAsync(), e && i(e) }), this.allLangsComponent.on(d.COMPONENT_EVENTS.EVENT_LANG_CHOOSE, ({ langCode: e, searchQuery: t }) => { const i = this.isSrc() ? d.LANG_METRIKAS.SELECT_SRC_LANG : d.LANG_METRIKAS.SELECT_DST_LANG; a.$tracker.sendMetric(i, { recent: 0, fromSearch: t ? 1 : 0, fromDetected: 0, duration: Date.now() - this.model.getProperty("languagesOpenAt"), lang: e }), this.reset() }) } isSrc() { return "src" === this.getProperty("type") } getId() { return this.id } reset() { this.setProperty("stateSearch", !1).setProperty("searchQuery", ""), this.headerComponent.reset(), this.allLangsComponent.reset(), this.recentLangsComponent.reset() } setModel(e) { return this.model = e, this.autoSwitcherComponent.setModel(e), this.allLangsComponent.setModel(e), this } setType(e) { return this.recentLangsComponent.setType(e), this.setProperty({ type: e }) } getType() { return this.getProperty("type") } setRecentLanguagesModel(e) { return this.recentModel = e, this.recentLangsComponent.setModel(e), this } getComponentName() { return "LanguagesComponent" } shouldToggleVisibility(e) { return e === s.default.hasClass(this._element, o.STATE_PREFIX + o.VIEW_STATES.HIDDEN) } template() { } } t.AbstractLanguagesComponent = c, c.defaults = { stateSearch: !1, type: "" } }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.defaultTemplateProcessor = t.DefaultTemplateProcessor = void 0; var n = i(29);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class s { handleAttributeExpressions(e, t, i, s) { const o = t[0]; if ("." === o) { return new n.PropertyCommitter(e, t.slice(1), i).parts } if ("@" === o) return [new n.EventPart(e, t.slice(1), s.eventContext)]; if ("?" === o) return [new n.BooleanAttributePart(e, t.slice(1), i)]; return new n.AttributeCommitter(e, t, i).parts } handleTextExpression(e) { return new n.NodePart(e) } } t.DefaultTemplateProcessor = s; const o = new s; t.defaultTemplateProcessor = o
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.render = t.parts = void 0, i(1); var n = i(22), s = i(29), o = i(63);
    /**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
    const r = new WeakMap; t.parts = r; t.render = (e, t, i) => { let a = r.get(t); void 0 === a && ((0, n.removeNodes)(t, t.firstChild), r.set(t, a = new s.NodePart(Object.assign({ templateFactory: o.templateFactory }, i))), a.appendInto(t)), a.setValue(e), a.commit() }
}, function (e, t, i) { "use strict"; e.exports = i(116) }, function (e, t, i) { "use strict"; function n(e) { function t(t, s, o, r) { var a = s ? i + t + e.e + s : i + t, d = a; if (o) { var c = " " + d + e.m; for (var l in o) if (o.hasOwnProperty(l)) { var u = o[l]; !0 === u ? d += c + l : u && (d += c + l + n + u) } } if (void 0 !== r) for (var h = 0, g = r.length; h < g; h++) { var p = r[h]; if (p && "string" == typeof p.valueOf()) for (var m = p.valueOf().split(" "), _ = 0; _ < m.length; _++) { var f = m[_]; f !== a && (d += " " + f) } } return d } var i = e.n || "", n = e.v || e.m; return function (e, i) { return function (n, s, o) { return "string" == typeof n ? Array.isArray(s) ? t(e, n, void 0, s) : t(e, n, s, o) : t(e, i, n, s) } } } Object.defineProperty(t, "__esModule", { value: !0 }); var s = n({ e: "-", m: "_" }); t.cn = s, t.withNaming = n }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.LanguagesHeader = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(118), r = i(30), a = i(44); class d extends o.AbstractLanguagesHeader {
        constructor(e, t) { super(e, t), this.debouncedSearchTextHandler = s.default.debounce(this.onSearchTextChanged, 100), this.autoLangSwitcher = new a.AutoLangSwitcherComponent({}) } setAutoDetectModel(e) { this.autoLangSwitcher && this.autoLangSwitcher.setModel(e) } setInputFocus() { const e = this.getRef(this.refs.searchInput); e && e.focus() } isInputFocused() { const e = this.getRef(this.refs.searchInput); return e && document.activeElement === e } resetSearchQuery() { const e = this.getRef(this.refs.searchInput); e && (e.value = "") } template({ html: e, cn: t }) {
            const i = t("langs"); return e`
            <div class="${i("searchPanel")}">
                <div class="${i("search")}">
                    <input
                        data-ref-id="${this.refs.searchInput}"
                        type="text"
                        spellcheck="false"
                        placeholder=${r.desktopLocales.languageSelect.langSearch.trim()}
                        @input=${e => this.debouncedSearchTextHandler(e.target)}
                    />
                </div>
                <div
                    class=${i("autoLangSwitcher")}
                    @click=${() => this.autoLangSwitcher.onClick()}
                    tabindex="0"
                    data-default-enter-action="true"
                    role="checkbox"
                >
                    ${this.autoLangSwitcher.getDirective()}
                    ${r.desktopLocales.languageSelect.langAutoDetect}
                </div>
            </div>
        `}
    } t.LanguagesHeader = d
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractLanguagesHeader = void 0; var n = i(6), s = i(8); class o extends n.Component { constructor(e, t) { super(e, t), this.refs = { searchInput: "searchInput" }, this.container = e.container } reset() { } onSearchTextChanged(e) { this.emit(s.COMPONENT_EVENTS.EVENT_INPUT, { value: e.value.trim() }) } getRef(e) { return this.container ? this.container.querySelector(`[data-ref-id="${e}"]`) : null } getComponentName() { return "LanguagesHeader" } template() { } } t.AbstractLanguagesHeader = o, o.defaults = { searchIsActive: !1, title: "" } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractAutoLangSwitcherComponent = void 0; var n = i(3), s = i(6), o = i(120), r = i(8); class a extends s.Component { constructor(e, t) { super(e, t), this.switcher = new o.SwitchToggler({ active: !1, toggleOnTap: !1 }) } setModel(e) { return this.model = e, this.switcher.toggle(e.isAutodetectEnabled()), this } onClick() { } trackAutodetectToggle(e) { n.$tracker.sendMetric(r.LANG_METRIKAS.TOGGLE_AUTODETECT, { enabled: e ? 1 : 0 }) } getComponentName() { return "AutoLangSwitcherComponent" } template() { } } t.AbstractAutoLangSwitcherComponent = a, a.defaults = { active: !1 } }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.SwitchToggler = void 0; var n = i(6); class s extends n.Component {
        constructor(e, t) { super(e, t), this.onToggle(this.update), this.update() } onToggle(e) { return this.onChange("active", e) } toggle(e = !this.isActive()) { return this.setProperty({ active: e }) } isActive() { return this.getProperty("active") } template({ html: e, cn: t }) {
            const { toggleOnTap: i } = this.getProps(), n = t("switch_toggler"); return e`
            <div class=${n({ active: this.isActive() })}
                @click=${() => i && this.toggle()}>
                <div class=${n("tumbler")}></div>
            </div>
        `}
    } t.SwitchToggler = s, s.defaults = { active: !1, toggleOnTap: !0 }
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.RecentLanguagesComponent = void 0, i(1); var n = i(122), s = i(19), o = i(44); class r extends n.AbstractRecentLanguagesComponent {
        constructor(e, t) { super(e, t), this.autoLangSwitcher = new o.AutoLangSwitcherComponent({}) } setAutoDetectModel(e) { this.autoLangSwitcher.setModel(e) } template({ html: e, nothing: t, cn: i }) {
            if (!this.model) return t; if (this.getProperty("searchQuery")) return t; const n = this.model.getRecentLanguages(), o = Object.entries(n); if (!o.length) return t; const r = i("langs"), a = this.model.getProperty("currentLanguage"), d = o.filter(([e]) => e !== a).slice(0, 5).map(([i], n) => {
                const o = 0 === n, a = { cell: !0, hasLetter: o, hasLetterSpace: !0 }, d = o ? e`<span class="${r("letter", { recent: !0 })}">
                    ${(0, s.icn)("recent", 16)}
                </span>`: t; return e`
                <div
                    class="${r("item", a)}"
                    data-value=${i}
                    data-default-enter-action="true"
                    data-lang-element="true""
                    data-is-recent-lang="true"
                    @click=${() => this.onRecentLanguageClick(i)}
                    tabindex="0"
                >
                    ${d}
                    ${this.model.getLanguageName(i)}
                </div>
        `}), c = i("recentLangsColumn"); return e`<div class="${c()}">${d}</div>`
        }
    } t.RecentLanguagesComponent = r, r.defaults = { type: "src" }
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractRecentLanguagesComponent = void 0; var n = i(6), s = i(3), o = i(8); class r extends n.Component { setModel(e) { return this.model = e, this } reset() { this.setProperty("searchQuery", "") } onRecentLanguageClick(e) { this.model.setLanguage(e); const t = this.isSrc() ? o.LANG_METRIKAS.SELECT_SRC_LANG : o.LANG_METRIKAS.SELECT_DST_LANG; s.$tracker.sendMetric(t, { recent: 1, fromSearch: 0, fromDetected: 0, duration: Date.now() - this.model.getProperty("languagesOpenAt"), lang: e }) } isSrc() { return "src" === this.getProperty("type") } isDst() { return "dst" === this.getProperty("type") } setType(e) { return this.setProperty({ type: e }) } getComponentName() { return "RecentLanguagesComponent" } template() { } } t.AbstractRecentLanguagesComponent = r, r.defaults = { searchQuery: "" } }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.AllLanguagesComponent = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(124), r = i(19), a = i(30); class d extends o.AbstractAllLanguagesComponent {
        getColsAmount() { const e = this.getProperty("translatorElement").clientWidth; switch (!0) { case e < 400: return 1; case e < 600: return 2; case e < 800: return 3; case e < 1e3: return 4; case e < 1200: return 5; default: return 6 } } wrapName(e) { if (s.default.isString(e)) return e; const { html: t, cn: i } = this.getRenderHelpers(), n = i("langs"), o = e.start > 0 ? e.name.slice(0, e.start) : "", r = e.name.slice(e.start, e.start + e.size), a = e.name.slice(e.start + e.size, e.name.length); return t`<span class="${n("text")}">${o}</span><span class="${n("text", { highlighted: !0 })}">${r}</span><span class="${n("text")}">${a}</span>` } renderLang({ code: e, selected: t, tags: i, data: n, hasLetter: s, hasLetterSpace: o }) {
            const { html: a, cn: d, nothing: c } = this.getRenderHelpers(), l = Boolean(e), u = d("langs"), h = { selected: t, cell: !0, hasLetter: s, hasLetterSpace: o }, g = s ? a`<span class="${u("letter")}">${n[0]}</span>` : c; return a`
            <div
                class="${u("item", h)}"
                data-value=${e}
                data-default-enter-action="true"
                data-lang-element="${l}"
                tabindex="0"
                role="checkbox"
                aria-checked="${t}"
            >
                ${g}
                <span class="${u("texts")}">
                    ${this.wrapName(n)}
                    ${(i[e] || []).map(e => a`
                        <span class="${u("tag", { type: e })}"></span>
                    `)}
                </span>
                ${t ? (0, r.icn)("tick", 16) : c}
            </div>
        `} onLangClick(e) { const t = s.default.getClosest(e.target, e => e.hasAttribute("data-value")); if (!t) return; const { value: i, langElement: n, isRecentLang: o } = t.dataset; "true" === n && "true" !== o && this.onLanguageTapped(i) } template({ html: e, cn: t, nothing: i }) {
            const { searchQuery: n, tags: s, renderRecentLangsColumn: o } = this.getProps(), r = t("langs"), d = Boolean(n), c = this.model.getCurrentLanguage(), l = this.getColsAmount(), u = this.model.getLanguageMatches(n), h = {}; let g; if (u.length) { d || (h.count = l); let t = ""; g = u.map(([i, n]) => { const o = i === c, r = t !== n[0]; return t = n[0], e`${this.renderLang({ code: i, selected: o, tags: s, data: n, isSearching: d, hasLetter: r && !d, hasLetterSpace: !d })} ` }) } else g = e`<div class="${r("noMatches")}">${a.desktopLocales.languageSelect.langsNotFound}</div>`; const p = o && !d ? o() : i; return e`
            <div class="${r("column", h)}"
                 @click=${e => this.onLangClick(e)}
            >
                ${p}
                ${g}
            </div>
        `}
    } t.AllLanguagesComponent = d
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractAllLanguagesComponent = void 0; var n = i(6), s = i(8); class o extends n.Component { setModel(e) { return this.model = e, this } reset() { this.setProperty("searchQuery", null) } onLanguageTapped(e) { const { searchQuery: t } = this.getProps(); this.emit(s.COMPONENT_EVENTS.EVENT_LANG_CHOOSE, { langCode: e, searchQuery: t }), this.model.setLanguage(e) } getComponentName() { return "AllLanguagesComponent" } template() { } } t.AbstractAllLanguagesComponent = o, o.defaults = { searchQuery: null } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.UserMenuModule = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(13), r = i(5), a = i(10), d = i(2), c = i(3), l = i(69), u = i(19), h = i(126), g = i(32), p = i(127); const m = "theme", _ = "night", f = "light", E = "system", T = E, S = Object.keys(g.locales.themeLabels); class v extends r.AppModule { constructor(e, t) { super(e, t), this.themesSupported = !1, this.$elements = { themeSwitcher: document.getElementById("themeSwitcher"), settingOptions: document.getElementById("settingOptions"), userButton: document.getElementById("userButton"), userMenu: document.getElementById("userMenu"), collectionsOption: document.getElementById("collectionsOption"), hotKeysCheatSheet: document.getElementById("hotKeysCheatSheet") }, this.themesSupported = s.default.hasCssVarsSupport(), this.desktopSettings = this.app.getDesktopSettings(), this.themesSupported && this.appView.setState("themes_supported", !0), this.makeUserButton(), this.makeThemesSwitcher(), this.makeSettingOptions(), this.setupCollectionsOption(), this.setupHotKeysCheatSheet(), this.listenApp(), this.listenAppView(), this.appConfig.IS_TEST_RUN && this.listenThemeHotKey(), this.activateTheme(), s.default.onThemePreferenceChange(() => { this.getActiveTheme() === E && this.activateTheme() }) } setupCollectionsOption() { this.appConfig.SRV === o.TEXT && this.$elements.collectionsOption.removeAttribute("href"), this.app.onAction("toggleFav", () => { this.userMenu.setVisible(!1) }) } setupHotKeysCheatSheet() { this.app.onInitDone(() => { this.cheatSheetShowTimeout = null, this.cheatSheet = new p.CheatSheet({ hotkeys: this.app.getHotKeysConfig() }, { container: this.$elements.hotKeysCheatSheet, hideAfterTransition: !0 }); const e = () => { const e = this.settingOptions.getOptionRef("hotkeys"); e && this.cheatSheet.setPosition(e.getBoundingClientRect()) }; this.cheatSheet.onceRendered(e), this.app.on("resize", s.default.debounce(e, 200)) }) } getActiveTheme() { return this.desktopSettings.getProperty(m) || T } activateTheme() { this.setTheme(this.getActiveTheme()) } handleOptionHover(e, t) { this.cheatSheet && this.cheatSheet.setVisible(!1), clearTimeout(this.cheatSheetShowTimeout), "hotkeys" === t && e && (this.cheatSheetShowTimeout = setTimeout(() => { c.$tracker.sendMetric("hotkeys_cheat_sheet_open"), this.cheatSheet.setVisible(!0) }, 400)) } makeThemesSwitcher() { const e = S.map(e => ({ icon: (0, u.icn)("theme-" + e, 16), content: g.locales.themeLabels[e], ariaLabel: g.locales.themeLabels[e], onClick: () => this.setTheme(e, !0), tabIndex: 0 })); this.themeSwitcher = new l.ChoiceGroup({ items: e, wideMode: !0, activeIndex: S.indexOf(this.getActiveTheme()) }, { container: this.$elements.themeSwitcher }) } makeSettingOptions() { const e = ["autocorrect", "enter", "history"]; this.app.getHotKeysConfig() && e.push("hotkeys"), this.settingItems = e.map(e => ({ key: e, active: this.desktopSettings.isOptionEnabled(e), title: g.locales.settingOptions[e], description: g.locales.settingOptionDescritions[e], onClick: t => this.toggleSetting(e, t), onMouseEnter: () => this.handleOptionHover(!0, e), onMouseLeave: () => this.handleOptionHover(!1, e), tabIndex: 0 })), this.settingOptions = new h.SettingOptions({ items: this.settingItems }, { container: this.$elements.settingOptions }) } makeUserButton() { this.userButton = new d.TouchView({ element: this.$elements.userButton, activateFocus: !0 }), this.userMenu = new d.TouchView({ element: this.$elements.userMenu, stopDefaultAction: !0 }), this.userButton.on("tap", () => { this.userButton.setFocus(!0), this.userMenu.setVisible(), c.$tracker.sendMetric("settings_open") }).onStateChanged("focused", e => { const t = this.$elements.userMenu.contains(document.activeElement); e || t || this.userMenu.setVisible(!1) }), this.app.bindFocusActivation(this.userButton) } toggleSetting(e, t) { t.active ? this.desktopSettings.disableOption(e) : this.desktopSettings.enableOption(e), t.active = !t.active, this.settingOptions.update(), this.app.emit("optionsChanged", e, t.active) } listenAppView() { this.appView.on("keydown", e => { e.keyCode === a.InputView.keys.ESCAPE && this.userMenu.isVisible() && this.userMenu.setVisible(!1) }).onTap(e => { const t = this.$elements.userMenu.contains(e.target), i = this.$elements.userButton.contains(e.target); t || i || this.userMenu.setVisible(!1) }) } listenThemeHotKey() { this.appView.on("keydown", e => { if (e.keyCode === a.InputView.keys.D && s.default.hasCtrlKey(e)) { e.preventDefault(); const t = s.default.hasClass(document.documentElement, "theme-night") ? f : _; this.setTheme(t, !0) } }).bindDOMEvents("keydown", !0) } setTheme(e, t) { const i = this.getActiveTheme(), n = e === _ || e === E && s.default.preferDarkMode(); s.default.activateClass(document.documentElement, "theme-night", n), this.desktopSettings.setProperty(m, e), this.themeSwitcher.setSelectedElement(S.indexOf(e)), t && c.$tracker.sendMetric("settings_theme_change", { theme: e, prevTheme: i }) } getSettingItemByKey(e) { for (const t of this.settingItems) if (t.key === e) return t; return null } toggleSettingByKey(e, t) { const i = this.getSettingItemByKey(e); i.active !== t && this.toggleSetting(e, i) } listenApp() { this.app.on("interactiveSettingChange", ({ settingKey: e, enabled: t } = {}) => { this.userButton.emit("tap"), setTimeout(() => this.toggleSettingByKey(e, t), 600) }) } } t.UserMenuModule = v }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.SettingOptions = void 0; var n = i(25); class s extends n.PureComponent {
        constructor(e, t) { super(e, t), this.refs = { option: "option" }, this.onChange(() => this.updateAsync()), this.update() } getOptionRef(e) { return this.getRef(`${this.refs.option} ${e}`) } template({ html: e, cn: t }) {
            const { items: i } = this.getProps(), n = t("userMenu-setting"), s = t("switch"); return e`
            ${i.map(t => e`
                <div
                    class=${n()} @click=${() => t.onClick(t)}
                    tabIndex="${isNaN(t.tabIndex) ? -1 : t.tabIndex}"
                    data-default-enter-action="true"
                    @mouseenter=${() => t.onMouseEnter && t.onMouseEnter()}
                    @mouseleave=${() => t.onMouseLeave && t.onMouseLeave()}
                    data-ref-id="${this.refs.option} ${t.key}"
                >
                    <div class=${n("title")}>
                        ${t.title}
                        <div class=${n("description")}>${t.description}</div>
                    </div>
                    <div class=${n("switch")}>
                        <div class=${s({ size: "s", active: Boolean(t.active) })}></div>
                    </div>
                </div>
            `)}
        `}
    } t.SettingOptions = s
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.CheatSheet = void 0, i(1); var n = i(6); class s extends n.Component {
        constructor(e, t) { super(e, t), this.updateAsync() } getHotKeys() { const { hotkeys: e } = this.getProps(); return Object.entries(e || {}).sort(([e], [t]) => t > e ? -1 : 1) } template({ html: e, cn: t }) {
            const i = t("hotkeys-tooltip"), n = this.getHotKeys(); return e`
            <div class="${i("wrapper")}">
                ${n.map(([t, n]) => e`
                    <div class="${i("row")}">
                      <div class="${i("combination")}">${t}</div>
                      <div class="${i("action")}">${n}</div>
                    </div>
                `)}
            </div>
        `}
    } t.CheatSheet = s
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.AccessibilityModule = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(5), r = i(11), a = i(2), d = i(10), c = i(18); class l extends o.AppModule { constructor(e, t) { super(e, t), this.hoveredElement = null, this.focusedView = !1, this.listenAppView(), this.listenGlobalEmitter(), this.listenDocument() } isFocusedView(e) { return this.focusedView && this.focusedView.getContentElement() === e } isElementHovered(e) { return this.hoveredElement && s.default.getClosest(this.hoveredElement, t => t === e) } showElementTooltip(e) { const t = s.default.getDataAttr(e, "tooltip") || s.default.getDataAttr(e, "tooltip-focus"); t && this.appModel.setProperty("tooltip", t, { rect: e.getBoundingClientRect(), position: s.default.getDataAttr(e, "tooltip-position") }) } hideTooltip() { this.appModel.setProperty("tooltip", null) } listenAppView() { this.appView.on("keydown", e => { const t = document.activeElement, i = t.getAttribute("data-action"), n = "true" === t.getAttribute("data-default-enter-action"), o = t.getAttribute("data-enter-action"); t && "textarea" !== t.tagName.toLowerCase() && "pre" !== t.tagName.toLowerCase() && !s.default.hasClass(t, "state-disabled") && (e.keyCode === d.InputView.keys.ENTER ? (i && this.app.emit("action:" + i, {}, { originalEvent: e }), this.app.emit(c.A11Y_EVENTS.ACTIVATION, e.target, e), n ? t.click() : o && this.app.emit(o, t, { originalEvent: e }), e.preventDefault()) : e.keyCode === d.InputView.keys.SPACE && s.default.hasClass(t, "button_select") && this.app.emit(c.A11Y_EVENTS.SELECT_ACTIVATION, e.target, e)) }) } listenGlobalEmitter() { (0, r.getGlobalEmitter)().on("viewFocusChanged", (e, t) => { t ? this.focusedView = e : e === this.focusedView && (this.focusedView = null) }) } listenDocument() { document.addEventListener(a.TouchView.eventTypes.OVER, e => { this.hoveredElement = e.target }), document.addEventListener("focus", e => { this.isElementHovered(e.target) || this.isFocusedView(e.target) || (s.default.toggleClass(e.target, "state-tab-focused"), this.showElementTooltip(e.target)) }, !0), document.addEventListener("blur", e => { s.default.hasClass(e.target, "state-tab-focused") && (s.default.toggleClass(e.target, "state-tab-focused"), this.hideTooltip()) }, !0) } } t.AccessibilityModule = l }, function (e, t, i) { "use strict"; t.__esModule = !0, t.HeaderAdaptiveModule = void 0; var n, s = i(5), o = i(2), r = (n = i(0)) && n.__esModule ? n : { default: n }; class a extends s.AppModule { constructor(e, t) { super(e, t), this.SCROLL_TRACKING_INTERVAL_MS = 50, this.SCROLL_MIN_VALUABLE_DIFF = 5, this.$elements = { headerShadowScrollLeft: document.getElementById("headerShadowScrollLeft"), headerNav: document.getElementById("headerNav"), headerShadowScrollRight: document.getElementById("headerShadowScrollRight") }, this.handleScrollShadowsVisibilityThrottled = r.default.throttleWithCallGuarantee(() => this.handleScrollShadowsVisibility(), this.SCROLL_TRACKING_INTERVAL_MS), this.makeViews(), this.listenResizeEvent(), this.listenScrollEvent(), this.handleScrollShadowsVisibility() } listenResizeEvent() { this.app.on("resize", this.handleScrollShadowsVisibilityThrottled) } listenScrollEvent() { this.headerLinksContainerView.on("scroll", this.handleScrollShadowsVisibilityThrottled).bindDOMEvents("scroll") } handleScrollShadowsVisibility() { const e = this.headerLinksContainerView.getElement(); if (!e) return; const { clientWidth: t, scrollWidth: i, scrollLeft: n } = e, s = i - t, o = s > this.SCROLL_MIN_VALUABLE_DIFF, r = o && n > this.SCROLL_MIN_VALUABLE_DIFF, a = o && s - n > this.SCROLL_MIN_VALUABLE_DIFF; this.leftScrollShadowView.setVisible(r), this.rightScrollShadowView.setVisible(a) } makeViews() { this.headerLinksContainerView = new o.TouchView({ element: this.$elements.headerNav }), this.leftScrollShadowView = new o.TouchView({ element: this.$elements.headerShadowScrollLeft, hideAfterTransition: !0 }), this.rightScrollShadowView = new o.TouchView({ element: this.$elements.headerShadowScrollRight, hideAfterTransition: !0 }) } } t.HeaderAdaptiveModule = a }, function (e, t, i) { "use strict"; t.__esModule = !0, t.getLogErrorCode = t.MAX_LOG_RESPONSE_TEXT_LENGTH = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }; t.MAX_LOG_RESPONSE_TEXT_LENGTH = 100; t.getLogErrorCode = ({ response: e, error: t }) => s.default.isEmpty(t) ? s.default.isEmpty(e) ? null : e.code : t.code }, function (e, t, i) { "use strict"; t.__esModule = !0, t.TooltipModule = void 0; var n = i(5), s = i(132); class o extends n.AppModule { constructor(e, t) { super(e, t), this.moduleName = "tooltip", this.tooltipView = new s.TooltipView({ element: this.appConfig.ELEMENTS.tooltip, targetView: this.appView, timeout: 400, areHotkeysEnabled: () => this.app.areHotkeysEnabled() }), this.appModel.onSet("tooltip", (e, t) => { this.tooltipView.setTooltip(e, t) }) } } t.TooltipModule = o }, function (e, t, i) { "use strict"; t.__esModule = !0, t.TooltipView = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(2); class r extends o.TouchView { constructor(e = {}) { super(e); const t = this; let i; this.clearTimeout = () => (i && clearTimeout(i), this); const n = i => { const n = parseInt(i.getAttribute("data-tooltip-vetrical-margin")) || 0, s = i.getAttribute("data-hotkey"), o = i.getAttribute("data-tooltip"), r = -1 === i.className.indexOf("state-invalid") && -1 === i.className.indexOf("state-disabled"), a = e.areHotkeysEnabled(), d = r && s && a ? `${o} (${s})` : o; t.setTooltip(d, { rect: i.getBoundingClientRect(), position: i.getAttribute("data-tooltip-position"), verticalMargin: n }) }; return e.targetView instanceof o.TouchView && e.targetView.on(o.TouchView.eventTypes.OUT, (function () { t.clearTimeout(), t.setVisible(!1) })).on(o.TouchView.eventTypes.OVER, (function (t) { const s = this.getClosest(t.target, (function (e) { return e.hasAttribute("data-tooltip") })); s && (i = setTimeout(() => { n(s) }, e.timeout || 400)) })).on(o.TouchView.eventTypes.START, (function (e) { this.getClosest(e.target, (function (e) { return e.hasAttribute("data-tooltip-nohide") })) || (t.clearTimeout(), t.setVisible(!1)) })).onTap(e => { const t = s.default.getClosest(e.target, (function (e) { return e.hasAttribute("data-tooltip-onclick") })); t && n(t) }).bindDOMEvents([o.TouchView.eventTypes.OUT, o.TouchView.eventTypes.OVER]), this.on("contentChanged", this.updatePosition), this } setTooltip(e, t = {}) { if (!e) return this.setVisible(!1); if (this.setVisible(!0).setTextContent(e), t.rect) { const e = { top: t.rect.top, bottom: t.rect.bottom, right: t.rect.right, left: t.rect.left, width: t.rect.width, height: t.rect.height }; t.verticalMargin && (e.top -= t.verticalMargin, e.bottom -= t.verticalMargin), this.setPosition(e, t.position) } else t.targetElement ? this.clearTimeout().setPositionByElement(t.targetElement) : t.view && this.clearTimeout().setPositionByElement(t.view.getElement()); return this } setPositionByElement(e) { return this.setPosition(e.getBoundingClientRect(), e.getAttribute("data-tooltip-position")) } setPosition(e, t) { return this._rect = e, this._position = t, this.updatePosition() } updatePosition() { let e, t; const i = this._rect, n = this._position || "bottom"; if (!i) return this; const s = this.getElement(), o = this.getRect(); switch (n) { case "top": case "bottom": e = "top" === n ? i.top - o.height : i.bottom, t = i.left - (o.width - i.width) / 2; break; case "left": case "right": e = i.top - (o.height - i.height) / 2, t = "left" === n ? i.left - o.width : i.right; break; case "top-right": e = i.top - o.height, t = i.left }return s.style.top = e + "px", s.style.left = t + "px", s.setAttribute("data-position", n), this } } t.TooltipView = r }, function (e, t, i) { "use strict"; t.__esModule = !0, t.SessionStorage = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(4); class r extends o.Model { constructor(e, t) { super(e, t) } setItem(e, t) { try { sessionStorage.setItem(e, s.default.safeStringifyJSON(t)), this.emit("fileStored") } catch (e) { if (e.name === r.QUOTA_EXCEEDED_ERROR) return void this.emit("quotaError", e) } } removeItem(e) { sessionStorage.removeItem(e) } getItem(e) { if (sessionStorage.getItem(e)) return s.default.safeParseJSON(sessionStorage.getItem(e)) } } t.SessionStorage = r, r.QUOTA_EXCEEDED_ERROR = "QuotaExceededError" }, function (e, t, i) { "use strict"; t.__esModule = !0, t.PICKER_TYPE = t.PICKER_SOURCE = t.PICKER_EVENTS = void 0; t.PICKER_EVENTS = { NEW_IMAGE: "newImage" }; t.PICKER_TYPE = { DROP: "drop", INPUT: "input", PASTE: "paste", URL: "url", URL_DROP: "url_drop", STORE: "store" }; t.PICKER_SOURCE = { MAIN: "main", OCR: "ocr", DOC: "doc" } }, , , , function (e, t, i) { "use strict"; t.__esModule = !0, t.TranslatorModel = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(7), r = i(130), a = i(31), d = i(28), c = i(17), l = i(153); const u = window.config || {}; window._globalTranslateRequestsCounter = u.TRANSLATION ? u.TRANSLATION_COUNTER : 0; class h extends a.SessionModel { constructor(e, t = {}) { super(e, t), this.resetCache(), this._cacheEnabled = Boolean(t.cacheEnabled) } reset() { return this._activeRequest && (this._activeRequest.abort(), this._activeRequest = null), this } getData() { return { text: this.getText(), options: this.getProperty("options") } } getText() { const e = this.getProperty("text"); return e ? JSON.parse(e) : [] } setText(e, t) { return this.setProperty("text", e && JSON.stringify(e), t) } getTranslationId() { return [this.getProps().sid, window._globalTranslateRequestsCounter - 1, 0].join("-") } saveLastTranslationId(e) { return this.setProperty({ translationId: e }) } getLastTranslationId() { return this.getProperty("translationId") } getParams() { const e = this.getProps(); return { id: this.getTranslationId(), srv: e.srv, source_lang: e.srcLang, target_lang: e.dstLang, reason: e.reason, format: e.format } } resetCache() { return this._cache = {}, this } getDefaults() { return { srv: "", url: "/", text: "", format: h.formats.TEXT, reason: "", options: 0, srcLang: "", dstLang: "", translation: "", shouldNotRequest: !1, sid: this.getId() } } _getCacheKey(e) { return [this.getProperty("srcLang"), this.getProperty("dstLang"), e].join("-") } _getFromCache(e) { return this._cache[this._getCacheKey(e)] || "" } getCounter() { return window._globalTranslateRequestsCounter } increaseCounter() { return window._globalTranslateRequestsCounter = window._globalTranslateRequestsCounter + 1, window._globalTranslateRequestsCounter } validateResponse(e) { return e && s.default.isObject(e.body) && s.default.isArray(e.body.text) && e.body.text.length } runRequest() { let e; const t = this.getData(); this.increaseCounter(), this.saveLastTranslationId(this.getTranslationId()); const i = this.getParams(), n = new c.HTTPRequest(this.getProperty("url")); if (this.emit("query", s.default.extend({}, t, i)), this._cacheEnabled && (e = t.text, t.text = e.filter(e => !this._getFromCache(e)), !t.text.length)) return this.setProperty("translation", e.map(this._getFromCache, this).join("\n")); this._activeRequest = n.setType(c.HTTPRequest.types.FORM).setData(t).setParams(i).setMethod(c.HTTPRequest.methods.POST).send((i, n) => { const s = (0, r.getLogErrorCode)({ response: n, error: i }), a = i && c.HTTPRequest.isAbortedCode(i.code), u = n && c.HTTPRequest.isSuccessCode(n.code); let h; if (this._activeRequest = null, u && !a && !this.validateResponse(n)) { const { srcLang: e, dstLang: t, srv: i } = this.getProps(), s = n.text ? n.text.slice(0, r.MAX_LOG_RESPONSE_TEXT_LENGTH) : null; (0, o.logError)(new l.UnexpectedTranslationApiResponse(e, t, i), { additional: { responseText: s } }) } if (u && (h = n.body.text, this._cacheEnabled && (t.text.forEach((e, t) => { this._cache[this._getCacheKey(e)] = h[t] }), h = e.map(this._getFromCache, this)), this.setProperty("translation", h.join("\n"), { align: n.body.align && n.body.align[0] })), !u && !a) { const { srcLang: e, dstLang: t, srv: r } = this.getProps(); return (0, o.logError)(new l.TranslateApiError(s, e, t, r)), this.emit("error", i || new d.HTTPError(s, n.body.message)) } }) } requestTranslation() { return this.reset(), this.isValid() ? (this.emit("request"), this.getSid().then(() => this.runRequest()), this) : this } onRequest(e) { return this.on("request", e) } } t.TranslatorModel = h, h.options = { ALIGN: 4 }, h.formats = { TEXT: "text", HTML: "html" }, h.errorMap = { INVALID_SESSION: 405, EXPIRED_SESSION: 406 } }, , , , function (e, t, i) { "use strict"; t.__esModule = !0, t.FileDropModule = t.APP_EVENTS = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(13), r = i(3), a = i(5), d = i(2), c = i(133), l = i(143), u = i(72), h = i(134); const g = { DOC_DROPPED: "documentDropped", TAB_DROPPED: "tabDropped", IMAGE_DROPPED: "imageDropped" }; t.APP_EVENTS = g; class p extends a.AppModule { constructor(e, t) { super(e, t), this.moduleName = "fileDrop", this.mainContainer = new d.TouchView({ element: document.documentElement }), this.storage = new c.SessionStorage, this.dropOverlay = new l.DropAreaView({ element: this.appConfig.ELEMENTS.dropOverlay, contentElement: this.appConfig.ELEMENTS.dropContent, hideAfterTransition: !0 }), this.app._dropAreaView = this.dropOverlay, this.listenMainContainer(), this.listenStorage(), this.listenDropOverlay() } listenPasteEvent() { this.appConfig.ENABLE_URL_DROPPED_OCR && document.addEventListener("paste", e => { e.stopPropagation(); const t = e.clipboardData && e.clipboardData.items; if (t) for (const e of t) if (e.type.includes("image")) { const t = e.getAsFile(), i = this.dropOverlay.getFileFormat(e); if (t && this.dropOverlay._validateFileFormat(i)) { this.handleFileUpload(t, u.FILE_FORMAT.IMAGE, h.PICKER_TYPE.PASTE); break } } }) } getPickerSource() { return this.appConfig.SRV === o.DOC ? h.PICKER_SOURCE.DOC : this.appConfig.SRV === o.TEXT ? h.PICKER_SOURCE.MAIN : void 0 } handleFileUpload(e, t, i) { const n = this.getPickerSource(); if (this.storage.removeItem("storedUrl"), this.storage.removeItem("storedFile"), this.storage.removeItem("storedFileInfo"), t === u.FILE_FORMAT.URL) this.storage.setItem("storedUrl", e), this.storage.getItem("storedUrl") && this.storage.setItem("storedFileInfo", { format: u.FILE_FORMAT.URL, pickerType: i, source: n }); else { const t = new FileReader, s = this.storage; t.onload = function () { s.setItem("storedFile", this.result), s.getItem("storedFile") && s.setItem("storedFileInfo", { format: e.type, pickerType: i, source: n, name: e.name }) }, t.readAsDataURL(e) } } listenMainContainer() { this.mainContainer.on(u.EVENT_NAMES.DRAG_START, e => { if ("A" === e.target.tagName) return e.preventDefault(), !1 }).on(u.EVENT_NAMES.DRAG_ENTER, e => { if (this.appConfig.ENABLE_URL_DROPPED_OCR && s.default.preventEvent(e), e.dataTransfer) { const t = Array.from(e.dataTransfer.types), i = t.some(e => e.includes("text/uri-list")), n = t.some(e => e.includes("Files")); (i || n) && this.dropOverlay.setVisible(!0) } }).bindDOMEvents(`${u.EVENT_NAMES.DRAG_ENTER} ${u.EVENT_NAMES.DRAG_START}`) } listenStorage() { const e = this.getPickerSource(); this.storage.on("fileStored", () => { this.dropOverlay.getContentElement().submit() }).on("quotaError", () => { r.$tracker.sendMetric("session_storage_quota_error", { source: e }), this.appModel.setProperty("toast", this.appConfig.TOAST_MESSAGES.quotaExceeded) }) } listenDropOverlay() { this.dropOverlay.onVisibilityChanged(e => { this.appView.setState("dropping", e) }).on(u.EVENT_NAMES.URL_DROPPED, (e, t) => { t === u.FILE_FORMAT.URL && (this.appConfig.SRV === o.IMAGE ? this.app.emit(g.TAB_DROPPED, e, h.PICKER_SOURCE.OCR) : this.handleFileUpload(e, t, h.PICKER_TYPE.URL_DROP)) }).on(u.EVENT_NAMES.FILE_DROPPED, (e, t, i) => { this.appConfig.SRV === o.DOC && t === u.FILE_FORMAT.DOCUMENT ? this.app.emit(g.DOC_DROPPED, e, i) : this.appConfig.SRV === o.IMAGE ? t === u.FILE_FORMAT.IMAGE && this.app.emit(g.IMAGE_DROPPED, e, i) : this.handleFileUpload(e, t, h.PICKER_TYPE.DROP) }).on(u.EVENT_NAMES.SIZE_ERROR, () => this.app.emit(u.EVENT_NAMES.SIZE_ERROR)) } } t.FileDropModule = p }, function (e, t, i) { "use strict"; t.__esModule = !0, t.SUPPORTED_DOCS = t.DropAreaView = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(72), r = i(2); const a = /pdf|doc|docx|xls|xlsx|ppt|ppts|pptx/i; t.SUPPORTED_DOCS = a; const d = window.config || {}; class c extends r.TouchView { constructor(e) { super(e); const { DROP: t, DRAG_ENTER: i, DRAG_OVER: n, DRAG_LEAVE: r } = o.EVENT_NAMES; this.on(t, e => this._handleDropEvent(e)).on(i, e => this._handleDragEnterEvent(e)).on(n, e => s.default.preventEvent(e)).on(r, e => this._handleDragLeaveEvent(e)).bindDOMEvents(`${t} ${i} ${n} ${r}`); let a = null; this.onVisibilityChanged(e => { clearTimeout(a), e && (a = setTimeout(() => { this.setVisible(!1) }, c.OVERLAY_CHECK_TIMEOUT)) }) } getFileFormat(e) { if (s.default.isImageFile(e)) return o.FILE_FORMAT.IMAGE; const t = e.name.split(".").pop(); return a.test(t) ? o.FILE_FORMAT.DOCUMENT : o.FILE_FORMAT.INVALID } handleFileUpload(e, t) { this._handleFileUpload(e, t) } getImgUrl(e) { try { return new URL(e).searchParams.get("imgurl") || e } catch { return e } } _handleFileUpload(e, t = null) { s.default.preventEvent(e); const i = e.dataTransfer ? e.dataTransfer.getData("text/uri-list") : "", n = this.getImgUrl(i), r = this._validateFileFormat(o.FILE_FORMAT.URL); if (n && d.ENABLE_URL_DROPPED_OCR && s.default.isUrl(n) && r) return void this.emit(o.EVENT_NAMES.URL_DROPPED, n, o.FILE_FORMAT.URL); const a = s.default.getFilesFromEvent(e)[0]; if (!a) return; const l = this.getFileFormat(a); this._validateFileFormat(l) && (a.size > c.MAX_FILE_SIZE ? this.emit(o.EVENT_NAMES.SIZE_ERROR) : this.emit(o.EVENT_NAMES.FILE_DROPPED, a, l, t)) } _validateFileFormat(e) { return e !== o.FILE_FORMAT.INVALID ? (this._updateContentElement(e), !0) : (this.emit(o.EVENT_NAMES.FORMAT_ERROR), !1) } _updateContentElement(e) { e !== o.FILE_FORMAT.IMAGE && e !== o.FILE_FORMAT.URL || this.getContentElement().setAttribute(o.ACTION_ATTRIBUTE, o.ACTIONS.OCR), e === o.FILE_FORMAT.DOCUMENT && this.getContentElement().setAttribute(o.ACTION_ATTRIBUTE, o.ACTIONS.DOC) } _handleDropEvent(e) { this._handleFileUpload(e), this.setVisible(!1) } _handleDragEnterEvent(e) { this.dragEnterTarget = e.target } _handleDragLeaveEvent(e) { e.target === this.dragEnterTarget && (this.dragEnterTarget = null, this.setVisible(!1)) } } t.DropAreaView = c, c.MAX_FILE_SIZE = 5242880, c.OVERLAY_CHECK_TIMEOUT = 3e3 }, , function (e, t, i) { "use strict"; t.__esModule = !0, t.LocaleRoutesListModule = void 0, i(1); var n = i(146), s = i(10), o = i(147); class r extends n.AbstractLocaleRoutesListModule { constructor(e, t) { super(e, t), this.listenAppView(), this.listenMenu() } listenMenu() { this.menu.onVisibilityChanged(e => { this.expandButton.setState({ closed: !e }) }) } listenAppView() { this.appView.onTap(e => { this.menu.isMenuNode(e.target) || this.menu.setVisible(!1) }).on("keydown", ({ keyCode: e }) => { e === s.InputView.keys.ESCAPE && this.menu.isVisible() && this.menu.setVisible(!1) }) } makeLocaleRoutesMenu() { this.menu = new o.LocaleRoutesMenu({ onLinkClick: (e, t) => this.handleMenuLinkClick(e, t), langPathPrefix: this.appConfig.UI_LANG_PREFIX }, { container: this.$elements.menu, hideAfterTransition: !0 }) } } t.LocaleRoutesListModule = r }, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractLocaleRoutesListModule = void 0, i(1); var n = i(5), s = i(18), o = i(2), r = i(3); class a extends n.AppModule { constructor(e, t) { super(e, t), this.$elements = { expandButton: document.getElementById("localeRoutesExpand"), menu: document.getElementById("localeRoutesMenu") }, this.makeExpandButton(), this.makeLocaleRoutesMenu(), this.listenExpandButton() } handleMenuLinkClick(e, t) { r.$tracker.sendMetric("click_locales_navigation", { locale: e, link: t }) } listenExpandButton() { this.expandButton.onTap(() => { if (this.menu.isVisible()) return; const e = this.getAllLocaleRoutes(); this.menu.setProperty({ links: e }), this.menu.onceRendered(() => { this.menu.setVisible(!0) }) }) } getLink(e) { const t = s.TranslateApplication.getCanonicalDomainWithPrefix(e), { pathname: i, search: n } = document.location; return `${t}${`${i}${n}`.replace(this.appConfig.UI_LANG_PREFIX, "")}` } getAllLocaleRoutes() { return Object.entries(this.appConfig.LOCALIZED_UI_NAMES).map(([e, t]) => ({ selected: e === this.appConfig.UI_LANG, text: t, link: this.getLink(e), locale: e })).sort((e, t) => e.text.localeCompare(t.text)) } makeExpandButton() { this.expandButton = new o.TouchView({ element: this.$elements.expandButton }) } makeLocaleRoutesMenu() { throw new Error("makeLocaleRoutesMenu is not implemented") } } t.AbstractLocaleRoutesListModule = a }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.LocaleRoutesMenu = void 0; var n = i(148), s = i(19); class o extends n.AbstractLocaleRoutesMenu {
        template({ html: e, cn: t }) {
            const { links: i, onLinkClick: n } = this.getProps(), o = t("locale-routes-menu"); return e`
            <div class="${o("wrapper")}" data-ref-id="${this.refs.wrapper}">
                ${i.map(({ link: t, text: i, selected: r, locale: a }) => r ? e`
                        <div class="${o("link", ["selected"])}" >
                            ${i}
                            ${(0, s.icn)("tick", 16)}
                        </div>
                    `: e`
                        <a
                            class="${o("link")}"
                            href="${t}"
                            @click=${() => n(a, t)}
                        >${i}</a>
                    `)}
            </div>
        `}
    } t.LocaleRoutesMenu = o
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.AbstractLocaleRoutesMenu = void 0; var n = i(6); class s extends n.Component { constructor(e, t) { super(e, t), this.refs = { wrapper: "wrapper", linksContainer: "linksContainer" }, this.onChange(() => this.updateAsync()) } isMenuNode(e) { const t = this.getRef(this.refs.wrapper); return t && t.contains(e) } } t.AbstractLocaleRoutesMenu = s }, , , , , function (e, t, i) { "use strict"; t.__esModule = !0, t.UnexpectedTranslationApiResponse = t.TranslateApiError = void 0; class n extends Error { constructor(e, t, i, n) { super(), this.message = `TranslateApiError [${t}-${i}] status=${e} srv=${n}` } } t.TranslateApiError = n; class s extends Error { constructor(e, t, i) { super(), this.message = `UnexpectedTranslationApiResponse [${e}-${t}] srv=${i}` } } t.UnexpectedTranslationApiResponse = s }, , , , function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageRecognizerPresenter = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(21), r = i(28), a = i(315); class d extends o.Presenter { static isAvailable() { return Boolean(window.URL) && "Blob" in window && "FormData" in window && "FileReader" in window && "ArrayBuffer" in window && "click" in window.HTMLElement.prototype } static drawImage(e, t = {}) { const i = document.createElement("canvas"), n = i.getContext("2d"), s = this.MAX_IMAGE_WIDTH < e.width ? this.MAX_IMAGE_WIDTH / e.width : 1, o = e.width * s, r = e.height * s, a = t.angle / 90 % 2; return i.width = a ? r : o, i.height = a ? o : r, n.setTransform.apply(n, this.getImageTransform(o, r, t.angle).toArray()), n.drawImage(e, 0, 0, o, r), { canvas: i, context: n, width: o, height: r, scaleRatio: s } } static grayscaleCanvas(e, t) { const i = t.getImageData(0, 0, e.width, e.height); for (let e = 0, t = i.data.length; e < t; e += 4) { const t = (i.data[e] + i.data[e + 1] + i.data[e + 2]) / 3; i.data[e] = t, i.data[e + 1] = t, i.data[e + 2] = t } t.putImageData(i, 0, 0) } static prepareImage(e, t = {}) { var i, n; const { canvas: s, context: o, width: r, height: a } = this.drawImage(e, t), d = this.cloneCanvas(s); return (null === (i = window) || void 0 === i || null === (n = i.config) || void 0 === n ? void 0 : n.DISABLE_GRAYSCALING) || this.grayscaleCanvas(s, o), { width: r, height: a, colorfulCanvas: d, viewboxWidth: s.width, viewboxHeight: s.height, dataURL: s.toDataURL(t.type, t.quality) } } static cloneCanvas(e) { const t = document.createElement("canvas"), i = t.getContext("2d"); if (t.width = e.width, t.height = e.height, s.default.safariVersion) { const t = e.getContext("2d").getImageData(0, 0, e.width, e.height); i.putImageData(t, 0, 0) } else i.drawImage(e, 0, 0, e.width, e.height); return t } static getImageTransform(e, t, i) { const n = new a.TransformMatrix; switch (n.rotate(i / 180 * Math.PI), i) { case -90: case 270: n.translate(-e, 0); break; case 180: case -180: n.translate(-e, -t); break; case 90: case -270: n.translate(0, -t) }return n } static normalizeImageOrientation(e, t, i) { const n = e.width, o = e.height, r = document.createElement("canvas"), d = r.getContext("2d"), c = new a.TransformMatrix; switch (r.width = t > this.orientations.DOWN_MIRRORED ? o : n, r.height = t > this.orientations.DOWN_MIRRORED ? n : o, t) { case this.orientations.UP_MIRRORED: c.translate(n, 0).scale(-1, 1); break; case this.orientations.DOWN: c.translate(n, o).rotate(Math.PI); break; case this.orientations.DOWN_MIRRORED: c.translate(0, o).scale(1, -1); break; case this.orientations.LEFT_MIRRORED: c.rotate(.5 * Math.PI).scale(1, -1); break; case this.orientations.LEFT: c.rotate(.5 * Math.PI).translate(0, -o); break; case this.orientations.RIGHT_MIRRORED: c.rotate(.5 * Math.PI).translate(n, -o).scale(-1, 1); break; case this.orientations.RIGHT: c.rotate(-.5 * Math.PI).translate(-n, 0) }d.setTransform.apply(d, c.toArray()), d.drawImage(e, 0, 0, n, o); const l = { width: r.width, height: r.height }; r.toBlob ? r.toBlob(e => i(e, l)) : r.msToBlob ? i(r.msToBlob(), l) : i(s.default.dataURLToBlob(r.toDataURL()), l) } constructor(e) { super(e); const t = this, i = this.getView(), n = this.getModel(); this.requestBlocks = s.default.debounce(d.prototype.requestBlocks, 200), i.on("load", (function () { t.updateImage() })).on("tapEnd", (function () { t.emit("tapEnd") })).on("selectionChange", (function (e) { n.setProperty("selection", JSON.stringify(e)), t.emit("selectionChange", e) })), n.on("query", (function () { t.emit("query"), i.setState({ error: !1, empty: !1, loading: !0, rotated: !1 }) })).on("detect", (function (e) { t.emit("detect", e) })).on("result", (function (e, n) { if (i.setState("loading", !1), e && e.code === this.constructor.errors.INVALID_SESSION) return t.emit("expired"); i.setState({ error: e && e.code !== r.HTTPError.ABORT, empty: n && !t.getBlocksByMode().length }), t.emit("result", e, n) })).on("change", (function (e, n) { switch (e) { case "lang": case "dataURL": t.requestBlocks(); break; case "href": case "mode": case "angle": case "width": case "blocks": case "height": case "selection": if ("selection" !== e && this.setProperty("selection", "", { silent: !0 }), "angle" === e) { const e = n / 90 % 2, t = this.getProperty("width"), i = this.getProperty("height"); this.setProperty({ viewboxWidth: e ? i : t, viewboxHeight: e ? t : i }) } i.renderData(t.prepareData(this.toJSON())); break; case "blocksAngle": t.rotateImage(n); break; case "viewboxWidth": case "viewboxHeight": i.setViewBox("viewboxWidth" === e ? "width" : "height", n) } })) } getHref() { return this.getModel().getProperty("href") } setMode(e) { return this.getModel().setProperty("mode", e), this } setAutorotate(e) { return this.getModel().setProperty("autorotate", Boolean(e)), this } setName(e) { this.getModel().setProperty("name", e) } setImage(e) { return this.getModel().setProperty({ href: e, angle: 0, width: 0, height: 0, blocks: "", dataURL: "", selection: "", blocksAngle: 0, viewboxWidth: 0, viewboxHeight: 0, colorfulCanvas: null }), this.getView().setState({ error: !1, empty: !1, loading: !1, rotated: !1 }).setImage(e), this.emit("imageChange", e) } setLanguage(e) { return this.getModel().setProperty("lang", e), this } setAutodetect(e) { return this.getModel().setProperty("autodetect", Boolean(e)), this } updateImage() { return this.getModel().setProperty(d.prepareImage(this.getView().getImage(), this.getProps())), this } rotateImage(e, t) { const i = this.getView(), n = this.getModel(), s = n.getProperty("blocksAngle"); let o = n.getProperty("angle"); o = (t ? o : 0) + e, o %= 360, n.setProperty("angle", o); const r = (Math.abs(s) + o) % 360 == 0; return i.setState("rotated", i.hasState("empty") || !r), this } prepareData(e) { const t = this.getBlocksByMode(e), i = d.getImageTransform(e.width, e.height, e.angle); return { href: e.href, width: e.width, items: t, height: e.height, transform: `matrix(${i})` } } requestBlocks() { return this.getModel().requestBlocks(), this } clearSelection() { return this.getModel().setProperty("selection", ""), this } getName(e = "jpg") { const t = this.getModel(); let i = t.getProperty("name") || t.getDefaults().name; return i.split(".").pop() !== e && (i += "." + e), i } getTranslationName() { const e = this.getModel(), t = e.getDefaults().name; let i = e.getProperty("name"); if (!i) return t; let n = i.split("."); return n.length > 1 && (n = n.slice(0, -1)), n.push(t), n.join(".") } getBlocksByMode(e = this.getProps()) { let t = []; const i = e.blocks ? JSON.parse(e.blocks) : []; switch (e.mode) { case d.modes.WORDS: i.forEach((function (e) { e.boxes.forEach((function (e) { t = t.concat(e.words) })) })); break; case d.modes.LINES: i.forEach((function (e) { t = t.concat(e.boxes) })); break; case d.modes.BLOCKS: t = i.map((function (e) { return e.text = e.boxes.map((function (e) { return e.text })).join(" "), e.lineCount = e.boxes.length, e })) }if (e.selection) { const i = JSON.parse(e.selection); t = t.map((function (e) { return e.selected = !(e.x + e.w < i.x || e.y + e.h < i.y || i.x + i.w < e.x || i.y + i.h < e.y), e })) } return t } getSelectedBlocks() { return this.getBlocksByMode().filter((function (e) { return Boolean(e.selected) })) } prepareTranslation(e) { return { items: this.getSelectedBlocks().map((function (t, i) { let n = ""; const s = e[i], o = []; let r, a; return t.lineCount ? (r = t.h / t.lineCount, a = Math.ceil(s.length / t.lineCount), s.split(/(\s+)/).forEach((function (e) { if (e.length > a) { let t = n + e; for (; t;)o.push(t.slice(0, a)), t = t.slice(a); n = o.pop() } else n += e, n.length >= a && (o.push(n), n = "") })), n && o.push(n), t.texts = o.map((function (e, i) { return { y: i, w: t.w, h: r, text: e } }))) : t.texts = [{ y: 0, w: t.w, h: t.h, text: s }], t })) } } } t.ImageRecognizerPresenter = d, d.modes = { WORDS: "words", LINES: "lines", BLOCKS: "blocks" }, d.colorPickModes = { POINTS: "points", API: "api" }, d.orientations = { UP: 1, UP_MIRRORED: 2, DOWN: 3, DOWN_MIRRORED: 4, LEFT_MIRRORED: 5, LEFT: 6, RIGHT_MIRRORED: 7, RIGHT: 8 }, d.MAX_IMAGE_WIDTH = 1024 }, , , , function (e, t, i) { "use strict"; t.__esModule = !0, t.ToastPresenter = void 0; var n = i(21); class s extends n.Presenter { constructor(e) { super(e); const t = this.getView(), i = this.getModel(); t.on("tap", (function () { i.resetTimer(), this.setVisible(!1) })), i.on("timedout", (function () { t.setVisible(!1) })).on("set:text", (function (e, i) { if (!e) return this.resetTimer(), t.setVisible(!1); this.resetTimer(), t.setTextContent(e).setVisible(!0), this.setTimeout(i.delay) })) } showToast(e, t) { return this.getModel().setProperty("text", e, { delay: t }), this } } t.ToastPresenter = s }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ToastModel = void 0; var n = i(4); class s extends n.Model { resetTimer() { return clearTimeout(this.getProperty("timer")), this } _onTimeout() { return this.emit("timedout") } setTimeout(e) { return this.setProperty("timer", setTimeout(this._onTimeout.bind(this), e || this.getProperty("delay"))) } getDefaults() { return { text: "", timer: 0, delay: 2e3 } } } t.ToastModel = s }, , , function (e, t, i) { "use strict"; t.__esModule = !0, t.ids = t.VIEWER_ERRORS = t.SCALE_STEP = t.MIN_SCALE = t.MIN_MAXIMAL_SIZE = t.MAX_SCALE = t.MAX_MAXIMAL_SIZE = t.MAX_CLICK_TIMEOUT = t.MAX_CLICK_MOVE = t.IMAGE_MARGIN = t.DOWNLOAD_ALLOWED = t.CONTROLS_WIDTH = t.COMPLAINT_POPUP_HIDE_TIMEOUT = t.BTN_SCALE_STEP = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }; t.COMPLAINT_POPUP_HIDE_TIMEOUT = 4e3; const o = s.default.chromeVersion > 60 || s.default.firefoxVersion > 60 || s.default.safariVersion > 11; t.DOWNLOAD_ALLOWED = o; t.ids = { resultStats: "resultStats", resultImage: "resultImage", resultImageContainer: "resultImageContainer", resultImageWrapper: "resultImageWrapper" }; t.IMAGE_MARGIN = 20; t.CONTROLS_WIDTH = 70; t.MIN_MAXIMAL_SIZE = 150; t.MAX_MAXIMAL_SIZE = 4e3; t.MAX_SCALE = 3; t.MIN_SCALE = .5; t.SCALE_STEP = .05; t.BTN_SCALE_STEP = .5; t.MAX_CLICK_MOVE = 10; t.MAX_CLICK_TIMEOUT = 350; t.VIEWER_ERRORS = { BAD_IMAGE: "bad_image", LARGE_FILE: "large_file", NO_TEXT: "no_text", FAIL: "fail" } }, , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, i) { "use strict"; t.__esModule = !0, t.ScalableView = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(24), r = i(2); class a extends o.TemplateView { static isPointDefine(e) { return Boolean(e && e.x && e.y) } static getMidPoint(e) { return s.default.isEmpty(e) || !this.isPointDefine(e[0]) ? this.EMPTY_POINT : e.reduce(this.getMidpoint) } constructor(e = {}) { super(e), this._minScale = a.MIN_SCALE, this._maxScale = e.maxScale || a.MAX_SCALE, this.on(r.TouchView.eventTypes.CANCEL, this._onEnd).on(r.TouchView.eventTypes.WHEEL, this._onWheel).on(r.TouchView.eventTypes.START, this._onStart).on(r.TouchView.eventTypes.MOVE, this._onMove).on(r.TouchView.eventTypes.END, this._onEnd).bindDOMEvents([r.TouchView.eventTypes.CANCEL, r.TouchView.eventTypes.WHEEL, r.TouchView.eventTypes.START, r.TouchView.eventTypes.MOVE, r.TouchView.eventTypes.END]).reset() } reset() { return this._dx = 0, this._dy = 0, this._scale = 1, this._lastPoints = [], this.update() } update(e) { const t = this.getElement().style, i = ["translate(", this._dx + "px,", this._dy + "px", ") ", "scale(", this._scale, ")"]; e ? (t.willChange = "transform", i.push(" translateZ(0)")) : t.willChange = "auto"; const n = i.join(""); return t.transform = n, t.MozTransform = n, t.WebkitTransform = n, this.emit("update", this._scale) } setScale(e, t) { const i = this.getRect(), n = t || a.EMPTY_POINT, s = Math.max(this._minScale / this._scale, Math.min(e, this._maxScale / this._scale)); return this._scale *= s, this._dy -= (n.y - i.top) * (s - 1), this._dx -= (n.x - i.left) * (s - 1), this._dx = Math.min(0, Math.max(this._dx, (i.width / this._scale - i.width) * s)), this._dy = Math.min(0, Math.max(this._dy, (i.height / this._scale - i.height) * s)), this } _onWheel(e) { let t = e.deltaY; e.deltaMode === WheelEvent.DOM_DELTA_LINE && (t *= a.WHEEL_PX_PER_LINE), t = Math.max(-a.WHEEL_PX_LIMIT, Math.min(t, a.WHEEL_PX_LIMIT)); const i = -t / a.WHEEL_PX_FACTOR + 1; s.default.preventEvent(e), this.setScale(i, { x: e.pageX, y: e.pageY }), this.update() } _onStart(e) { "button" in e && 0 !== e.button || (s.default.preventEvent(e), this._lastPoints = r.TouchView.getPoints(e)) } _onMove(e) { let t = 1; if (!this._pointCount || this._pointCount < 2 && !this.hasState("moved")) return; s.default.preventEvent(e); const i = r.TouchView.getPoints(e), n = a.getMidPoint(i), o = a.getMidPoint(this._lastPoints); this._dx += n.x - o.x, this._dy += n.y - o.y, i.length > 1 && this._lastPoints.length > 1 && (t = r.TouchView.getDistance(i[0], i[1]) / r.TouchView.getDistance(this._lastPoints[0], this._lastPoints[1])), this.setScale(t, n), this.update(!0), this._lastPoints = i } _onEnd(e) { s.default.preventEvent(e), this._lastPoints = r.TouchView.getPoints(e), this.update() } } t.ScalableView = a, a.MIN_SCALE = 1, a.MAX_SCALE = 5, a.WHEEL_PX_LIMIT = 60, a.WHEEL_PX_FACTOR = 300, a.WHEEL_PX_PER_LINE = 15, a.EMPTY_POINT = { x: 0, y: 0 } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ResultImage = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(157), r = i(195); function a(e, t, i) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return i } const d = s.default.iOS ? "xlink:href" : "href", c = "rgba(0, 0, 0, 0.8)", l = "#fff"; var u = new WeakSet, h = new WeakSet, g = new WeakSet, p = new WeakSet, m = new WeakSet; function _(e) { return this.imageContainer.querySelector("#path-" + e) } function f() { return this.imageContainer.querySelectorAll('[data-text-node="true"]') } function E(e) { return this.imageContainer.querySelector(`[data-text-node="true"][data-index="${e}"]`) } function T() { return this.imageContainer.querySelector('[data-text-node="true"][data-highlighted="true"]') } function S(e) { return { rect: e.querySelector("rect"), text: e.querySelector("text") } } t.ResultImage = class { static svgToDataUrlImage(e, t = {}, i = (() => { })) { const { angle: n } = t, s = e.querySelector("image"), r = function (e) { i(e) }, a = new Image; a.onload = function () { const { naturalWidth: t, naturalHeight: d } = a, c = document.createElement("canvas"), l = c.getContext("2d"), u = n / 90 % 2; c.width = u ? d : t, c.height = u ? t : d; const h = o.ImageRecognizerPresenter.getImageTransform(t, d, n).toArray(); l.setTransform.apply(l, h), l.drawImage(a, 0, 0, t, d); const g = Number(s.getAttribute("height")), p = Number(s.getAttribute("width")), m = new Image(p, g); s.parentNode.removeChild(s), m.onload = function () { const e = document.createElement("canvas"), t = e.getContext("2d"); e.width = p, e.height = g, t.drawImage(c, 0, 0, p, g), t.drawImage(m, 0, 0, p, g), i(null, e.toDataURL("image/jpeg", 1)) }; const _ = encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="' + p + '" height="' + g + '">' + e.innerHTML + "</svg>").replace(/%([0-9A-F]{2})/g, (e, t) => { const i = String.fromCharCode("0x" + t); return "%" === i ? "%25" : i }), f = "data:image/svg+xml;base64," + btoa(unescape(_)); m.onerror = r, m.src = f }, a.onerror = r, a.src = s.getAttribute(d) } constructor(e) { m.add(this), p.add(this), g.add(this), h.add(this), u.add(this), this.imageContainer = e } resetComplainNodeHighlight(e) { const t = e.getAttribute("data-index"), i = a(this, u, _).call(this, t); i && i.setAttribute("data-highlighted", "false") } handleComplaintNodes() { a(this, h, f).call(this).forEach(e => { const { rect: t, text: i } = a(this, m, S).call(this, e); if (!t || !i) return; const n = i.getBBox(); t.style.height = n.height + "px", t.style.width = n.width + "px", t.setAttribute("x", n.x + "px"), t.setAttribute("y", n.y + "px") }) } toggleComplaintMode(e) { Array.from(a(this, h, f).call(this)).forEach(t => { const { text: i } = a(this, m, S).call(this, t); if (!i) return; const n = e ? "#000" : i.getAttribute("data-original-fill"); i.setAttribute("fill", n), t.setAttribute("data-highlighted", "false") }) } highlightComplaintNode(e) { const t = e.getAttribute("data-index"), i = a(this, g, E).call(this, t); i && i.setAttribute("data-highlighted", "true") } resetHighlight() { const e = a(this, p, T).call(this); e && e.setAttribute("data-highlighted", "false") } resetHighlights() { const e = this.imageContainer.querySelector('[data-highlighted="true"]'); e && e.setAttribute("data-highlighted", "false") } getSvgHtml(e, t = null, i = !1) { const { shouldShowOrig: n = !1, showOrig: s, nightMode: o, translationData: r, ocrData: a, align: d, viewboxWidth: c, viewboxHeight: l } = e; if (!a || !a.width) return null; const u = this.getImagePreviewSvg(a); let h = ""; s && n && (h = this.getOcrRectsSvg(a)); let g = ""; return !s && r && (g = this.getTranslationsSvg(r, o, i, d, !s)), `\n            <svg ${t ? `id="${t}"` : ""}\n                 class="ocrResult-image"\n                 width="${c}"\n                 height="${l}"\n                 text-rendering="geometricPrecision"\n                 shape-rendering="geometricPrecision"\n                 image-rendering="optimizeQuality"\n                 color-rendering="optimizeQuality"\n                 xmlns="http://www.w3.org/2000/svg"\n                 viewBox="0 0 ${c} ${l}">\n                <defs>\n                    ${i ? '\n                    <filter id="bl" filterUnits="userSpaceOnUse">\n                        <feGaussianBlur in="SourceGraphic" stdDeviation="5" />\n                        <feColorMatrix type="matrix" values="1 0 0 0 0\n                                                             0 1 0 0 0\n                                                             0 0 1 0 0\n                                                             0 0 0 1.5 0"/>\n                    </filter>' : ""}\n                </defs>\n                <g id="imagePreview">${u || ""}</g>\n                <g id="imageSrcText" class="imageSrcText">${h}</g>\n                <g id="imageDstText" class="imageDstText">${g}</g>\n            </svg>\n        ` } getImagePreviewSvg(e) { return e ? `\n            <image\n                ${d}="${e.href}"\n                width="${e.width}"\n                height="${e.height}"\n                transform="${e.transform}"/>` : "" } getOcrRectsSvg({ items: e = [] }) { return e.map(e => `\n            <rect\n                x="${e.x}"\n                y="${e.y}"\n                width="${e.w}"\n                data-fill="${e.backgroundColor}"\n                data-text="${e.textColor}"\n                height="${e.h}"\n                transform="${e.transform}"\n                ${e.selected ? 'class="state-selected"' : ""}></rect>\n        `).join("") } getTranslationsSvg({ overlay: e, items: t = [] }, i, n, o, a) { return `\n            ${e && i ? `\n                <rect\n                    fill="${c}"\n                    class="image-overlay"\n                    width="${e.width}"\n                    height="${e.height}"\n                    transform="${e.transform}"></rect>\n            ` : ""}\n            ${t.map(e => `\n                <path id="${e.pathId}"\n                    ${n ? 'filter="url(#bl)"' : ""}\n                    fill="transparent"\n                    d="${e.strPath}"\n                    ${i ? "" : `stroke="${e.backgroundColor}"`}\n                    ${i ? "" : `stroke-width="${1.3 * e.hh}px"`}/>\n            `).join("")}\n            ${t.map((e, t) => `\n                <g\n                    class="image-text-block"\n                    data-text-node="true"\n                    data-index="${t}">\n                    <rect fill="currentColor" />\n                    <text\n                        dy="0.3em"\n                        fill="${i ? l : e.textColor}"\n                        data-original-fill="${i ? l : e.textColor}"\n                        font-size="${e.fontSize}"\n                        font-family="sans-serif"\n                        data-complaint-target="${a}"\n                        ${(e => { let t = !1; o === r.TEXT_ALIGNS.CENTER ? t = "middle" : o === r.TEXT_ALIGNS.RIGHT && (t = "end"); const i = o === r.TEXT_ALIGNS.JUSTIFY ? e.origTextLength : e.textLength; return `\n                ${t ? `text-anchor="${t}"` : ""}\n                ${11 !== s.default.ieVersion && e.lengthAdjust ? 'lengthAdjust="spacingAndGlyphs"' : ""}\n                ${i ? `textLength="${i}"` : ""}\n            ` })(e)}>\n                        <textPath\n                            data-index="${t}"\n                            ${d}="#${e.pathId}"\n                            ${r.TEXT_COMPLAINT_NODE_ATTR}="true"\n                            ${(e => { let t = !1; o === r.TEXT_ALIGNS.CENTER ? t = 50 : o === r.TEXT_ALIGNS.RIGHT && (t = 100); const i = o === r.TEXT_ALIGNS.JUSTIFY ? e.origTextLength : e.textLength; return `\n                ${11 !== s.default.ieVersion && e.lengthAdjust ? 'lengthAdjust="spacingAndGlyphs"' : ""}\n                ${i ? `textLength="${i}"` : ""}\n                ${t ? `startOffset="${t}%"` : ""}\n            ` })(e)}>\n                            ${s.default.escapeHTML(e.text)}\n                        </textPath>\n                    </text>\n                </g>\n            `).join("")}\n        ` } } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.TEXT_COMPLAINT_NODE_ATTR = t.TEXT_ALIGNS = void 0; t.TEXT_ALIGNS = { LEFT: "left", CENTER: "center", RIGHT: "right", JUSTIFY: "justify" }; t.TEXT_COMPLAINT_NODE_ATTR = "data-complaint-text" }, function (e, t, i) { "use strict"; t.__esModule = !0, t.i18n = void 0; const n = (window.config || {}).MESSAGES || {}; t.i18n = n }, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, i) { "use strict"; i(73); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(2), r = i(4), a = i(18), d = i(142), c = i(131), l = i(125), u = i(128), h = i(145), g = i(129), p = i(306), m = i(307), _ = i(324), f = i(328); window.initImageApp = e => { e.ELEMENTS = (0, f.getImageElements)(), delete e.TRANSLATOR_LANGS.emj, s.default.prepareLoggingEnvironment(); const t = new _.ImageRecognizerApplication({ config: e, view: new o.TouchView({ element: document.documentElement, DOMEvents: `keydown keypress ${o.TouchView.eventTypes.MOVE} copy`, ignoreSelection: !0 }), model: new r.Model({ mode: "", trText: "", tooltip: "", srcLang: "", dstLang: "" }, { validators: { srcLang: t => s.default.hasProperty(e.OCR_LANGS, t), dstLang: e => s.default.hasProperty(a.TranslateApplication.getAllDstLangs(), e) } }) }); t.registerModule(c.TooltipModule).registerModule(l.UserMenuModule).registerModule(p.ImageLanguagesModule).registerModule(d.FileDropModule).registerModule(u.AccessibilityModule).registerModule(m.ImageRecognizerModule).registerModule(h.LocaleRoutesListModule), e.ENABLE_UNIFIED_LAYOUT && t.registerModule(g.HeaderAdaptiveModule), t.initToast(e).initMetrikas(e) } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageLanguagesModule = void 0; var n = i(106); class s extends n.DesktopLanguagesModule { initInternal() { super.initInternal(), this.app.getTranslatorModel().onSet("translation", e => { e && (this.srcRecentLanguagesModel.update(), this.dstRecentLanguagesModel.update()) }) } getTranslatorElement() { return this.appConfig.ELEMENTS.fileContainer } getSrcLangsModelFilters() { return { languages: e => this.matchOcrLangs(e) } } matchOcrLangs(e) { const t = {}; return Object.keys(e).filter(e => this.appConfig.OCR_LANGS[e]).forEach(i => t[i] = e[i]), t } } t.ImageLanguagesModule = s }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageRecognizerModule = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(7), r = i(5), a = i(10), d = i(2), c = i(308), l = i(133), u = i(309), h = i(310), g = i(138), p = i(311), m = i(157), _ = i(17), f = i(66), E = i(194), T = i(3), S = i(317), v = i(134), C = i(318), L = i(69), A = i(319), y = i(321), b = i(32), R = i(322), w = i(165), O = i(196); class P extends r.AppModule { constructor(e, t) { super(e, t), this.storage = new l.SessionStorage, this.makeImagePicker(), this.makeRecognizer(), this.makeImageViewer(), this.makeChoiceGroup(), this.makeComplaintViews(), this.listenImagePicker(), this.listenRecognizer(), this.listenTranslatorModel(), this.listenSettings(), this.listenAppModel(), this.listenApp(), this.listenImageViewer(), this.listenAppView(), this.listenRecognizerView(), this.startRecognizing = this.debounceMethod(() => this.startRecognizing(), 1e3), this.setupModule() } startRecognizing() { this.imageViewer.setIsRecognizing(!0), this.recognizer.setAutorotate(!0).updateImage().requestBlocks() } downloadHandler(e) { const t = this.imageViewer.getSvgElement({ nightMode: !1 }), i = () => { const e = this.appConfig.ELEMENTS.downloadButton; this.appModel.setProperty("tooltip", O.i18n.downloadingErrorTooltip, { rect: e.getBoundingClientRect(), position: "bottom" }) }; E.ResultImage.svgToDataUrlImage(t, this.recognizer.getProps(), (t, n) => { t ? ((0, o.logError)(t), i()) : e && (e.ctrlKey || e.metaKey) && s.default.firefoxVersion ? window.open(n, "_blank") : s.default.downloadFile(n, this.recognizer.getTranslationName()) }), T.$tracker.sendMetric("ocr_download") } updateLangs() { const { srcLang: e, dstLang: t } = this.appModel.getProps(); e !== t && (this.recognizer.setLanguage(e).clearSelection(), this.translatorModel.setProperty({ srcLang: e, dstLang: t })) } listenImagePicker() { this.imagePicker.onNewImage((e, t) => { var i; try { this.recognizer.setImage(e), this.recognizer.setName(t.name), this.imageViewer.setImage(e, t), this.appView.setState("empty", !1) } catch (e) { } T.$tracker.sendMetric("ocr_load_image", { dir: this.app.getLangsPair(), type: t.type, source: null !== (i = t.source) && void 0 !== i ? i : v.PICKER_SOURCE.OCR, file_name: this.imagePicker.getFileName() }), this.feedbackPopup.setVisible(!1), this.feedback.reset().update() }) } listenRecognizer() { this.recognizer.on("detect", e => { this.app.setSrcLanguage(e) }).on("query", () => { this.imageViewer.setIsRecognizing(!0) }).on("result", (e, t) => { var i, n; const s = t ? new Date - t.requestTimestamp : 0, o = null !== (i = null == t || null === (n = t.body) || void 0 === n ? void 0 : n.request_id) && void 0 !== i ? i : null, r = this.recognizer.getTextFromBlocks(), a = !r.length || e; if (T.$tracker.sendMetric("ocr_recognize", { time: s, failed: a ? 1 : 0, has_text: r.length ? 1 : 0, request_id: o }), !r.length) return this.imageViewer.setError(w.VIEWER_ERRORS.NO_TEXT); this.appView.setState("paste", r), this.translatorModel.setText("").setText(r, { reason: "ocr" }), this.feedbackPopup.setVisible(!1), this.feedback.reset() }).on("imageChange", e => { this.translatorModel.resetCache(), e && (this.appSettings.getProperty("auto") ? this.recognizer.setAutodetect(!0) : this.recognizer.setLanguage(this.appModel.getProperty("srcLang")).setAutodetect(!1)) }).on("expired", () => { this.appView.setState("expired", !0), this.app.emit("refreshAlertShow") }), this.recognizerModel.onChange(["viewboxWidth", "viewboxHeight"], (e, t) => { this.imageViewer.setProperty(e, t) }), this.srcRecognizerComplaintModel.on("response", this.complaintImageResponseHandler.bind(this)), this.dstRecognizerComplaintModel.on("response", this.complaintImageResponseHandler.bind(this)) } complaintImageResponseHandler({ type: e, url: t }) { T.$tracker.sendMetric("ocr_complaint_image_send", { type: e, source: t, image: this.imagePicker.getFileName() }) } listenTranslatorModel() { this.translatorModel.onChange(["text", "srcLang", "dstLang"], (e, t, i) => { i.reason && this.translatorModel.setProperty("reason", i.reason), this.translatorModel.requestTranslation() }).on("error", e => { const t = e.body && e.body.code; if (this.imageViewer.setError(w.VIEWER_ERRORS.FAIL), t === g.TranslatorModel.errorMap.INVALID_SESSION || t === g.TranslatorModel.errorMap.EXPIRED_SESSION) return this.app.emit("expired", t); this.app.emit("error", e) }).on("query", () => { this.imageViewer.setIsTranslating(!0) }).onInvalid("text", () => { this.translatorModel.reset().setProperty("translation", "") }).onSet("translation", e => { if (!e) return; this.imageViewer.setShowOrig(!1), this.imageViewer.setIsTranslating(!1), this.imageViewer.setError(null), this.imageViewer.resetImageState(); const t = this.recognizer.prepareTranslation(e.split("\n")); this.imageViewer.setTranslationData(t) }) } listenSettings() { this.appSettings.onChange("auto", e => { this.recognizer.setAutodetect(e), this.recognizer.requestBlocks() }) } listenAppModel() { this.appModel.onChange("appOnline", e => { e && this.appView.hasState("offline") && (this.appView.setState("offline", !1), this.imageViewer.setError(!1), this.app.emit("action:reScan")) }).onChange("srcLang", (e, t) => { t && "langSelect" === t.sender && (this.recognizer.setLanguage(e).setAutodetect(!1), this.recognizer.requestBlocks()), this.translatorModel.setText("").setProperty({ srcLang: e }) }).onChange("dstLang", e => { this.translatorModel.setProperty({ dstLang: e }) }).onChange(() => { this.resetComplaint() }) } listenAppView() { this.appView.onStateChanged("empty", e => { this.appView.setState("drop-transparent", e) }).once("stateChanged:empty", () => { this.appView.setState("no-footer", !0) }).onStateChanged("complaint", e => { this.complaintInfoPopup.setVisible(e) }).on("keydown", ({ keyCode: e }) => { e === a.KEYBOARD_KEYS.ESCAPE && this.resetComplaint() }).setState("download-allowed", w.DOWNLOAD_ALLOWED); const e = e => e === this.appConfig.ELEMENTS.feedbackPopup || e === this.appConfig.ELEMENTS.feedbackPopupButton; this.appView.on(d.TouchView.eventTypes.START, t => { this.feedbackPopup.isVisible() && !s.default.getClosest(t.target, e) && (this.feedbackPopup.setVisible(!1), T.$tracker.sendMetric("feedback_close", this.feedback.getFeedback())) }), this.appView.onStateChanged("translated", () => { this.appConfig.ENABLE_FEEDBACK_PROMO_FREQUENCY ? this.showExpPromoFeedback() : this.showPromoFeedback() }) } showPromoFeedback() { const e = Date.now(), t = this.appSettings.getProperty("promoTooltip"); (!t || e - t > 864e5) && setTimeout(() => { const t = this.appView.hasState("translated"); !this.feedbackPopup.isVisible() && t && (this.promoTooltip.show(), T.$tracker.sendMetric("feedback_promo", { source: "ocr" }), this.appSettings.setProperty("promoTooltip", e)) }, this.appConfig.ENABLE_FEEDBACK_PROMO_TIMEOUT ? 1e3 : 3e3) } showExpPromoFeedback() { const e = (new Date).toISOString().split("T")[0], t = this.getPromoTooltipExpLastLogDate(), i = s.default.getRandomBoolean(), n = e !== t, o = e === t, r = t && n ? 0 : this.getPromoTooltipExpTodayCount(); i && (n || o && r < 3) && setTimeout(() => { const t = this.appView.hasState("translated"); !this.feedbackPopup.isVisible() && t && (this.promoTooltip.show(), T.$tracker.sendMetric("feedback_promo", { source: "ocr" }), this.setPromoTooltipExpLastLogDate(e), this.setPromoTooltipExpTodayCount(r + 1)) }, this.appConfig.ENABLE_FEEDBACK_PROMO_TIMEOUT ? 1e3 : 3e3) } getPromoTooltipExpLastLogDate() { return this.appSettings.getProperty("promoTooltipExpLastLogDate") || "" } setPromoTooltipExpLastLogDate(e) { this.appSettings.setProperty("promoTooltipExpLastLogDate", e) } getPromoTooltipExpTodayCount() { return this.appSettings.getProperty("promoTooltipExpTodayCount") || 0 } setPromoTooltipExpTodayCount(e) { this.appSettings.setProperty("promoTooltipExpTodayCount", e) } listenRecognizerView() { this.recognizerView.onStateChanged("rotated", e => { this.appView.setState("translated", !e) }) } listenApp() { this.app.on("resize", () => { this.feedbackPopup.setVisible(!1) }), this.app.onAction("feedbackShow", () => { this.feedbackPopup.isVisible() || T.$tracker.sendMetric("feedback_show", this.feedback.getFeedback()); const e = this.appConfig.ELEMENTS.feedbackPopupButton.getBoundingClientRect(); this.feedbackPopup.setPosition(e, !1, !0).setVisible(!0) }).onAction("pickFile", () => { this.imagePicker.pickImage() }).onAction("swapDirection", s.default.debounce(() => { this.updateLangs(), this.translatorModel.setText(""), this.recognizer.setAutodetect(!1).requestBlocks() })).onAction("rotate", (e = -90) => { this.imageViewer.resetImageState(), this.recognizer.rotateImage(e, !0), this.imageViewer.setError(null), this.startRecognizing(), T.$tracker.sendMetric("ocr_rotate", { angle: this.recognizerModel.getProperty("angle") }) }).onAction("toggleOrig", () => { this.imageViewer.toggleOrig() }).onAction("resetImage", () => { this.appView.setState("empty", !0), this.imagePicker.reset(), this.imageViewer.reset(), this.recognizer.setImage(""), this.feedbackPopup.setVisible(!1), this.feedback.reset() }).onAction("toggleContrast", () => { this.imageViewer.getProperty("showOrig") && this.imageViewer.toggleOrig(), this.imageViewer.toggleNightMode() }).onAction("paste", () => { const e = this.recognizer.getTextFromBlocks(); this.appModel.setProperty("trText", e.join("\n").replace(/\s?<wbr>\s?/gi, "\n")), window.open(this.app.getLink()), T.$tracker.sendMetric("ocr_translation_navigate", { dir: this.app.getLangsPair() }) }).onAction("reScan", () => { this.recognizer.requestBlocks(), this.feedbackPopup.setVisible(!1), this.feedback.reset().update() }).onAction("download", (e, { originalEvent: t }) => { this.downloadHandler(t) }).onAction("cancelComplaintMode", () => { this.resetComplaint() }).onAction("sendComplaint", () => { this.setComplaintPopupStatus("success"), clearTimeout(this.popupHideTimeout), this.popupHideTimeout = setTimeout(() => { this.resetComplaint() }, w.COMPLAINT_POPUP_HIDE_TIMEOUT), T.$tracker.sendMetric("ocr_complaint_send", { dir: this.app.getLangsPair(), comment: this.complaintPopupProposalInput.value, value: this.textToComplaint, image: this.imagePicker.getFileName() }), this.sendComplaintImages() }).onAction(["openSrcLanguages", "openDstLanguages"], () => { this.resetComplaint() }).on("ocrSwitchAlign", e => { this.imageViewer.setAlign(e) }).on("imageDropped", (e, t) => { this.imagePicker.setImage(e, { type: t || v.PICKER_TYPE.DROP }) }).on("pasteImage", e => { this.imagePicker.setImage(e, { type: v.PICKER_TYPE.PASTE }) }).onFocusedElementActivation(e => { e.className.indexOf("dropMessage-text") > -1 && this.app.emit("action:pickFile") }) } listenImageViewer() { this.imageViewer.on("rotate", e => { this.app.emit("action:rotate", e) }).onChange("error", e => { this.appView.setState("offline", e && !s.default.isOnline()) }).onChange("showOrig", e => { this.appView.setState("orig", e), this.choiceGroup.setSelectedElement(e ? 1 : 0), T.$tracker.sendMetric(e ? "ocr_orig_show" : "ocr_orig_hide", { orig: Boolean(e) }) }).onChange("nightMode", e => { const t = Boolean(e); this.appView.setState("contrast", t), T.$tracker.sendMetric(t ? "ocr_contrast_enable" : "ocr_contrast_disable", { enable: t }) }).onChange("translationData", e => { this.appView.setState("translated", Boolean(e)) }).onChange("align", e => { this.appView.getElement().setAttribute("data-align", e), T.$tracker.sendMetric("ocr_align_change", { align: e }) }).onToggleComplaintMode(() => { this.appView.setState({ complaint: !this.appView.hasState("complaint") }), this.complaintPopup.setVisible(!1), this.appView.hasState("complaint") && T.$tracker.sendMetric("ocr_complaint_open", { dir: this.app.getLangsPair(), image: this.imagePicker.getFileName() }) }).onComplaintTargetSet(e => { if (this.appView.setState({ complaint: !1 }), clearTimeout(this.popupHideTimeout), !e) return void this.complaintPopup.setVisible(!1); this.textToComplaint = (e.innerHTML || "").trim(), this.complaintPopupProposalInput.value = "", this.setComplaintPopupStatus("complaint"); const t = this.getComplaintRect(e); this.complaintPopup.setPosition(t, !1, !0).setVisible(!0) }).onChange(() => { this.resetComplaint() }) } getComplaintRect(e) { const t = e.getBoundingClientRect(); return { width: 1, height: 1, top: (t.top + t.bottom) / 2, left: (t.left + t.right) / 2, right: (t.left + t.right) / 2 + 1, bottom: (t.top + t.bottom) / 2 + 1 } } setComplaintPopupStatus(e) { this.complaintPopup.getElement().setAttribute("data-status", e) } resetComplaint() { this.appView.setState({ complaint: !1 }), this.imageViewer.resetComplaintTarget(), this.complaintPopup.setVisible(!1) } sendComplaintImages() { const e = this.imageViewer.getSvgElement({ nightMode: !1, showOrig: !0 }); E.ResultImage.svgToDataUrlImage(e, this.recognizer.getProps(), (e, t) => { e ? (0, o.logError)(e) : this.srcRecognizerComplaintModel.setProperty("dataURL", t).requestUpload() }); const t = this.imageViewer.getSvgElement({ nightMode: !1, showOrig: !1 }); E.ResultImage.svgToDataUrlImage(t, this.recognizer.getProps(), (e, t) => { e ? (0, o.logError)(e) : this.dstRecognizerComplaintModel.setProperty("dataURL", t).requestUpload() }) } makeImageViewer() { this.imageViewer = new R.ImageViewer({ imagePicker: this.imagePicker, dblClickZoom: !0, isComplaintActive: () => this.appView.hasState("complaint"), onOcrUrlEntered: e => this.handleOcrUrlEntered(e) }, { container: this.appConfig.ELEMENTS.ocrContainer }) } handleOcrUrlEntered(e) { const t = this.app.getProxiedImageUrl(e); this.imageViewer.setProperty({ isOcrUrlFetching: !0, shouldShowOcrUrlButton: !1 }), this.requestImage({ url: t, onSuccess: () => { this.imageViewer.setProperty({ isOcrUrlFetching: !1 }) }, onError: () => { this.imageViewer.setProperty({ isOcrUrlFetching: !1, ocrUrlError: O.i18n.imageNotFoundByOcrUrl }), T.$tracker.sendMetric("ocr_url_error", { url: e }) }, metricParams: { type: v.PICKER_TYPE.URL } }) } makeRecognizer() { const { modes: e, colorPickModes: t } = m.ImageRecognizerPresenter, i = this.appConfig; this.recognizerModel = new u.ImageRecognizerModel({ srv: i.SRV, url: i.OCR_URL, mode: e.BLOCKS, timeout: i.OCR_TIMEOUT, adjustColors: !0, skipSameLines: !1, adaptiveTextSize: !0, arrangeTranslations: !0, increaseLineWidth: !0, autorotate: !0, colorPickMode: t.POINTS }, { validators: { lang(e) { return this.autodetectEnabled() || e && e.split(",").every(e => s.default.hasProperty(i.OCR_LANGS, e)) }, dataURL: e => e } }), this.translatorModel = this.app.getTranslatorModel(), this.recognizerView = new c.BasicImageView, this.recognizer = new p.ImagePolynomialsPresenter({ view: this.recognizerView, model: this.recognizerModel }), this.srcRecognizerComplaintModel = new h.ImageRecognizerComplaintModel({ srv: i.SRV, url: i.OCR_COMPLAINT_UPLOAD_URL, type: "src" }), this.dstRecognizerComplaintModel = new h.ImageRecognizerComplaintModel({ srv: i.SRV, url: i.OCR_COMPLAINT_UPLOAD_URL, type: "dst" }) } makeImagePicker() { this.imagePicker = new S.ImagePicker({ dropAreaView: this.app._dropAreaView, fileInput: this.appConfig.ELEMENTS.fileInput, imageCollectingCallback: e => { this.appConfig.ENABLE_IMAGES_COLLECTING && (0, C.collectOcrImage)(this.appConfig.IMAGES_COLLECTING_URL, this.appConfig.SRV, this.appConfig.SID, e) } }) } makeChoiceGroup() { this.choiceGroup = new L.ChoiceGroup({ activeIndex: 0, items: [{ content: O.i18n.translationButton, ariaLabel: O.i18n.translationButtonTooltip, onClick: () => this.imageViewer.setShowOrig(!1) }, { content: O.i18n.originalButton, ariaLabel: O.i18n.originalButtonTooltip, onClick: () => this.imageViewer.setShowOrig(!0) }] }, { container: this.appConfig.ELEMENTS.origChoiceGroup }) } makeComplaintViews() { this.promoTooltip = new y.Tooltip({ content: b.locales.feedback.promo, position: "top-left", promo: !0, sticky: !0, target: this.appConfig.ELEMENTS.feedbackPopupButton }), this.feedbackPopup = new d.TouchView({ element: this.appConfig.ELEMENTS.feedbackPopup, hideAfterTransition: !0 }), this.feedback = new A.Feedback({ source: "ocr" }, { container: this.appConfig.ELEMENTS.feedbackPopup }), this.complaintInfoPopup = new d.TouchView({ element: this.appConfig.ELEMENTS.complaintInfoPopup, hideAfterTransition: !0 }), this.complaintPopup = new d.TouchView({ element: this.appConfig.ELEMENTS.complaintPopup, hideAfterTransition: !0 }), this.popupHideTimeout = null, this.textToComplaint = null, this.complaintPopupProposalInput = this.appConfig.ELEMENTS.complaintPopupProposalInput } setupModule() { if (this.recognizerView.renderData = s.default.debounce(e => { e && e.width && this.imageViewer.setOcrData(e) }), this.recognizer.setAutorotate(!0).setAutodetect(this.appSettings.isAutodetectEnabled()), this.app._dropAreaView.on("formatError", () => { this.app.emit("action:resetImage"), this.imageViewer.setError(w.VIEWER_ERRORS.BAD_IMAGE) }).on("sizeError", () => { this.app.emit("action:resetImage"), this.imageViewer.setError(w.VIEWER_ERRORS.LARGE_FILE) }), this.updateLangs(), sessionStorage.getItem("storedFile")) { const e = this.storage.getItem("storedFile"), t = this.storage.getItem("storedFileInfo"); this.imagePicker.setImage(s.default.dataURLToBlob(e), { type: (null == t ? void 0 : t.pickerType) || "", source: (null == t ? void 0 : t.source) || "" }), this.storage.removeItem("storedFile"), this.storage.removeItem("storedFileInfo") } else if (this.appConfig.OCR_IMAGE_URL && s.default.isUrl(this.appConfig.OCR_IMAGE_URL)) this.app.on("pageLoaded", () => { this.requestImage({ url: this.appConfig.OCR_IMAGE_URL, metricParams: { type: v.PICKER_TYPE.URL } }) }); else if (sessionStorage.getItem("storedUrl")) { const e = this.storage.getItem("storedUrl"), t = this.storage.getItem("storedFileInfo"); this.requestTabUrlImage(e, (null == t ? void 0 : t.source) || "", (null == t ? void 0 : t.pickerType) || ""), this.storage.removeItem("storedUrl"), this.storage.removeItem("storedFileInfo") } this.app.on("tabDropped", e => { this.appConfig.ENABLE_URL_DROPPED_OCR && this.requestTabUrlImage(e, v.PICKER_SOURCE.OCR, v.PICKER_TYPE.URL_DROP) }) } requestTabUrlImage(e, t, i) { const n = this.app.getProxiedImageUrl(e); this.imageViewer.setIsTranslating(!0); this.requestImage({ url: n, onError: () => { this.imageViewer.setError(w.VIEWER_ERRORS.BAD_IMAGE), T.$tracker.sendMetric("ocr_url_drop_error", { url: e, source: t }) }, metricParams: { source: t, type: i } }) } requestImage({ url: e, onSuccess: t, onError: i, metricParams: n = {} }) { var r, a; const d = new _.HTTPRequest(e), c = { type: null !== (r = n.type) && void 0 !== r ? r : void 0, source: null !== (a = n.source) && void 0 !== a ? a : void 0 }; d.setResponseType(f.HTTPResponse.types.ARRAYBUFFER).send((e, n) => { if (n) { const e = new Blob([n.body], { type: n.type }); return this.appSettings.setAutodetectEnabled(!0), this.imagePicker.setImage(e, c), void (s.default.isFunction(t) && t()) } e && (0, o.logError)(e), s.default.isFunction(i) && i() }) } } t.ImageRecognizerModule = P }, function (e, t, i) { "use strict"; t.__esModule = !0, t.BasicImageView = void 0; var n = i(2); class s extends n.TouchView { constructor(e) { super(e), this._image = new Image, this._image.onload = () => { this.emit("load", this._image) }, this._image.onerror = e => { this.emit("loadError", e) } } reset() { return this } getImage() { return this._image } setImage(e) { return this._image.src = e, this } setViewBox() { return this } } t.BasicImageView = s }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageRecognizerModel = void 0, t.hasWebpSupport = d; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(48), r = i(17), a = i(28); function d() { return s.default.chromeVersion && s.default.chromeVersion > 75 } let c = ""; document.location.href.indexOf("ocr-dump-tool=1") > -1 && (window.__getSentImage = () => c); class l extends o.SyncModel { abort() { return o.SyncModel.prototype.abort.call(this), this.setProperty("blocks", "") } getDefaults() { const e = d(); return { srv: "", url: "", mode: "", lang: "*", href: "", name: "translated.jpg", autorotate: !1, autodetect: !1, type: e ? "image/webp" : "image/jpeg", angle: 0, width: 0, height: 0, blocks: "", dataURL: "", timeout: 1e3, quality: e ? .9 : .85, selection: "", blocksAngle: 0, viewboxWidth: 0, viewboxHeight: 0, colorPickMode: null, adjustColors: !1, skipSameLines: !1, adaptiveTextSize: !1, arrangeTranslations: !1, increaseLineWidth: !1 } } runRequest() { const e = this, t = this.getProps(), i = new FormData, n = new r.HTTPRequest(t.url), o = { srv: t.srv, sid: t.sid, lang: t.autodetect ? "*" : t.lang }; return this.abort(), this.isValid() ? (this.emit("query"), t.autorotate && (o.rotate = "auto"), c = t.dataURL, i.append("file", s.default.dataURLToBlob(t.dataURL)), this.setRequest(n.setData(i).setMethod(r.HTTPRequest.methods.POST).setParams(o).setTimeout(t.timeout).send((function (i, n) { let s = i, o = n; const r = s ? "error" : o.body.status; if ("success" === r) { const i = o.body.data; e.setProperty("blocksAngle", i.rotate ? -i.rotate : t.angle), i.detected_lang && (e.setProperty("lang", i.detected_lang, { silent: !0 }), e.emit("detect", i.detected_lang)), e.setProperty("blocks", JSON.stringify(i.blocks)) } else s = s || new a.HTTPError(o.code, r), o = null; e.emit("result", s, o) })))) : this } requestBlocks() { return this.getSid().then(() => this.runRequest()), this } autodetectEnabled() { return this.getProperty("autodetect") } } t.ImageRecognizerModel = l, l.errors = { INVALID_SESSION: 403 } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageRecognizerComplaintModel = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(7), r = i(48), a = i(17), d = i(28); class c extends r.SyncModel { getDefaults() { return { srv: "", url: "", type: "", dataURL: "" } } runRequest() { const e = this.getProps(), t = new a.HTTPRequest(e.url), i = { srv: e.srv, sid: e.sid }, n = new FormData; return n.append("file", s.default.dataURLToBlob(e.dataURL)), this.setRequest(t.setData(n).setMethod(a.HTTPRequest.methods.POST).setParams(i).send((t, i) => { if (t && t.code !== d.HTTPError.ABORT) return (0, o.logError)(t), this.emit("error", t); this.emit("response", { type: e.type, url: i.text }) })) } requestUpload() { return this.getSid().then(() => this.runRequest()), this } } t.ImageRecognizerComplaintModel = c }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImagePolynomialsPresenter = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(312), r = i(313), a = i(157), d = i(316); class c extends a.ImageRecognizerPresenter { static createPathId(e) { return this.PATH_PREFIX + e } static createTranslatedBlock(e, t = "", i = !1) { const n = e.text; return e.srcText = n, e.text = s.default.unescapeHTML(t), e.textLength = e.length, e.fontSize = e.hh, i ? this.adaptBlockTextSize(e) : n.length / e.text.length >= this.MAX_LENGTH_RATIO ? (e.startOffset = !0, e.textAnchor = !0, e.textLength = !1, e.length = !1) : e.lengthAdjust = !0, e } static adaptBlockTextSize(e) { const t = this.getTextsWidthRatio(e.srcText, e.text, e.hh); if (e.lengthAdjust = !0, e.origFontSize = e.fontSize, e.origTextLength = e.textLength, t && t < .95) e.textLength = e.length * Math.max(.4, t); else if (t && t > 1.05) { const i = 11 === s.default.ieVersion ? t : Math.min(1.3, (t + 2.95) / 4); e.fontSize = e.fontSize / i } } static getTextsWidthRatio(e, t, i) { const n = `normal ${Math.ceil(i)}px sans-serif`, s = this.getTextWidth(e, n), o = this.getTextWidth(t, n); return s ? o / s : 0 } static getTextWidth(e, t) { this._$textSizeCanvas || (this._$textSizeCanvas = document.createElement("canvas")); const i = this._$textSizeCanvas.getContext("2d"); i.font = t; return i.measureText(e).width } static areTextsSame(e, t) { return e && t && e.toLowerCase() === t.toLowerCase() } static hasLatCyrChar(e) { return e && e.match(/[a-zР°-СЏ]/i) } prepareTranslation(e) { const t = this.getProps(), i = new d.CubicEquation, n = this.getBlocksByMode(); let s = [], o = []; t.mode === a.ImageRecognizerPresenter.modes.BLOCKS ? n.forEach((i, n) => { const r = e[n].split(/\s?<wbr>\s?/gi); if (i.boxes.forEach((e, t) => { e.translation = r[t] || "" }), t.arrangeTranslations) try { this.separateBlockBoxes(i.boxes).forEach(e => { this.arrangeBlockTranslations(e) }) } catch (e) { } t.skipSameLines ? i.boxes = i.boxes.filter(({ text: e, translation: t }) => !c.areTextsSame(e, t)) : i.boxes = i.boxes.filter(({ text: e, translation: t }) => !c.areTextsSame(e, t) || c.hasLatCyrChar(t)), o = o.concat(r), s = s.concat(i.boxes) }) : (s = n, o = e); const r = a.ImageRecognizerPresenter.getImageTransform(t.width, t.height, t.angle); return s = s.map((function (e, n) { const s = { yByX: e.polyCoefs.fromXtoY, polyCoefs: e.polyCoefs }; return s.yByX ? (e.length = e.w, s.width = e.w, s.startPoint = e.x) : (e.length = e.h, s.width = e.h, s.startPoint = e.y), t.increaseLineWidth && (s.width += .3 * e.polyCoefs.hh), i.init(s), e.pathId = c.createPathId(n), e.strPath = i.getPath(), e.hh = Math.ceil(1.4 * e.polyCoefs.hh), e.translation = e.translation || o[n], e })), { items: s.map(e => c.createTranslatedBlock(e, e.translation, t.adaptiveTextSize)), overlay: { width: t.width, height: t.height, transform: `matrix(${r})` } } } prepareData(e) { e.mode = a.ImageRecognizerPresenter.modes.WORDS; const t = this.getBlocksByMode(e), i = new d.CubicEquation; t.forEach((function (e) { const t = e.x; let n = e.y; const s = { yByX: e.polyCoefs.fromXtoY, polyCoefs: e.polyCoefs }; s.yByX ? (e.length = e.w, s.width = e.w, s.startPoint = e.x) : (e.length = e.h, s.width = e.h, s.startPoint = e.y), i.init(s); const o = i.getAverageAngle(); o < 0 && (n += e.h - e.polyCoefs.hh, e.y = n), e.w = Math.ceil(i.getRealWidth()), e.h = Math.ceil(e.polyCoefs.hh), e.transform = i.formatRotationString(o, t, n) })); const n = a.ImageRecognizerPresenter.getImageTransform(e.width, e.height, e.angle); return { href: e.href, width: e.width, items: t, height: e.height, transform: `matrix(${n})` } } getBlocksByMode(e = this.getProps()) { let t = []; const { SELECTION_ADJUST: i } = r.ImagePolynomialsView, { modes: n, colorPickModes: s } = a.ImageRecognizerPresenter, d = e.blocks ? JSON.parse(e.blocks) : [], c = e => "string" == typeof e ? e : `rgba(${e.r}, ${e.g}, ${e.b}, ${1 - e.a})`, l = e => e && "string" != typeof e ? `rgba(${e.r}, ${e.g}, ${e.b}, ${"a" in e ? e.a : 1})` : e; switch (e.mode) { case n.WORDS: d.forEach((function (e) { e.boxes.forEach((function (e) { t = t.concat(e.words.map(t => (t.backgroundColor = c(e.backgroundColor), t.textColor = c(e.textColor), t))) })) })); break; case n.LINES: d.forEach((function (e) { t = t.concat(e.boxes) })); break; case n.BLOCKS: t = d.map(t => { t.boxes.forEach(t => { if (e.colorPickMode === s.POINTS) { let i = this.pickColorByPoints(t.textColor.Points); const n = this.pickColorByPoints(t.backgroundColor.Points); i && n && e.adjustColors && (i = (0, o.adjustTextColor)(i, n)), t.backgroundColor = l(n) || c(t.backgroundColor), t.textColor = l(i) || c(t.textColor) } else t.backgroundColor = c(t.backgroundColor), t.textColor = c(t.textColor) }); const i = "he" === e.lang ? " . " : " <wbr> "; return t.text = t.boxes.reduce((e, t) => e ? e + i + t.text : t.text, ""), t.lineCount = t.boxes.length, t }) }if (e.selection) { const n = JSON.parse(e.selection); t = t.map((function (e) { const t = e.x, s = e.y, o = e.x + e.w, r = e.y + e.h; return e.selected = n.some((function (e) { return t < e.x + i && e.x - i < o && s < e.y + i && e.y - i < r })), e })) } return t } getSelectedBlocks() { const e = this.cloneProps(); return e.mode = a.ImageRecognizerPresenter.modes.WORDS, this.getBlocksByMode(e).filter((function (e) { return Boolean(e.selected) })) } getTextFromBlocks(e = this.getBlocksByMode()) { return e.length ? e.map(e => e.text) : [] } pickColorByPoints(e) { const { colorfulCanvas: t } = this.getProps(); if (!t) return null; const i = e.map(({ x: e, y: i }) => { try { return this.pickCanvasColor(e, i, t) } catch (e) { return null } }).filter(e => e); if (!i.length) return null; const n = {}; return ["r", "g", "b", "a"].forEach(e => { n[e] = Math.floor(s.default.calcMedian(i.map(t => t[e]))) }), n.a /= 255, n } pickCanvasColor(e, t, i) { const n = Boolean(s.default.firefoxVersion), o = i.getContext("2d"), r = e => e && e.length >= 4 ? { r: e[0], g: e[1], b: e[2], a: e[3] } : null; if (n) { const { width: n, height: s } = i, a = 4 * (t * n + e); return i._imageData || (i._imageData = o.getImageData(0, 0, n, s).data), r(i._imageData.slice(a, a + 4)) } return r(o.getImageData(e, t, 1, 1).data) } separateBlockBoxes(e, t = 40, i = .15) { if (!e || !e.length) return []; const n = []; let s = [e[0]]; const o = e => { const [t, i, n, s] = e.split("(")[1].split(")")[0].split(",").map(e => Number(e.trim())); return { r: t, g: i, b: n, a: s } }, r = (e, n) => { if (Math.abs(e.h - n.h) > (e.h + n.h) / 2 * i) return !0; return ((e, t) => Math.abs(e.r - t.r) + Math.abs(e.r - t.r) + Math.abs(e.g - t.g))(o(e.textColor), o(n.textColor)) > t }; for (let t = 1; t < e.length; t++) { const i = e[t]; r(i, s[s.length - 1]) ? (n.push(s), s = [i]) : s.push(i) } return n.push(s), n } arrangeBlockTranslations(e = []) { if (e.length < 2) return; let t = 0; const i = (e, t) => c.getTextsWidthRatio(e.text, t, e.polyCoefs.hh); e.forEach(e => { e.trRatio = i(e, e.translation), t += e.trRatio }); const n = t / e.length, s = (...e) => e.reduce((e, t) => e + Math.abs(t - n), 0), o = (e, t) => { const n = e.translation.split(" "), o = t.translation.split(" "); if (n.length && e.trRatio > t.trRatio) o.unshift(n.pop()); else { if (!(o.length && e.trRatio < t.trRatio)) return !1; n.push(o.shift()) } const r = n.join(" "), a = o.join(" "), d = i(e, r), c = i(t, a), l = s(e.trRatio, t.trRatio); return !(s(d, c) > l) && (e.trRatio = d, e.translation = r, t.trRatio = c, t.translation = a, !0) }, r = (e, t, n) => { const o = e.translation.split(" "), r = t.translation.split(" "), a = n.translation.split(" "); if (o.length && e.trRatio > n.trRatio) r.unshift(o.pop()), a.unshift(r.pop()); else { if (!(a.length && e.trRatio < n.trRatio)) return !1; o.push(r.shift()), r.push(a.shift()) } const d = o.join(" "), c = r.join(" "), l = a.join(" "), u = i(e, d), h = i(t, c), g = i(n, l), p = s(e.trRatio, t.trRatio, n.trRatio); return !(s(u, h, g) > p) && (e.trRatio = u, e.translation = d, t.trRatio = h, t.translation = c, n.trRatio = g, n.translation = l, !0) }, a = () => { let t = !1; for (let i = 0; i < 8; i++) { let i = !1; for (let n = 1; n < e.length; n++)o(e[n - 1], e[n]) && (t = !0, i = !0); if (!i) break } return t }; a(), e.length >= 3 && (() => { let t = !1; for (let i = 0; i < 5; i++) { let i = !1; for (let n = 1; n < e.length - 1; n++)r(e[n - 1], e[n], e[n + 1]) && (t = !0, i = !0); if (!i) break } return t })() && a() } } t.ImagePolynomialsPresenter = c, c.PATH_PREFIX = "path-", c.MAX_LENGTH_RATIO = 3 }, function (e, t, i) { "use strict"; function n({ r: e, g: t, b: i }) { const n = e / 255, s = t / 255, o = i / 255, r = Math.max(n, s, o), a = Math.min(n, s, o); let d, c; const l = (r + a) / 2; if (r === a) d = 0, c = 0; else { const e = r - a; switch (c = l > .5 ? e / (2 - r - a) : e / (r + a), r) { case n: d = (s - o) / e + (s < o ? 6 : 0); break; case s: d = (o - n) / e + 2; break; case o: d = (n - s) / e + 4 }d /= 6 } return [Math.floor(360 * d), Math.floor(100 * c), Math.floor(100 * l)] } function s({ h: e, s: t, l: i }) { const n = i / 100, s = t * Math.min(n, 1 - n) / 100, o = t => { const i = (t + e / 30) % 12, o = n - s * Math.max(Math.min(i - 3, 9 - i, 1), -1); return Math.round(255 * o) }; return [o(0), o(8), o(4)] } t.__esModule = !0, t.adjustTextColor = function (e, t, i = 40) { if ("a" in t && t.a < 1 / 8) return e; const [o, r, a] = n(e), [, , d] = n(t); if (Math.abs(a - d) > i) return e; const c = i, l = i - 10; let u; u = d > a ? d < l ? d + c : Math.max(d - c, 0) : a + l > 100 ? d - c : Math.min(d + c, 100); const [h, g, p] = s({ h: o, s: r, l: u }); return { r: h, g: g, b: p } }, t.hslToRgb = s, t.rgbToHsl = n, i(1) }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImagePolynomialsView = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(193), r = i(2), a = i(314); class d extends a.ImageRecognizerView { constructor(e = {}) { super(e), this._selectionRubber = document.createElementNS(this.getElement().namespaceURI, "path"), this._selectionRubber.setAttributeNS(null, "class", e.rubberStyleName || "selection-path"), this._pathData = [], this._canSelect = !1 } setSelectionEnabled(e) { this._canSelect = e } _onStart(e) { if (this.setState("moved", s.default.hasCtrlKey(e)), o.ScalableView.prototype._onStart.call(this, e), 1 !== this._pointCount || this.hasState("moved")) return this.removeSelection(); this._scrMatrix = this.getScreenMatrix(), this._startPoint = this.convertScreenPoint(r.TouchView.getPoints(e)[0], this._scrMatrix), this._canSelect && this._startSelection(this._startPoint) } _startSelection(e) { const t = this._selectionRubber; this._pathData = [], this._pathData.push(e), t.setAttributeNS(null, "d", this._convertToPath()), this.getElement().appendChild(t) } _onMove(e) { const t = this._startPoint; if (o.ScalableView.prototype._onMove.call(this, e), !t) return; s.default.preventEvent(e); const i = this.convertScreenPoint(r.TouchView.getPoints(e)[0], this._scrMatrix); this._canSelect && this._updateSelection(i) } _updateSelection(e) { const t = this._selectionRubber; this._pathData.push({ x: e.x, y: e.y }), t.setAttributeNS(null, "d", this._convertToPath()) } _onEnd(e) { this.setState("moved", !1), o.ScalableView.prototype._onEnd.call(this, e), this._startPoint && this._canSelect && this._finishSelection() } _finishSelection() { this.emit("selectionChange", this._pathData), this.removeSelection() } removeSelection() { this._pathData = [], a.ImageRecognizerView.prototype.removeSelection.call(this) } _convertToPath() { const e = this._pathData; let t = ""; return e.forEach((function (e, i) { t += (0 === i ? d.pathTypes.MOVE : d.pathTypes.LINE) + e.x + "," + e.y })), t } } t.ImagePolynomialsView = d, d.pathTypes = { MOVE: "M", LINE: "L" }, d.SELECTION_ADJUST = 8 }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageRecognizerView = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(193), r = i(2); class a extends o.ScalableView { constructor(e = {}) { super(e); const t = this; this._image = new Image, this._image.onload = function () { t.emit("load", this) }, this._image.onerror = function (e) { t.emit("loadError", e) }, this._selectionRubber = document.createElementNS(this.getElement().namespaceURI, "rect"), this._selectionRubber.setAttributeNS(null, "class", e.rubberStyleName || "rubber"), this.on(r.TouchView.eventTypes.CANCEL, this.removeSelection) } _onEnd(e) { const t = this._selectionRubber; this.setState("moved", !1), o.ScalableView.prototype._onEnd.call(this, e), this._startPoint && (this.removeSelection(), this.emit("selectionChange", { x: Math.round(t.x.baseVal.value), y: Math.round(t.y.baseVal.value), w: Math.round(t.width.baseVal.value), h: Math.round(t.height.baseVal.value) })) } _onMove(e) { const t = this._startPoint, i = this._selectionRubber; if (o.ScalableView.prototype._onMove.call(this, e), !t) return; s.default.preventEvent(e); const n = this.convertScreenPoint(r.TouchView.getPoints(e)[0], this._scrMatrix), a = n.x - t.x, d = n.y - t.y; i.x.baseVal.value = a > 0 ? t.x : n.x, i.y.baseVal.value = d > 0 ? t.y : n.y, i.width.baseVal.value = Math.max(1, Math.abs(a)), i.height.baseVal.value = Math.max(1, Math.abs(d)) } _onStart(e) { const t = this._selectionRubber; if (this.setState("moved", s.default.hasCtrlKey(e)), o.ScalableView.prototype._onStart.call(this, e), 1 !== this._pointCount || this.hasState("moved")) return this.removeSelection(); this._scrMatrix = this.getScreenMatrix(), this._startPoint = this.convertScreenPoint(r.TouchView.getPoints(e)[0], this._scrMatrix), t.x.baseVal.value = this._startPoint.x, t.y.baseVal.value = this._startPoint.y, t.width.baseVal.value = 1, t.height.baseVal.value = 1, this.getElement().appendChild(t) } getImage() { return this._image } setImage(e) { return this.reset().setHTMLContent(""), this._image.src = e, this } setViewBox(e, t) { return (this.getElement().viewBox.baseVal || {})[e] = t, this } setContent(e, t = {}) { let i; const n = this.getContentElement(); if (!t.append) for (; n.firstChild;)n.removeChild(n.firstChild); return t.asText ? n.appendChild(document.createTextNode(e)) : (i = document.createElement("div"), i.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg">' + e + "</svg>", s.default.slice(i.firstChild.childNodes).forEach((function (e) { n.appendChild(e) }))), this.emit("contentChanged", e, t) } getScreenMatrix() { const e = this.getElement(), t = this.getRect(), i = e.createSVGMatrix(), n = e.viewBox.baseVal.width, s = e.viewBox.baseVal.height; if (!n || !s) return i; const o = Math.min(t.width / n, t.height / s), r = n * o, a = s * o; return i.a = r / this._scale / n, i.d = a / this._scale / s, i.f = t.top + (t.height - a) / 2, i.e = t.left + (t.width - r) / 2, i.inverse() } removeSelection() { return this._startPoint = null, this._selectionRubber.parentNode && this._selectionRubber.parentNode.removeChild(this._selectionRubber), this } convertScreenPoint(e, t = this.getScreenMatrix()) { return { x: t.a * (e.x / this._scale) + t.e / this._scale, y: t.d * (e.y / this._scale) + t.f / this._scale } } } t.ImageRecognizerView = a }, function (e, t, i) { "use strict"; t.__esModule = !0, t.TransformMatrix = void 0; t.TransformMatrix = class { constructor() { this.reset() } skew(e, t) { return this.shear(Math.tan(e), Math.tan(t)) } reset() { return this.a = 1, this.d = 1, this.b = 0, this.c = 0, this.e = 0, this.f = 0, this } flipX() { return this.transform(-1, 0, 0, 1, 0, 0) } flipY() { return this.transform(1, 0, 0, -1, 0, 0) } shear(e, t) { return this.transform(1, t, e, 1, 0, 0) } scale(e, t) { return this.transform(e, 0, 0, t, 0, 0) } rotate(e) { const t = Math.cos(e), i = Math.sin(e); return this.transform(t, i, -i, t, 0, 0) } translate(e, t) { return this.transform(1, 0, 0, 1, e, t) } transform(e, t, i, n, s, o) { const r = this.a, a = this.b, d = this.c, c = this.d, l = this.e, u = this.f; return this.a = r * e + d * t, this.b = a * e + c * t, this.c = r * i + d * n, this.d = a * i + c * n, this.e = r * s + d * o + l, this.f = a * s + c * o + u, this } toArray() { return [this.a, this.b, this.c, this.d, this.e, this.f] } toString() { return String(this.toArray()) } } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.CubicEquation = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }; class o { static getControlPoint(e, t, i, n) { const s = t || e, r = i || e, a = o.getLineFromPoints(s, r), d = a.angle + (n ? Math.PI : 0), c = a.length * this.SMOOTHING, l = e.x + Math.cos(d) * c, u = e.y + Math.sin(d) * c; return { x: l.toFixed(2), y: u.toFixed(2) } } static getLineFromPoints(e, t) { const i = t.x - e.x, n = t.y - e.y; return { length: Math.sqrt(Math.pow(i, 2) + Math.pow(n, 2)), angle: Math.atan2(n, i) } } init(e) { e && (this.polyCoefs = e.polyCoefs, this.startPoint = { x: e.startPoint, y: this.getFunctionValue(e.startPoint) }, this.width = e.width, this.yByX = e.yByX) } getFunctionValue(e) { return this.polyCoefs.a3 * Math.pow(e, 3) + this.polyCoefs.a2 * Math.pow(e, 2) + this.polyCoefs.a1 * e + this.polyCoefs.a0 } constructPoints() { let e, t; const i = [this.startPoint], n = this.width / o.NUM_DOTS; for (e = 1; e <= o.NUM_DOTS; e++)t = this.startPoint.x + n * e, i.push({ x: t, y: this.getFunctionValue(t) }); return i } getAverageAngle() { const e = this.startPoint.x, t = this.startPoint.y, i = e + this.width, n = this.getFunctionValue(i); return Math.atan2(n - t, i - e) } getRealWidth() { return this.width / Math.cos(this.getAverageAngle()) } formatRotationString(e, t, i) { return s.default.parseString(o.ROTATION_TEMPLATE, Math.round(180 * e * 10 / Math.PI) / 10, t, i) } getBezierFragment(e, t, i) { const n = o.getControlPoint(i[t - 1], i[t - 2], e, !1), r = o.getControlPoint(e, i[t - 1], i[t + 1], !0); return this.yByX ? s.default.parseString(o.BEZIER_FRAGMENT_TEMPLATE, n.x, n.y, r.x, r.y, e.x.toFixed(2), e.y.toFixed(2)) : s.default.parseString(o.BEZIER_FRAGMENT_TEMPLATE, n.y, n.x, r.y, r.x, e.y.toFixed(2), e.x.toFixed(2)) } getPath() { let e = ""; const t = this.constructPoints(), i = t.length; let n; for (n = 0; n < i; n++)0 === n ? this.yByX ? e += s.default.parseString(o.BEZIER_START_TEMPLATE, t[n].x, t[n].y) : e += s.default.parseString(o.BEZIER_START_TEMPLATE, t[n].y, t[n].x) : e += this.getBezierFragment(t[n], n, t); return e } } t.CubicEquation = o, o.NUM_DOTS = 5, o.SMOOTHING = .2, o.BEZIER_FRAGMENT_TEMPLATE = " C {0},{1} {2},{3} {4},{5}", o.BEZIER_START_TEMPLATE = "M {0},{1}", o.ROTATION_TEMPLATE = "rotate({0} {1} {2})" }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImagePicker = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(7), r = i(9), a = i(157), d = i(134); class c extends r.Emitter { constructor({ fileInput: e, dropAreaView: t, imageCollectingCallback: i }) { super(), this._source = null, this._type = null, this._fileInput = e, this._imageObjectUrl = null, this._dropAreaView = t, this._imageCollectingCallback = i, this._watchFilePicker() } reset() { this._fileInput.value = null } onNewImage(e) { return this.on(d.PICKER_EVENTS.NEW_IMAGE, e) } pickImage() { this._fileInput.click() } setImage(e, { source: t = null, type: i = null }) { return this._source = t, this._type = i, this._readerHandler(e), this } getFileName() { return this._fileName } _setImage(e, t, i, n) { this._imageObjectUrl && URL.revokeObjectURL(this._imageObjectUrl), this._imageObjectUrl = e, this._name = n, this._width = t, this._height = i, this.emit(d.PICKER_EVENTS.NEW_IMAGE, e, { source: this._source, type: this._type, width: t, height: i, name: n }) } _watchFilePicker() { this._fileInput.addEventListener("change", e => { this._type = d.PICKER_TYPE.INPUT, this._handleFileEvent(e) }) } _handleFileEvent(e) { this._fileName = s.default.getFileName(e), s.default.preventEvent(e), this._dropAreaView.handleFileUpload(e, this._type) } _readerHandler(e) { if (!(e instanceof Blob)) return void (0, o.logError)("imageFile is not of type Blob", { imageFile: e }); this._imageCollectingCallback(e); const t = new FileReader; t.onload = () => { const i = new Image, n = s.default.getImageOrientation(t.result); i.onload = () => { if (n === a.ImageRecognizerPresenter.orientations.UP) return this._setImage(URL.createObjectURL(e), i.width, i.height, e.name), void URL.revokeObjectURL(i.src); a.ImageRecognizerPresenter.normalizeImageOrientation(i, n, (t, { width: n, height: s }) => { this._setImage(URL.createObjectURL(t), n, s, e.name), URL.revokeObjectURL(i.src) }) }, i.src = URL.createObjectURL(e) }, t.readAsArrayBuffer(e) } } t.ImagePicker = c }, function (e, t, i) { "use strict"; t.__esModule = !0, t.collectOcrImage = function (e, t, i, o) { if (!o || o.size > 5242880) return; const r = `${e}?srv=${t}&sid=${i}`, a = new FormData; a.append("image", o), fetch(r, { method: "POST", body: a }).then(async e => { e.ok ? n.$tracker.sendMetric("ocr_image_collecting_success", { url: await e.text() }) : n.$tracker.sendMetric("ocr_image_collecting_failure") }).catch(e => { (0, s.logError)("Ocr image collecting error", e), n.$tracker.sendMetric("ocr_image_collecting_failure") }) }; var n = i(3), s = i(7) }, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.Feedback = void 0, i(1); var n, s, o, r, a, d = (n = i(0)) && n.__esModule ? n : { default: n }, c = i(25), l = i(3), u = i(32), h = i(320); class g extends c.PureComponent {
        constructor(e, t) { var i; super(e, t), this.locales = null !== (i = u.locales.feedback) && void 0 !== i ? i : {}, this.isTouch = Boolean(t.isTouch), this.onYouAreWelcomeClick = t.onYouAreWelcomeClick, this.hasYouAreWelcomeButton = d.default.isFunction(this.onYouAreWelcomeClick), this.form = new h.CheckboxGroup({ fields: this.getProperty("answers") }), this.onChange(["vote", "isSent", "canCancel"], () => this.update()), this.form.onChange("filled", e => { this.setProperty("valid", e) }), this.reset() } resetVotes() { this.setProperty({ votes: "angry exited" }) } reset() { return super.reset(), this.resetVotes(), this.form.reset(), this } applyVote(e) { this.setProperty({ isSent: "exited" === e, isVoted: !0, vote: e }), l.$tracker.sendMetric("feedback_vote", this.getFeedback()) } getFeedback() { const { vote: e, votes: t, source: i } = this.getProps(), n = {}, s = d.default.extend(this.form.getValues(), { vote: e, votes: t, source: i }); for (const [e, t] of Object.entries(s)) d.default.isBoolean(t) ? n.feedback = n.feedback ? `${n.feedback} ${e}` : e : t && (n[e] = t); return n } sendFeedback() { l.$tracker.sendMetric("feedback_send", this.getFeedback()), this.setProperty("isSent", !0) } cancelFeedback() { l.$tracker.sendMetric("feedback_cancel", this.getFeedback()), this.reset().update() } template({ html: e, cn: t, nothing: i }) {
            const { isVoted: n, isSent: s, votes: o, canCancel: r } = this.getProps(), a = t("feedback"), d = t(this.isTouch ? "button2" : "button"); let c; return c = s ? e`
                <div class=${a("image")}></div>
                <div class=${a("title")}>${this.locales.completeTitle}</div>
                <div class=${a("text")}>${this.locales.completeText}</div>
                ${this.hasYouAreWelcomeButton ? e`
                <button
                    class=${d({ view: "primary", size: "m" })}
                    @click=${this.onYouAreWelcomeClick}
                >
                    ${this.locales.youAreWelcome}
                </button>`: i}
                ${r ? e`
                <button
                    class=${d({ view: "ghost", size: "m" })}
                    @click=${() => this.cancelFeedback()}
                >
                    ${this.locales.cancel}
                </button>`: i}
            `: n ? e`
                <div class=${a("title")}>${this.locales.formTitle}</div>
                <div class=${a("text")}>${this.locales.formText}</div>
                <div class=${a("form")}>
                    ${this.form.getDirective()}
                </div>
                <div class=${a("footer")}>
                    <button
                        class=${d({ view: "primary", size: "m" })}
                        @click=${() => this.sendFeedback()}
                    >
                        ${this.locales.send}
                    </button>
                    <button
                        class=${d({ view: "ghost", size: "m" })}
                        @click=${() => this.cancelFeedback()}
                    >
                        ${this.locales.cancel}
                    </button>
                </div>
            `: e`
                <div class=${a("title")}>${this.locales.title}</div>
                <div class=${a("text")}>${this.locales.text}</div>
                <div class=${a("votes")}>
                    ${o.split(" ").map(t => e`
                        <button
                            class=${a("vote", { type: t })}
                            @click=${() => this.applyVote(t)}>
                            ${t}
                        </button>
                    `)}
                </div>`, e`<div class=${a()}>${c}</div>`
        }
    } t.Feedback = g, g.defaults = { vote: "", votes: "angry exited", isVoted: !1, isSent: !1, canCancel: !0, feedback: "", comment: "", answers: [{ text: null === u.locales || void 0 === u.locales || null === (s = u.locales.feedback) || void 0 === s ? void 0 : s.incomplete, id: "incomplete" }, { text: null === u.locales || void 0 === u.locales || null === (o = u.locales.feedback) || void 0 === o ? void 0 : o.incorrect, id: "incorrect" }, { text: null === u.locales || void 0 === u.locales || null === (r = u.locales.feedback) || void 0 === r ? void 0 : r.invisible, id: "invisible" }, { text: null === u.locales || void 0 === u.locales || null === (a = u.locales.feedback) || void 0 === a ? void 0 : a.comment, id: "comment", type: "text" }] }
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.CheckboxGroup = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(25); class r extends o.PureComponent {
        constructor(e, t) { if (super(e, t), !s.default.isArray(e.fields)) throw new Error("CheckboxGroup: Set fields property"); this.setProperty("filled", this.isFilled()) } reset() { return super.reset(), this.getProperty("fields").forEach(e => delete e.value), this } setFieldValue(e, t) { const i = this.getProperty("fields").find(t => t.id === e); i && i.value !== t && (i.value = t, this.setProperty("filled", this.isFilled())) } getValues() { const e = {}; return this.getProperty("fields").forEach(({ id: t, value: i }) => { i && (e[t] = i) }), e } findGroupRef(e, t) { return this.elementsList || (this.elementsList = document.getElementsByClassName("checkboxGroup-line_value")), this.getRef(`${e}-${t}`, this.elementsList) } onFieldChange(e, t) { const i = this.findGroupRef(t, "input"), n = e.target; if ("checkbox" === n.type) if (i && n.checked) { this.findGroupRef(t, "text").focus() } else this.setFieldValue(t, n.checked); else i && (i.value = n.value, n.value ? i.checked = !0 : "blur" === e.type && (i.checked = !1), this.setFieldValue(t, n.value)) } onFieldFocus(e, t) { const i = this.findGroupRef(t, "input"), n = e.target.value; i.checked = !0, this.setFieldValue(t, i.value = n) } onLabelClick(e) { e.preventDefault(), this.control && this.control.click() } isFilled() { return Boolean(this.getProperty("fields").find(({ value: e }) => Boolean(e))) } template({ html: e, cn: t }) {
            const i = t("checkboxGroup"), n = this.getProperty("fields").map(({ text: t, type: n, id: s }) => "text" === n ? e`
                    <div class=${i("line", { value: !0 })}>
                        <input class=${i("input")}
                            @change=${e => this.onFieldChange(e, s)}
                            data-ref-id=${s}-input
                            type=checkbox
                            name=${s}
                            id=${s}
                        >
                        <label class=${i("label")} for=${s}><input class=${i("value")}
                            @input=${e => this.onFieldChange(e, s)}
                            @blur=${e => this.onFieldChange(e, s)}
                            @focus=${e => this.onFieldFocus(e, s)}
                            data-ref-id=${s}-text
                            placeholder=${t}
                            autocorrect=off
                            autocomplete=off
                            autocapitalize=off
                            spellcheck=false
                        ></label>
                    </div>
                `: e`
                <div class=${i("line")}>
                    <input class=${i("input")}
                        @change=${e => this.onFieldChange(e, s)}
                        type=checkbox
                        name=${s}
                        id=${s}
                    >
                    <label
                        @click=${this.onLabelClick}
                        class=${i("label")} for=${s}>${t}</label>
                </div>
            `); return e`<div class=${i()}>${n}</div>`
        }
    } t.CheckboxGroup = r, r.defaults = { filled: !1 }
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.Tooltip = void 0, i(1); var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(2), r = i(25); function a(e, t) { return function (e, t) { if (t.get) return t.get.call(e); return t.value }(e, c(e, t, "get")) } function d(e, t, i) { return function (e, t, i) { if (t.set) t.set.call(e, i); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = i } }(e, c(e, t, "set"), i), i } function c(e, t, i) { if (!t.has(e)) throw new TypeError("attempted to " + i + " private field on non-instance"); return t.get(e) } var l = new WeakMap, u = new WeakSet; class h extends r.PureComponent {
        constructor(e, t = {}) { let i; t.container ? i = t.container : (i = document.createElement("div"), document.body.append(i)), t.container = i, super(e, t), u.add(this), this.refs = { root: this.getId() }, l.set(this, { writable: !0, value: null }), this.onChange(["content", "position"], () => this.update()), ["scroll", "resize"].forEach(e => { s.default.bind(window, e, () => { !this.getProperty("hidden") && this.rootElement && (this.getProperty("sticky") ? this.update() : this.hide()) }) }), s.default.bind(document.body, o.TouchView.eventTypes.START, e => { this.rootElement && (s.default.getClosest(e.target, e => e === this.rootElement) || this.hide()) }), this.getProperty("sticky") && (d(this, l, new IntersectionObserver(e => { e.forEach(e => { !this.getProperty("hidden") && e.intersectionRatio < .75 && this.hide() }) })), this.onChange("target", (e, { oldValue: t }) => { t && a(this, l).unobserve(t), this.update() })) } show(e) { e && this.setProperty("target", e), this.getProperty("hidden") && (this.setProperty("hidden", !1), this.update()) } hide() { this.getProperty("hidden") || (this.setProperty("hidden", !0), this.update()) } update(e) { super.update(e), this.rootElement || (this.rootElement = this.getRef(this.refs.root)); const { hidden: t, target: i, sticky: n } = this.getProps(); return t ? n && i && a(this, l).unobserve(i) : (function (e, t, i) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return i }(this, u, g).call(this), n && a(this, l).observe(i)), s.default.activateClass(this.rootElement, "state-hidden", t), this } handleMouseLeave() { const { shouldAutoHide: e } = this.getProps(); e && this.hide() } content() { return this.getProperty("content") } template({ html: e, cn: t }) {
            const { position: i, promo: n } = this.getProps(); return e`<div
            class="${t("tooltip")({ promo: n })} state-fadeaway state-hidden"
            data-ref-id=${this.refs.root}
            data-position=${i}
            @mouseleave=${() => this.handleMouseLeave()}
        >${this.content()}</div>`
        }
    } function g() { const { target: e, position: t } = this.getProps(); if (!e) throw new Error("Tooltip: Set target property"); const i = e.getBoundingClientRect(), n = this.rootElement.getBoundingClientRect(); let s = 0, o = 0; switch (t) { case "top": case "bottom": s = "top" === t ? i.top - n.height : i.bottom, o = i.left - (n.width - i.width) / 2; break; case "left": case "right": s = i.top - (n.height - i.height) / 2, o = "left" === t ? i.left - n.width : i.right; break; case "top-right": s = i.top - n.height, o = i.left; break; case "top-left": s = i.top - n.height, o = i.right - n.width + 18 }this.rootElement.style.top = s + "px", this.rootElement.style.left = o + "px" } t.Tooltip = h, h.defaults = { content: "", position: "left", target: null, promo: !1, hidden: !0, sticky: !1, shouldAutoHide: !1 }
}, function (e, t, i) {
    "use strict"; t.__esModule = !0, t.ImageViewer = void 0; var n, s = i(68), o = (n = i(0)) && n.__esModule ? n : { default: n }, r = i(3), a = i(10), d = i(19), c = i(194), l = i(195), u = i(323), h = i(165), g = i(196); class p extends u.ImageScaler {
        constructor(e, t) { super(e, t), this.refs = { zoomIn: "zoomIn", zoomOut: "zoomOut", filesIcon: "filesIcon", complaintButton: "complaintButton" }, this.complaint = !1, this.complaintTarget = null, this.resultImage = new c.ResultImage(this.getContainer()), this.listenImageViewer(), this.listenImageViewerContainer(), this.update() } listenImageViewer() { this.onChange(() => { this.complaint = !1, this.updateAsync() }).onRendered(() => { this._needToResetImage && (this._needToResetImage = !1, this.resetImageState()), this.imageState.initialScale || this.setInitialImageState(), this.updateFilesIcon(), this.updateImage() }) } listenImageViewerContainer() { this.getContainerView().onTap(e => { if (this.isComplaintButton(e)) return void (this.complaintTarget && this.resetComplaintTarget()); const { isComplaintActive: t } = this.getProps(), i = t(); this.isTextNode(e) && i ? (this.complaintTarget = e.target, this.resultImage.highlightComplaintNode(e.target), this.emit("complaintTargetSet", e.target.parentNode)) : this.complaintTarget ? this.resetComplaintTarget() : i && this.toggleComplaintMode() }).on("mouseover", e => { const { isComplaintActive: t } = this.getProps(), i = t(); this.isTextNode(e) && i && this.resultImage.highlightComplaintNode(e.target) }).on("mouseout", e => { this.isTextNode(e) && !this.complaintTarget && this.resultImage.resetComplainNodeHighlight(e.target) }).bindDOMEvents("mouseover mouseout") } isTextNode(e) { const t = e.target; return t && "true" === t.getAttribute(l.TEXT_COMPLAINT_NODE_ATTR) } isComplaintButton(e) { return e.target === this.getRef(this.refs.complaintButton) } setImage(e, { width: t, height: i }) { this._needToResetImage = !0, this.setError(null), this.setIsRecognizing(!0), this.setNightMode(!1), this.setShowOrig(!1), this.setTranslationData(null), this.setOcrData(null), this.setProperty({ imageUrl: e, origWidth: t, origHeight: i, ocrUrlInputValue: "", ocrUrlError: null, shouldShowOcrUrlButton: !1, isOcrUrlFetching: !1 }) } setIsTranslating(e) { return this.setIsRecognizing(!1), this.setProperty({ isTranslating: e }) } setIsRecognizing(e) { return this.setProperty({ isRecognizing: e }) } setError(e) { return e && (this.setIsTranslating(!1), this.setIsRecognizing(!1)), this.setProperty({ error: e }) } setTranslationData(e) { return this.setProperty({ translationData: e }) } setOcrData(e) { return this.setProperty({ ocrData: e }) } setNightMode(e) { return this.setProperty({ nightMode: e }) } setAlign(e) { return this.setProperty({ align: e }) } toggleNightMode() { return this.toggleProperty("nightMode") } setShowOrig(e) { return e && this.setNightMode(!1), this.setProperty({ showOrig: e }) } toggleOrig() { return this.setShowOrig(!this.getProperty("showOrig")) } getSvgElement(e) { const t = document.createElement("div"); return t.innerHTML = this.getSvgHtml(e), t.firstElementChild } getImagePicker() { return this.getProperty("imagePicker") } getSvgHtml(e) { return this.resultImage.getSvgHtml({ ...this.getProps(), ...e }, h.ids.resultImage) } onSelectImage() { this.getImagePicker().pickImage() } onRotate(e, t) { t.preventDefault(), this.emit("rotate", e) } updateFilesIcon() { const e = this.getRef(this.refs.filesIcon); if (e && !e.firstElementChild) { const t = this.getFilesIcon(); t && e.appendChild(t) } } getFilesIcon() { if (!this._filesIcon) { const e = window.config.ELEMENTS.dropOverlay.querySelector("svg"); e && (this._filesIcon = e.cloneNode(!0)) } return this._filesIcon } resetComplaintTarget() { this.complaintTarget = null, this.emit("complaintTargetSet", null), this.resultImage.resetHighlights(), this.resultImage.toggleComplaintMode(!1) } toggleComplaintMode() { const { isComplaintActive: e } = this.getProps(); this.resultImage.toggleComplaintMode(!e()), this.emit("toggleComplaintMode") } onToggleComplaintMode(e) { return this.on("toggleComplaintMode", e) } onComplaintTargetSet(e) { return this.on("complaintTargetSet", e) } onZoom(e, t) { return this.resetComplaintTarget(), super.onZoom(e, t) } onWheel(e) { return this.resetComplaintTarget(), super.onWheel(e) } template() { const { isTranslating: e, isRecognizing: t, error: i, imageUrl: n } = this.getProps(), s = !(e || t) && !n && !i, o = this.getSvgHtml(!1); return s || i && !o ? this.templateDefault() : this.templateResult(o) } handleOcrUrlInput(e) { const t = e.target.value.trim(), i = Boolean(t) && o.default.isUrl(t); this.setProperty({ ocrUrlInputValue: t, ocrUrlError: null, shouldShowOcrUrlButton: i }) } handleOcrUrlKeydown(e) { e.keyCode === a.KEYBOARD_KEYS.ENTER && this.handleOcrUrlSubmit() } handleOcrUrlSubmit() { const { ocrUrlInputValue: e, onOcrUrlEntered: t } = this.getProps(); if (!o.default.isUrl(e)) return this.setProperty({ ocrUrlError: g.i18n.invalidOcrUrl, shouldShowOcrUrlButton: !1 }), void r.$tracker.sendMetric("ocr_url_invalid", { url: e }); t(e) } templateDropBlock() {
            const { html: e, cn: t, nothing: i } = this.getRenderHelpers(), { error: n, ocrUrlError: o, shouldShowOcrUrlButton: r, isOcrUrlFetching: a } = this.getProps(), c = t("dropBlock"); let l; const u = () => e`
                <div class="dropBlock-dropMessage">
                    <div class="dropMessage" data-action="pickFile">
                        <div class="dropMessage-icon"
                             data-ref-id=${this.refs.filesIcon}></div>
                        <div class="dropMessage-text" tabindex="0">
                            ${(0, s.unsafeHTML)(g.i18n.pickImageDescription)}
                        </div>
                        <div class="dropMessage-restrictions">
                            ${g.i18n.pickImageRestrictions}
                        </div>
                    </div>
                </div>
            `, p = t => {
                    let i = g.i18n.failTitle, n = g.i18n.failDescription; return t === h.VIEWER_ERRORS.NO_TEXT ? (i = g.i18n.recognitionFailTitle, n = (0, s.unsafeHTML)(g.i18n.recognitionFailDescription)) : t === h.VIEWER_ERRORS.BAD_IMAGE ? (i = g.i18n.badImageTitle, n = g.i18n.badImageDescription) : t === h.VIEWER_ERRORS.LARGE_FILE && (i = g.i18n.largeImageTitle, n = g.i18n.largeImageDescription), e`
                <div class=${c("errorMessage")}>
                    <div class="errorMessage errorMessage_${t}">
                        <div class="errorMessage-icon"></div>
                        <div class="errorMessage-title">${i}</div>
                        <div class="errorMessage-text">${n}</div>
                    </div>
                </div>
            `}, m = () => {
                    const n = Boolean(o), s = t("urlInput"), l = s("form", [c("ocrUrlForm")]), u = t("button")({ icn: !0, view: "clear" }, [s("button")]); return e`
                <div
                    class="${l}"
                    data-show-error="${n}"
                    data-show-button="${r}"
                >
                    <input id="ocrUrlInput"
                           class="${s("input")}"
                           name="ocrUrl"
                           type="text"
                           spellcheck="false"
                           autocapitalize="off"
                           autocomplete="off"
                           autocorrect="off"
                           placeholder="${g.i18n.ocrUrlPlaceholder}"
                           autofocus
                           ?disabled=${a}
                           @keydown=${this.handleOcrUrlKeydown.bind(this)}
                           @input=${this.handleOcrUrlInput.bind(this)} />
                    <button
                        @click=${this.handleOcrUrlSubmit.bind(this)}
                        class="${u}">${(0, d.icn)("arrow-short-forward")}</button>
                    <div class="${s("errorHolder")}">
                        <span
                            class="${s("errorMessage")}">
                            ${o}
                        </span>
                    </div>
                    ${a ? e`
                        <div class="spinnerIcn spinnerIcn_ocrUrl"></div>`: i}
                </div>
            `}; return l = n === h.VIEWER_ERRORS.NO_TEXT ? e`
                ${p(n)}
            `: n ? e`
                ${p(n)}
                <div class=${c("divider")}></div>
                ${u()}
            `: e`${u()}${m()}`, e`
            <div class=${c({ hasError: Boolean(n) })}>
                <div class=${c("content")}>
                    ${l}
                </div>
            </div>
        `} templateDefault() {
            const { html: e } = this.getRenderHelpers(); return e`
            <div class="fileContainer-block fileContainer-block_drop">
                ${this.templateDropBlock()}
            </div>
        `} templateResult(e) {
            const { cn: t, html: i, nothing: n } = this.getRenderHelpers(), { error: o, dblClickZoom: r, isTranslating: a, isRecognizing: c } = this.getProps(), l = t("ocrResult"); let u; const p = t("button"), m = t("ocrResult-overlay"), _ = a || c, f = e => { r && setTimeout(() => this.onDblClick(e), 0) }; o ? u = this.templateDropBlock() : _ && (u = i`
                <div class="spinnerIcn"></div>
                <div class=${m("title")}>
                    ${c ? g.i18n.recognizing : g.i18n.translating}
                </div>
            `); const E = { view: "clear", round: !0, icn: !0 }, T = i`
            <div class=${l("imageControls")}>
                <button
                    @click=${e => this.onRotate(-90, e)}
                    class=${p(E)}
                    data-tooltip=${g.i18n.rotateTooltip}
                    data-tooltip-position="right">
                    ${(0, d.icn)("rotate-left", 16)}
                </button>
                <button
                    @click=${e => this.onZoom(1, e)}
                    class=${p(E)}
                    data-ref-id=${this.refs.zoomIn}
                    data-tooltip=${g.i18n.zoomInTooltip}
                    data-tooltip-position="right">
                    ${(0, d.icn)("plus", 16)}
                </button>
                <span id=${h.ids.resultStats}
                      @click=${e => this.resetImagePosition()}
                      class=${l("zoom")}></span>
                <button
                    @click=${e => this.onZoom(-1, e)}
                    class=${p(E)}
                    data-ref-id=${this.refs.zoomOut}
                    data-tooltip=${g.i18n.zoomOutTooltip}
                    data-tooltip-position="right">
                    ${(0, d.icn)("minus", 16)}
                </button>
                <button
                    @click=${e => this.onRotate(90, e)}
                    class=${p(E)}
                    data-tooltip=${g.i18n.rotateTooltip}
                    data-tooltip-position="right">
                    ${(0, d.icn)("rotate-right", 16)}
                </button>
            </div>
        `, S = i`
            <button
                class="${l("complaintButton")} ${p({ view: "clear", round: !0 })}"
                data-ref-id="${this.refs.complaintButton}"
                @click=${() => this.toggleComplaintMode()}
            >${g.i18n.reportError}</button>
        `, v = i`
            <div
                id=${h.ids.resultImageContainer}
                class=${l("imageContainer", { noImg: !e })}>

                ${e ? i`
                    <div
                        id=${h.ids.resultImageWrapper}
                        @dblclick=${e => f(e)}
                        class=${l("svg-container", { overlay: Boolean(u), error: Boolean(o) })}>
                        <div
                            @wheel=${e => this.onWheel(e)}
                            class=${l("svg-wrapper")}>
                            ${(0, s.unsafeHTML)(e)}
                        </div>
                        <div class=${l("svg-overlay")}></div>
                    </div>
                `: n}

                ${u ? i`
                    <div class=${m("content")}>
                        ${u}
                    </div>
                `: n}

                ${T}
                ${S}
            </div>
        `; return i`
            <div class="fileContainer-block fileContainer-block_result">
                <div class=${l()}>
                    ${v}
                </div>
            </div>
        `}
    } t.ImageViewer = p, p.defaults = { showOrig: !1, error: null, isTranslating: !1, isRecognizing: !1, nightMode: !1, align: l.TEXT_ALIGNS.LEFT, imageUrl: null, origWidth: null, origHeight: null, viewboxWidth: null, viewboxHeight: null, translationData: null, ocrData: null, ocrUrlInputValue: "", ocrUrlError: null, shouldShowOcrUrlButton: !1, isOcrUrlFetching: !1 }
}, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageScaler = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(25), r = i(3), a = i(165); class d extends o.PureComponent { constructor(e, t) { super(e, t), this.imageState = { zoomed: !1, maxScale: 0, minScale: 0, initialScale: 0, scale: 0, top: 0, left: 0, initWidth: 0, initHeight: 0, width: 0, height: 0, containerWidth: 0, containerHeight: 0 }, this.mouseState = { down: !1, startX: 0, startY: 0, startLeft: 0, startTop: 0, ts: null, deltaX: 0, deltaY: 0 }; const i = s.default.clone(this.imageState); this.resetImageState = () => { this.imageState = s.default.clone(i), this.clearImagePosition() }, this.resetWillChangeAsync = s.default.debounce((...e) => { e.forEach(e => e.style.willChange = "auto") }, 300), this.resetSvgRenderingAsync = s.default.debounce(e => { this.setSvgRendering(e) }, 300), this.updateImageAsync = s.default.debounce(() => { this.updateImage() }, 0), this.trackZoomInAsync = s.default.debounce(e => { this.$logZoom(!0, e) }, 500), this.trackZoomOutAsync = s.default.debounce(e => { this.$logZoom(!1, e) }, 500), window.addEventListener("resize", s.default.debounce(() => { this.imageState.zoomed ? this.handleWindowResize() : (this.setInitialImageState(), this.updateImage()) }, 200)); const n = { mousedown: this.onMouseDown, mouseup: this.onMouseUp, mousemove: this.onMouseMove, mouseleave: this.onMouseLeave }; Object.keys(n).forEach(e => { document.documentElement.addEventListener(e, t => { n[e].call(this, t) }) }) } $logZoom(e, t) { const i = e ? "ocr_image_zoom_in" : "ocr_image_zoom_out", n = e ? "in" : "out"; r.$tracker.sendMetric(i, { source: t, zoom: n }) } resetImagePosition() { this.resetImageState(), this.setInitialImageState(), this.updateImage() } setInitialImageState() { const e = document.getElementById(a.ids.resultImage), t = document.getElementById(a.ids.resultImageContainer); if (!e || !t) return; let { clientHeight: i, clientWidth: n } = e; const { clientHeight: o, clientWidth: r } = t, { clientHeight: d, clientWidth: c } = e, l = n / i; l > (r - 2 * a.CONTROLS_WIDTH) / (o - 2 * a.IMAGE_MARGIN) ? (n = r - 2 * a.CONTROLS_WIDTH, i = n / l) : (i = o - 2 * a.IMAGE_MARGIN, n = i * l); const u = n / c, h = Math.max(d, c), g = Math.min(a.MAX_SCALE, Math.max(1, a.MAX_MAXIMAL_SIZE / h)), p = Math.max(a.MIN_SCALE, a.MIN_MAXIMAL_SIZE / Math.max(h, a.MIN_MAXIMAL_SIZE)); s.default.extend(this.imageState, { maxScale: Math.max(g, u), minScale: Math.min(p, u), initialScale: u, scale: u, top: (o - i) / 2, left: (r - n) / 2, initWidth: c, initHeight: d, width: n, height: i, containerWidth: r, containerHeight: o }) } handleWindowResize() { const e = document.getElementById(a.ids.resultImageContainer); e && s.default.extend(this.imageState, { containerWidth: e.clientWidth, containerHeight: e.clientHeight }), this.centerImage() } updateImage() { this.updateImagePosition(), this.updateStats() } updateImagePosition() { const e = document.getElementById(a.ids.resultImageWrapper); if (e) { const { top: t, left: i, scale: n } = this.imageState, o = `scale(${n}) translate(${i / n}px, ${t / n}px)`; s.default.setStyles(e, { willChange: "transform", webkitTransform: o, mozTransform: o, transform: o }), this.resetWillChangeAsync(e) } } centerImage() { const e = this.imageState; if (!document.getElementById(a.ids.resultImageWrapper)) return; const t = e.height < e.containerHeight ? (e.containerHeight - e.height) / 2 : e.top, i = e.width < e.containerWidth ? (e.containerWidth - e.width) / 2 : e.left; s.default.extend(e, { top: t, left: i }), this.updateImagePosition() } setSvgRendering(e, t = null) { const i = { "text-rendering": "geometricPrecision", "shape-rendering": "geometricPrecision", "image-rendering": "optimizeQuality", "color-rendering": "optimizeQuality" }; for (const n in i) i.hasOwnProperty(n) && e.setAttribute(n, t || i[n]) } clearImagePosition() { const e = document.getElementById(a.ids.resultImage), t = document.getElementById(a.ids.resultImageWrapper); e && s.default.setStyles(e, { width: null, height: null }), t && s.default.setStyles(t, { top: null, left: null }), this.updateStats() } updateStats() { const e = document.getElementById(a.ids.resultStats); e && (this.imageState.scale ? e.innerHTML = Math.floor(100 * this.imageState.scale) + "%" : e.innerHTML = null) } onWheel(e) { if (this.mouseState.down) return; e.preventDefault(); const t = () => { const t = e.deltaY > 0 ? -a.SCALE_STEP : a.SCALE_STEP, { x: i, y: n } = this.getEventCoords(e), s = this.imageState.scale + Math.max(1, Math.abs(e.deltaY / 50)) * t; this.applyScale(s, i, n), t > 0 ? this.trackZoomInAsync("wheel") : this.trackZoomOutAsync("wheel") }; s.default.firefoxVersion ? setTimeout(t, 0) : t() } onZoom(e, t) { if (this.mouseState.down) return; t.preventDefault(); const i = this.imageState.scale + a.BTN_SCALE_STEP * e, n = this.imageState.initWidth / 2, s = this.imageState.initHeight / 2; this.applyScale(i, n, s), this.$logZoom(1 === e, "button") } onDblClick(e) { e.preventDefault(); const { x: t, y: i } = this.getEventCoords(e); let n = 2.5 * this.imageState.initialScale; this.imageState.scale !== this.imageState.initialScale && (n = this.imageState.initialScale); const s = n > this.imageState.scale; this.applyScale(n, t, i), n === this.imageState.initialScale && this.centerImage(), this.$logZoom(s, "dblclick") } onMouseDown(e) { const t = document.getElementById(a.ids.resultImageWrapper); if (!s.default.getClosest(e.target, e => e === t)) return; e.preventDefault(); const { screenX: i, screenY: n } = e; s.default.extend(this.mouseState, { down: !0, startX: i, startY: n, startLeft: this.imageState.left, startTop: this.imageState.top, ts: Date.now(), deltaX: 0, deltaY: 0 }) } onMouseMove(e) { if (!this.mouseState.down) return; e.preventDefault(); const { screenX: t, screenY: i } = e, n = a.IMAGE_MARGIN, o = this.mouseState.startX - t, r = this.mouseState.startY - i, d = this.imageState.containerHeight - this.imageState.height, c = this.imageState.containerWidth - this.imageState.width, l = d > 0 ? d / 2 : d - n, u = c > 0 ? c / 2 : c - n, h = d > 0 ? d / 2 : n, g = c > 0 ? c / 2 : n, p = Math.min(l, this.imageState.top), m = Math.min(u, this.imageState.left), _ = Math.max(h, this.imageState.top), f = Math.max(g, this.imageState.left), E = this.mouseState.startTop - r, T = this.mouseState.startLeft - o, S = Math.min(Math.max(p, E), _), v = Math.min(Math.max(m, T), f), C = E - S, L = T - v; s.default.extend(this.mouseState, { startY: this.mouseState.startY + C, startX: this.mouseState.startX + L, deltaX: this.mouseState.deltaX + Math.abs(o), deltaY: this.mouseState.deltaY + Math.abs(r) }), s.default.extend(this.imageState, { top: S, left: v }), this.updateImagePosition() } onMouseUp(e) { if (!this.mouseState.down) return; const { ts: t, deltaX: i, deltaY: n } = this.mouseState; if (!this.getProperty("dblClickZoom")) { const e = i + n; Date.now() - t < a.MAX_CLICK_TIMEOUT && e < a.MAX_CLICK_MOVE && this.toggleOrig() } e.preventDefault(), this.mouseState.down = !1 } onMouseLeave() { this.mouseState.down = !1 } toggleZoomBtnDisableState(e, t) { const i = this.getRef(e); i && (i.disabled = t) } applyScale(e, t, i) { const n = this.imageState, o = document.getElementById(a.ids.resultImage), r = Math.min(Math.max(n.minScale, e), n.maxScale); if (!o || r === n.scale) return; this.toggleZoomBtnDisableState(this.refs.zoomIn, r === n.maxScale), this.toggleZoomBtnDisableState(this.refs.zoomOut, r === n.minScale); const { clientWidth: d, clientHeight: c } = o, l = n.initWidth * r, u = n.initHeight * r, h = i / c, g = t / d, p = (u - n.height) * h, m = (l - n.width) * g, _ = n.top - p, f = n.left - m; s.default.extend(n, { zoomed: !0, scale: r, width: l, height: u, top: _, left: f }), this.updateImage() } getEventCoords(e) { return { x: e.offsetX || e.layerX, y: e.offsetY || e.layerY } } } t.ImageScaler = d }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageRecognizerApplication = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(47), r = i(138), a = i(325), d = i(326), c = i(327); class l extends o.DesktopTranslateApplication { constructor(e) { super(e), this.initMetrikas = s.default.bindInit(d.initMetrikas), this.initToast = s.default.bindInit(c.initToast); const t = this, i = new a.ImageStorage({}, { name: "iTrSettings" }); this._settings = i, document.addEventListener("paste", (function (e) { let i, n; const s = e.clipboardData && e.clipboardData.items; if (s) for (i = 0, n = s.length; i < n; i++)if (-1 !== s[i].type.indexOf("image")) { t.emit("pasteImage", s[i].getAsFile()); break } }), !1), this.getModel().on("change", (function (e, n, s) { switch (e) { case "mode": case "srcLang": case "dstLang": i.setProperty(e, n), "langSelect" === s.sender && t.emit("langChanged", e) } })) } getTranslatorModel() { const e = this.getConfig(); return this._translatorModel || (this._translatorModel = new r.TranslatorModel({ srv: e.SRV, url: e.TRANSLATOR_URL, format: r.TranslatorModel.formats.HTML }, { validators: { text() { const t = this.getText().join("\n"); return t && t.length <= e.MAX_TRANSLATOR_QUERY }, srcLang(t) { return s.default.hasProperty(e.OCR_LANGS, t) && t !== this.getProperty("dstLang") }, dstLang(t) { return s.default.hasProperty(e.TRANSLATOR_LANGS, t) && t !== this.getProperty("srcLang") } }, cacheEnabled: !0 })), this._translatorModel } } t.ImageRecognizerApplication = l }, function (e, t, i) { "use strict"; t.__esModule = !0, t.ImageStorage = void 0; var n = i(65); class s extends n.AppStorage { } t.ImageStorage = s }, function (e, t, i) { "use strict"; t.__esModule = !0, t.initMetrikas = void 0; var n, s = (n = i(0)) && n.__esModule ? n : { default: n }, o = i(3); t.initMetrikas = function () { const e = this.getStatisticsModel(), t = this.getConfig(); return o.$tracker.onMetricSend((t, i = {}) => { e.send(t, i) }), this.on("track", (function (t) { e.sendMetrika(t) })).on("adBlockChecked", (function (t) { e.send("check_adblock", { has_adblock: t }) })).on("pageReady", (function () { const i = this.getProps(), n = this.getExpFlags().join(","); e.send("page_load", { src_lang: i.srcLang || "", dst_lang: i.dstLang || "", referrer: document.referrer || "", ui: t.UI_LANG, ...n.length ? { exp_flags: n } : {} }) })).on("pageLoaded", (function () { const t = this.getSettings(); e.send("settings_onload", { autoLangDetect: t.getProperty("auto") ? 1 : 0, enter: t.isOptionEnabled("enter") ? 1 : 0, autocorrect: t.isOptionEnabled("autocorrect") ? 1 : 0, history: t.isOptionEnabled("history") ? 1 : 0, hotkeys: t.isOptionEnabled("hotkeys") ? 1 : 0, theme: t.getProperty("theme") || "", preferDarkMode: s.default.preferDarkMode() ? 1 : 0 }) })).on("optionsChanged", (function (t, i) { const n = "settings_" + t + "_click"; e.send(n, { name: t, enabled: i ? 1 : 0 }) })).on("ocrLoadImage", (function (t, i) { const n = this.getProps(); e.send("ocr_load_image", { dir: n.srcLang + "-" + n.dstLang, type: t, file_name: i }) })).on("ocrSelectText", (function (t) { const i = this.getProps(), n = 1 === t.w && 1 === t.h ? "box_tap" : "select_area"; e.send("ocr_" + n, { x: t.x, y: t.y, w: t.w, h: t.h, dir: i.srcLang + "-" + i.dstLang }) })).on("ocrPasteText", (function () { const t = this.getProps(); e.send("ocr_translation_navigate", { dir: t.srcLang + "-" + t.dstLang }) })).on("refreshAlertShow", (function () { e.send("ocr_refresh_alert_show") })).on("action:expiredRefresh", (function () { e.send("ocr_refresh_alert_click") })).on("action:resetImage", (function () { e.send("ocr_delete") })).on("moveEnd", (function () { const t = this.getProps(); e.send("ocr_move", { dir: t.srcLang + "-" + t.dstLang }) })).on("ocrZoom", (function (t, i = "button") { const n = this.getProps(), s = t ? "in" : "out", o = "ocr_image_zoom_" + s; e.send(o, { dir: n.srcLang + "-" + n.dstLang, type: s, source: i }) })), this } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.initToast = void 0; var n = i(161), s = i(2), o = i(162); t.initToast = function (e) { const t = new n.ToastPresenter({ view: new s.TouchView({ element: e.ELEMENTS.errorToast, contentElement: e.ELEMENTS.errorToastContent }), model: new o.ToastModel({ delay: e.TOAST_DELAY }) }); return this.getModel().on("set:toast", (function (e, i) { t.getView().setState("commonComplaint", i.commonComplaint), t.showToast(e, i.delay) })), this } }, function (e, t, i) { "use strict"; t.__esModule = !0, t.getImageElements = void 0; const n = e => document.getElementById(e); t.getImageElements = () => ({ logo: n("logo"), header: n("header"), tooltip: n("tooltip"), fileInput: n("fileInput"), tableau: n("tableau"), tableauFrame: n("tableauFrame"), errorToast: n("errorToast"), errorToastContent: n("errorToastContent"), modeGroup: n("modeGroup"), modeButton: n("modeButton"), modeListbox: n("modeListbox"), fileContainer: n("fileContainer"), alignGroup: n("alignGroup"), alignButton: n("alignButton"), alignListbox: n("alignListbox"), dropOverlay: n("dropOverlay"), dropContent: n("dropContent"), headButtons: n("headButtons"), ocrContainer: n("ocrContainer"), origChoiceGroup: n("origChoiceGroup"), srcLangButton: n("srcLangButton"), dstLangButton: n("dstLangButton"), sourceLangListbox: n("srcLangListbox"), sourceLangListboxContent: n("srcLangListboxContent"), targetLangListboxContent: n("dstLangListboxContent"), targetLangListbox: n("dstLangListbox"), langSwitcherButton: n("langSwitcherButton"), langSwitcherListbox: n("langSwitcherListbox"), langSelect: n("langSelect"), downloadButton: n("downloadButton"), complaintPopup: n("complaintPopup"), complaintInfoPopup: n("complaintInfoPopup"), complaintPopupProposalInput: n("complaintPopupProposalInput"), feedbackPopup: n("feedbackPopup"), feedbackPopupButton: n("feedbackPopupButton") }) }]);